(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3CPU":function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(a("GKPG")),r=a("UkBv");t.XmlAttribute=r.default;var o=a("L7dJ");t.XmlAttributeText=o.default;var s=a("UBQ+");t.XmlCdata=s.default;var c=a("qScH");t.XmlCharData=c.default;var l=a("8mP/");t.XmlCharRef=l.default;var h=a("iIvF");t.XmlComment=h.default;var d=a("NJLA");t.XmlDecl=d.default;var p=a("GKPG");t.XmlDocument=p.default;var u=a("587B");t.XmlDtd=u.default;var m=a("3VZR");t.XmlDtdAttlist=m.default;var g=a("JikW");t.XmlDtdElement=g.default;var b=a("PO8X");t.XmlDtdEntity=b.default;var f=a("HXsH");t.XmlDtdNotation=f.default;var N=a("hGlE");t.XmlDtdParamEntityRef=N.default;var y=a("JdgO");t.XmlElement=y.default;var A=a("h2TC");t.XmlEntityRef=A.default;var S=a("j3+I");t.XmlProcInst=S.default,t.document=function(e){return void 0===e&&(e={}),new n.default(e)}},"3VZR":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._parent=e,this.charData=a.charData}return Object.defineProperty(e.prototype,"charData",{get:function(){return this._charData},set:function(e){if(this._validation&&!n.validateChar(e))throw new Error(i.getContext(this.up())+': attribute-list declaration "'+e+'" should not contain characters not allowed in XML');this._charData=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"<!ATTLIST "+this._charData+">"},e.prototype.up=function(){return this._parent},e}()},"587B":function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=a("FxkU"),r=a("KGbz"),o=a("t95l"),s=i(a("iIvF")),c=i(a("3VZR")),l=i(a("JikW")),h=i(a("PO8X")),d=i(a("HXsH")),p=i(a("hGlE")),u=i(a("j3+I"));function m(e){for(var t=0;t<e.length;t++){var a=e.charCodeAt(t);if(!(10===a||13===a||32===a||33===a||a>=35&&a<=37||a>=39&&a<=47||a>=48&&a<=57||58===a||59===a||61===a||63===a||a>=64&&a<=90||95===a||a>=97&&a<=122))return!1}return!0}t.default=function(){function e(e,t,a){this._pubId=void 0,this._sysId=void 0,this._validation=t,this._children=[],this._parent=e,this.name=a.name,o.isUndefined(a.sysId)||(this.sysId=a.sysId),o.isUndefined(a.pubId)||(this.pubId=a.pubId)}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){if(this._validation&&!o.validateName(e))throw new Error(n.getContext(this.up())+': DTD name "'+e+'" should not contain characters not allowed in XML names');this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pubId",{get:function(){return this._pubId},set:function(e){if(!o.isUndefined(e)){if(this._validation&&!m(e))throw new Error(n.getContext(this.up())+': DTD public identifier "'+e+'" should not contain characters not allowed in public identifiers');if(this._validation&&o.isUndefined(this._sysId))throw new Error(n.getContext(this.up())+': DTD public identifier "'+e+'" should not be defined if system identifier is undefined')}this._pubId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sysId",{get:function(){return this._sysId},set:function(e){if(!o.isUndefined(e)){if(this._validation&&!o.validateChar(e))throw new Error(n.getContext(this.up())+': DTD system identifier "'+e+'" should not contain characters not allowed in XML');if(this._validation&&-1!==e.indexOf("'")&&-1!==e.indexOf('"'))throw new Error(n.getContext(this.up())+': DTD system identifier "'+e+'" should not contain both single quotes and double quotes')}this._sysId=e},enumerable:!0,configurable:!0}),e.prototype.attlist=function(e){var t=new c.default(this,this._validation,e);return this._children.push(t),t},e.prototype.comment=function(e){var t=new s.default(this,this._validation,e);return this._children.push(t),t},e.prototype.element=function(e){var t=new l.default(this,this._validation,e);return this._children.push(t),t},e.prototype.entity=function(e){var t=new h.default(this,this._validation,e);return this._children.push(t),t},e.prototype.notation=function(e){var t=new d.default(this,this._validation,e);return this._children.push(t),t},e.prototype.paramEntityRef=function(e){var t=new p.default(this,this._validation,e);return this._children.push(t),t},e.prototype.procInst=function(e){var t=new u.default(this,this._validation,e);return this._children.push(t),t},e.prototype.toString=function(e){void 0===e&&(e={});var t=new r.StringOptions(e),a="<!DOCTYPE "+this._name;if(o.isUndefined(this._pubId))o.isUndefined(this._sysId)||(a=this.appendId("SYSTEM",this._sysId,a+=" ",t));else{if(o.isUndefined(this._sysId))throw new Error(n.getContext(this.up())+": DTD system identifier is not undefined");a=this.appendId("PUBLIC",this._pubId,a+=" ",t),a=this.appendId("",this._sysId,a,t)}if(0!==this._children.length){a+=" [";for(var i=0,s=this._children;i<s.length;i++)t.pretty&&(a+=t.newline+t.indent),a+=s[i].toString();t.pretty&&(a+=t.newline),a+="]>"}else a+=">";return a},e.prototype.up=function(){return this._parent},e.prototype.appendId=function(e,t,a,i){if(a+=e+" ",i.doubleQuotes){if(this._validation&&-1!==t.indexOf('"'))throw new Error(n.getContext(this.up())+": doubleQuotes option inconsistent with DTD system identifier or public identifier");a+='"'+t+'"'}else{if(this._validation&&-1!==t.indexOf("'"))throw new Error(n.getContext(this)+": doubleQuotes option inconsistent with DTD system identifier or public identifier");a+="'"+t+"'"}return a},e}(),t.validatePubId=m},"8mP/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._hex=!1,this._validation=t,this._parent=e,this.char=a.char,n.isUndefined(a.hex)||(this.hex=a.hex)}return Object.defineProperty(e.prototype,"char",{get:function(){return this._char},set:function(e){if(this._validation&&!n.validateSingleChar(e))throw new Error(i.getContext(this.up())+': character reference "'+e+'" should reference a single character, and this character should be allowed in XML');this._char=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hex",{get:function(){return this._hex},set:function(e){this._hex=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var e;if(1===this._char.length)e=this._char.charCodeAt(0);else{var t=this._char.charCodeAt(0);if(t>=55296&&t<=56319&&this._char.length>1){var a=this._char.charCodeAt(1);if(!(a>=56320&&a<=57343))throw new Error(i.getContext(this.up())+': character reference "'+this.char+'" should reference a valid Unicode character');e=1024*(t-55296)+a-56320+65536}else e=t}return this._hex?"&#x"+e.toString(16)+";":"&#"+e+";"},e.prototype.up=function(){return this._parent},e}()},FxkU:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(a("UkBv")),r=i(a("GKPG")),o=i(a("587B")),s=i(a("JdgO"));t.getContext=function e(t){if(t instanceof n.default)return e(t.up())+' > attribute "'+t.name+'"';if(t instanceof r.default)return"in XML document";if(t instanceof o.default)return e(t.up())+" > DTD";if(t instanceof s.default)return e(t.up())+' > element "'+t.name+'"';throw new Error("Unrecognized object of type "+Object.prototype.toString.call(t))}},GKPG:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=a("KGbz"),r=a("t95l"),o=i(a("iIvF")),s=i(a("NJLA")),c=i(a("587B")),l=i(a("JdgO")),h=i(a("j3+I"));t.default=function(){function e(e){this._children=[],this._validation=!!r.isUndefined(e.validation)||e.validation}return e.prototype.comment=function(e){var t=new o.default(this,this._validation,e);return this._children.push(t),t},e.prototype.decl=function(e){if(void 0===e&&(e={}),this._validation&&0!==this._children.length)throw new Error("in XML document: declaration must be the first child");var t=new s.default(this,this._validation,e);return this._children.push(t),t},e.prototype.dtd=function(e){var t=this._children.filter((function(e){return e instanceof l.default}));if(this._validation&&0!==t.length)throw new Error("in XML document: DTD must precede the root element");var a=new c.default(this,this._validation,e);return this._children.push(a),a},e.prototype.element=function(e){var t=this._children.filter((function(e){return e instanceof l.default}));if(this._validation&&0!==t.length)throw new Error("in XML document: only one root element is permitted");var a=new l.default(this,this._validation,e);return this._children.push(a),a},e.prototype.procInst=function(e){var t=new h.default(this,this._validation,e);return this._children.push(t),t},e.prototype.toString=function(e){void 0===e&&(e={});var t=this._children.filter((function(e){return e instanceof l.default}));if(this._validation&&1!==t.length)throw new Error("in XML document: no more than one root element is permitted");for(var a=new n.StringOptions(e),i="",r=0,o=this._children;r<o.length;r++){var h=o[r];i+=h instanceof s.default||h instanceof c.default||h instanceof l.default?h.toString(e):h.toString(),a.pretty&&(i+=a.newline)}var d=i.length-a.newline.length;return i.substr(d)===a.newline&&(i=i.substr(0,d)),i},e}()},HXsH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._parent=e,this.charData=a.charData}return Object.defineProperty(e.prototype,"charData",{get:function(){return this._charData},set:function(e){if(this._validation&&!n.validateChar(e))throw new Error(i.getContext(this.up())+': notation declaration "'+e+'" should not contain characters not allowed in XML');this._charData=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"<!NOTATION "+this._charData+">"},e.prototype.up=function(){return this._parent},e}()},JdgO:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=a("FxkU"),r=a("KGbz"),o=a("t95l"),s=i(a("UkBv")),c=i(a("UBQ+")),l=i(a("qScH")),h=i(a("8mP/")),d=i(a("iIvF")),p=i(a("h2TC")),u=i(a("j3+I"));t.default=function(){function e(e,t,a){this._validation=t,this._replaceInvalidCharsInName=!o.isUndefined(a.replaceInvalidCharsInName)&&a.replaceInvalidCharsInName,this._useSelfClosingTagIfEmpty=!!o.isUndefined(a.useSelfClosingTagIfEmpty)||a.useSelfClosingTagIfEmpty,this._children=[],this._attributeNames=[],this._parent=e,this.name=a.name}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){if(this._replaceInvalidCharsInName){if(0===(e=o.fixName(e)).length)throw new Error(n.getContext(this.up())+": element name should not be empty")}else if(this._validation&&!o.validateName(e))throw 0===e.length?new Error(n.getContext(this.up())+": element name should not be empty"):new Error(n.getContext(this.up())+': element name "'+e+'" should not contain characters not allowed in XML names');this._name=e},enumerable:!0,configurable:!0}),e.prototype.attribute=function(e){if(this._validation&&-1!==this._attributeNames.indexOf(e.name))throw new Error(n.getContext(this.up())+': element "'+this.name+'" already contains an attribute with the name "'+e.name+'"');var t=new s.default(this,this._validation,e);return this._children.push(t),this._attributeNames.push(e.name),t},e.prototype.cdata=function(e){var t=new c.default(this,this._validation,e);return this._children.push(t),t},e.prototype.charData=function(e){var t=new l.default(this,this._validation,e);return this._children.push(t),t},e.prototype.charRef=function(e){var t=new h.default(this,this._validation,e);return this._children.push(t),t},e.prototype.comment=function(e){var t=new d.default(this,this._validation,e);return this._children.push(t),t},e.prototype.element=function(t){var a=new e(this,this._validation,t);return this._children.push(a),a},e.prototype.entityRef=function(e){var t=new p.default(this,this._validation,e);return this._children.push(t),t},e.prototype.procInst=function(e){var t=new u.default(this,this._validation,e);return this._children.push(t),t},e.prototype.toString=function(e){return void 0===e&&(e={}),this.toStringWithIndent(e,"")},e.prototype.up=function(){return this._parent},e.prototype.toStringWithIndent=function(t,a){for(var i=new r.StringOptions(t),n=a+i.indent,o="<"+this._name,c=[],h=0,d=this._children;h<d.length;h++){var p=d[h];p instanceof s.default?o+=" "+p.toString(t):c.push(p)}if(c.length>0){for(var u="",m=0;m<c.length;m++){var g=c[m],b="";b+=g instanceof e?g.toStringWithIndent(i,n):g.toString();var f=m>0?c[m-1]:void 0;g instanceof l.default&&""===g.toString()||(i.pretty&&(this.allSameLineNodes(c)||m>0&&this.onSameLine(g,f)||(b=i.newline+n+b)),u+=b)}i.pretty&&(this.allSameLineNodes(c)||(u+=i.newline+a)),o+=0===u.length&&this._useSelfClosingTagIfEmpty?"/>":">"+u+"</"+this._name+">"}else o+="/>";return o},e.prototype.allSameLineNodes=function(e){for(var t=0,a=e;t<a.length;t++){var i=a[t];if(!(i instanceof h.default||i instanceof p.default||i instanceof l.default))return!1}return!0},e.prototype.onSameLine=function(e,t){return(e instanceof h.default||e instanceof p.default||e instanceof l.default)&&!o.isUndefined(t)&&(t instanceof h.default||t instanceof p.default||t instanceof l.default)},e}()},JikW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._parent=e,this.charData=a.charData}return Object.defineProperty(e.prototype,"charData",{get:function(){return this._charData},set:function(e){if(this._validation&&!n.validateChar(e))throw new Error(i.getContext(this.up())+': element declaration "'+e+'" should not contain characters not allowed in XML');this._charData=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"<!ELEMENT "+this._charData+">"},e.prototype.up=function(){return this._parent},e}()},KGbz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("t95l");t.StringOptions=function(){return function(e){this.doubleQuotes=!1,this.indent="    ",this.newline="\n",this.pretty=!0,i.isUndefined(e.doubleQuotes)||(this.doubleQuotes=e.doubleQuotes),i.isUndefined(e.indent)||(this.indent=e.indent),i.isUndefined(e.newline)||(this.newline=e.newline),i.isUndefined(e.pretty)||(this.pretty=e.pretty)}}()},L7dJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("LlVR"),r=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._replaceInvalidCharsInCharData=!r.isUndefined(a.replaceInvalidCharsInCharData)&&a.replaceInvalidCharsInCharData,this._parent=e,this.charData=a.charData}return Object.defineProperty(e.prototype,"charData",{get:function(){return this._charData},set:function(e){if(this._replaceInvalidCharsInCharData)e=r.fixChar(e);else if(this._validation&&!r.validateChar(e))throw new Error(i.getContext(this.up())+': attribute text "'+e+'" should not contain characters not allowed in XML');this._charData=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var e=this._charData;return e=n.escapeAmpersands(e),n.escapeLeftAngleBrackets(e)},e.prototype.up=function(){return this._parent},e}()},LlVR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeAmpersands=function(e){return e.replace(/&/g,"&amp;")},t.escapeLeftAngleBrackets=function(e){return e.replace(/</g,"&lt;")},t.escapeRightAngleBracketsInCdataTerminator=function(e){return e.replace(/]]>/g,"]]&gt;")},t.escapeSingleQuotes=function(e){return e.replace(/'/g,"&apos;")},t.escapeDoubleQuotes=function(e){return e.replace(/"/g,"&quot;")}},NJLA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("KGbz"),r=a("t95l");t.default=function(){function e(e,t,a){this._version="1.0",this._validation=t,this._parent=e,this.encoding=a.encoding,this.standalone=a.standalone,r.isUndefined(a.version)||(this.version=a.version)}return Object.defineProperty(e.prototype,"encoding",{get:function(){return this._encoding},set:function(e){if(this._validation&&!r.isUndefined(e)&&!function(e){if(0===e.length)return!1;var t=e.charCodeAt(0);if(!(t>=65&&t<=90||t>=97&&t<=122))return!1;for(var a=1;a<e.length;a++){var i=e.charCodeAt(a);if(!(95===i||45===i||46===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122))return!1}return!0}(e))throw new Error(i.getContext(this.up())+": declaration encoding attribute "+e+" should be a valid encoding");this._encoding=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"standalone",{get:function(){return this._standalone},set:function(e){if(this._validation&&!r.isUndefined(e)&&"yes"!==e&&"no"!==e)throw new Error(i.getContext(this.up())+": declaration standalone attribute "+e+" should be the string 'yes' or the string 'no'");this._standalone=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},set:function(e){if(this._validation&&!function(e){for(var t=0;t<=9;t++)if(e==="1."+t)return!0;return!1}(e))throw new Error(i.getContext(this.up())+": declaration version attribute "+e+" should be a valid XML version");this._version=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e={});var t=new n.StringOptions(e).doubleQuotes?'"':"'",a="<?xml version="+t+this._version+t;return r.isUndefined(this._encoding)||(a+=" encoding="+t+this._encoding+t),r.isUndefined(this._standalone)||(a+=" standalone="+t+this._standalone+t),a+"?>"},e.prototype.up=function(){return this._parent},e}()},P1SL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("3CPU"),n=a("ewic"),r=a("znvk"),o=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e._instance=new e,e}();function s(e,t){var a,i=Object.prototype.toString.call(e);return Object.prototype.hasOwnProperty.call(t.typeHandlers,"*")&&(a=t.typeHandlers["*"]),Object.prototype.hasOwnProperty.call(t.typeHandlers,i)&&(a=t.typeHandlers[i]),a}function c(e,t,a){var n=function(e){return a.cdataInvalidChars&&(-1!==e.indexOf("<")||-1!==e.indexOf("&"))||-1!==a.cdataKeys.indexOf(t.name)||-1!==a.cdataKeys.indexOf("*")};if(t instanceof i.XmlElement)if(n(e))for(var r=e.split("]]>"),o=0;o<r.length;o++)n(r[o])?t.cdata({charData:r[o],replaceInvalidCharsInCharData:a.replaceInvalidChars}):t.charData({charData:r[o],replaceInvalidCharsInCharData:a.replaceInvalidChars}),o<r.length-1&&t.charData({charData:"]]>",replaceInvalidCharsInCharData:a.replaceInvalidChars});else t.charData({charData:e,replaceInvalidCharsInCharData:a.replaceInvalidChars});else t.text({charData:e,replaceInvalidCharsInCharData:a.replaceInvalidChars})}function l(e,t,a,i){var n=a.attribute({name:e,replaceInvalidCharsInName:i.replaceInvalidChars});c(r.stringify(t),n,i)}function h(e,t,a,i){if(e!==i.aliasString)if(0===e.indexOf(i.attributeString)&&r.isObject(t))for(var n=0,c=Object.keys(t);n<c.length;n++){var h=c[n];l(h,r.stringify(t[h]),a,i)}else if(0!==e.indexOf(i.valueString)){var p=a;if(!r.isArray(t)&&!r.isSet(t)){var u=s(t,i);if(!r.isUndefined(u)&&u(t)===o.instance)return;p=a.element({name:e,replaceInvalidCharsInName:i.replaceInvalidChars,useSelfClosingTagIfEmpty:i.useSelfClosingTagIfEmpty})}d(e,t,p,i)}else d(e,r.stringify(t),a,i);else a.name=r.stringify(t)}function d(e,t,a,i){var n=s(t,i);r.isUndefined(n)||(t=n(t)),r.isObject(t)||r.isMap(t)?function(e,t,a){if(r.isMap(e))e.forEach((function(e,i){h(r.stringify(i),e,t,a)}));else for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];h(o,e[o],t,a)}}(t,a,i):r.isArray(t)||r.isSet(t)?function(e,t,a,i){var n;Object.prototype.hasOwnProperty.call(i.wrapHandlers,"*")&&(n=i.wrapHandlers["*"]),Object.prototype.hasOwnProperty.call(i.wrapHandlers,e)&&(n=i.wrapHandlers[e]);var c=e,l=a;if(!r.isUndefined(n)){var h=n(c,t);r.isNull(h)||(c=h,l=a.element({name:e,replaceInvalidCharsInName:i.replaceInvalidChars,useSelfClosingTagIfEmpty:i.useSelfClosingTagIfEmpty}))}t.forEach((function(e){var t=l;if(!r.isArray(e)&&!r.isSet(e)){var a=s(e,i);if(!r.isUndefined(a)&&a(e)===o.instance)return;t=l.element({name:c,replaceInvalidCharsInName:i.replaceInvalidChars,useSelfClosingTagIfEmpty:i.useSelfClosingTagIfEmpty})}d(c,e,t,i)}))}(e,t,a,i):c(r.stringify(t),a,i)}function p(e,t,a){var i=new n.Options(a);d(e.name,t,e,i)}t.Absent=o,t.parseToExistingElement=p,t.parse=function(e,t,a){var r=new n.Options(a),o=new i.XmlDocument({validation:r.validation});return r.declaration.include&&o.decl(r.declaration),r.dtd.include&&o.dtd({name:r.dtd.name,pubId:r.dtd.pubId,sysId:r.dtd.sysId}),p(o.element({name:e,replaceInvalidCharsInName:r.replaceInvalidChars,useSelfClosingTagIfEmpty:r.useSelfClosingTagIfEmpty}),t,a),o.toString(r.format)}},PO8X:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._parent=e,this.charData=a.charData}return Object.defineProperty(e.prototype,"charData",{get:function(){return this._charData},set:function(e){if(this._validation&&!n.validateChar(e))throw new Error(i.getContext(this.up())+': entity declaration "'+e+'" should not contain characters not allowed in XML');this._charData=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"<!ENTITY "+this._charData+">"},e.prototype.up=function(){return this._parent},e}()},"UBQ+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._replaceInvalidCharsInCharData=!n.isUndefined(a.replaceInvalidCharsInCharData)&&a.replaceInvalidCharsInCharData,this._parent=e,this.charData=a.charData}return Object.defineProperty(e.prototype,"charData",{get:function(){return this._charData},set:function(e){if(this._replaceInvalidCharsInCharData)e=n.fixChar(e);else if(this._validation&&!n.validateChar(e))throw new Error(i.getContext(this.up())+': CDATA section "'+e+'" should not contain characters not allowed in XML');if(this._replaceInvalidCharsInCharData)e=e.replace("]]>","\ufffd\ufffd\ufffd");else if(this._validation&&-1!==e.indexOf("]]>"))throw new Error(i.getContext(this.up())+': CDATA section "'+e+"\" should not contain the string ']]>'");this._charData=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"<![CDATA["+this._charData+"]]>"},e.prototype.up=function(){return this._parent},e}()},UkBv:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=a("FxkU"),r=a("LlVR"),o=a("KGbz"),s=a("t95l"),c=i(a("L7dJ")),l=i(a("8mP/")),h=i(a("h2TC"));t.default=function(){function e(e,t,a){this._validation=t,this._replaceInvalidCharsInName=!s.isUndefined(a.replaceInvalidCharsInName)&&a.replaceInvalidCharsInName,this._children=[],this._parent=e,this.name=a.name}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){if(this._replaceInvalidCharsInName){if(0===(e=s.fixName(e)).length)throw new Error(n.getContext(this.up())+": attribute name should not be empty")}else if(this._validation&&!s.validateName(e))throw 0===e.length?new Error(n.getContext(this.up())+": attribute name should not be empty"):new Error(n.getContext(this.up())+': attribute name "'+e+'" should not contain characters not allowed in XML names');this._name=e},enumerable:!0,configurable:!0}),e.prototype.charRef=function(e){var t=new l.default(this,this._validation,e);return this._children.push(t),t},e.prototype.entityRef=function(e){var t=new h.default(this,this._validation,e);return this._children.push(t),t},e.prototype.text=function(e){var t=new c.default(this,this._validation,e);return this._children.push(t),t},e.prototype.toString=function(e){void 0===e&&(e={});for(var t=new o.StringOptions(e),a=t.doubleQuotes?'"':"'",i=this._name+"="+a,n=0,s=this._children;n<s.length;n++){var c=s[n];i+=t.doubleQuotes?r.escapeDoubleQuotes(c.toString()):r.escapeSingleQuotes(c.toString())}return i+a},e.prototype.up=function(){return this._parent},e}()},bMBk:function(e,t,a){"use strict";a.r(t),a.d(t,"RsaReportsModule",(function(){return He}));var i=a("ofXK"),n=a("1kSV"),r=a("qFsG"),o=a("iadO"),s=a("FKr1"),c=a("tyNb"),l=a("mrSG"),h=a("P1SL"),d=a("/UHo"),p=a("kpVs"),u=a("nrdC"),m=a("fXoL"),g=a("kVbP"),b=a("92Lm"),f=a("3Pt+"),N=a("kmnG");function y(e,t){1&e&&(m.Ub(0,"div"),m.Ub(1,"h5"),m.Hc(2,"RSA Pension Report"),m.Tb(),m.Tb())}function A(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function S(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.description," ")}}function T(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",11),m.Ub(1,"div",12),m.Ub(2,"label"),m.Hc(3,"Application Type"),m.Tb(),m.Ub(4,"select",13,14),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().penReport.applicationType=t}))("change",(function(t){return m.yc(e),m.kc().getAppType(t)})),m.Ub(6,"option",15),m.Hc(7,"Select Application Type"),m.Tb(),m.Fc(8,A,2,1,"option",9),m.Tb(),m.Ub(9,"div",16),m.Ub(10,"p",17),m.Hc(11," Application Type is required "),m.Tb(),m.Tb(),m.Tb(),m.Ub(12,"div",12),m.Ub(13,"label"),m.Hc(14,"Pencom Submission Date"),m.Tb(),m.Ub(15,"mat-form-field",18),m.Ub(16,"input",19,20),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().penReport.pencomSubmissionDate=t}))("dateInput",(function(){return m.yc(e),m.kc().validateSubmitDate()})),m.Tb(),m.Qb(18,"mat-datepicker-toggle",21),m.Qb(19,"mat-datepicker",22,23),m.Tb(),m.Ub(21,"div",16),m.Ub(22,"p",17),m.Hc(23," Pencom Submission Date is required "),m.Tb(),m.Tb(),m.Tb(),m.Ub(24,"div",12),m.Ub(25,"label"),m.Hc(26,"Mode of Submission"),m.Tb(),m.Ub(27,"select",24,20),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().penReport.submitMode=t}))("change",(function(t){return m.yc(e),m.kc().getSubmitMode(t)})),m.Ub(29,"option",15),m.Hc(30,"Select Mode of Submission"),m.Tb(),m.Fc(31,S,2,1,"option",9),m.Tb(),m.Ub(32,"div",16),m.Ub(33,"p",17),m.Hc(34," Mode of Submission is required "),m.Tb(),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(5),t=m.xc(17),a=m.xc(20),i=m.kc();m.Bb(4),m.qc("ngModel",i.penReport.applicationType),m.Bb(4),m.qc("ngForOf",i.applicationType),m.Bb(2),m.qc("hidden",e.valid||!1===i.submitted),m.Bb(6),m.qc("matDatepicker",a)("max",i.today)("ngModel",i.penReport.pencomSubmissionDate),m.Bb(2),m.qc("for",a),m.Bb(4),m.qc("hidden",t.valid||!1===i.submitted),m.Bb(5),m.qc("ngModel",i.penReport.submitMode),m.Bb(4),m.qc("ngForOf",i.submissionMode),m.Bb(2),m.qc("hidden",t.valid||!1===i.submitted)}}function v(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div"),m.Ub(1,"button",25),m.gc("click",(function(){m.yc(e);const t=m.kc(),a=m.xc(2);return t.search(a)})),m.Hc(2,"Search "),m.Tb(),m.Tb()}}function U(e,t){if(1&e){const e=m.Vb();m.Ub(0,"button",26),m.gc("click",(function(){return m.yc(e),m.kc().exportToExcel()})),m.Hc(1,"Export to Excel"),m.Tb()}}function M(e,t){if(1&e){const e=m.Vb();m.Ub(0,"button",26),m.gc("click",(function(){return m.yc(e),m.kc().exportToRMAS()})),m.Hc(1,"Generate XML"),m.Tb()}}function E(e,t){if(1&e){const e=m.Vb();m.Ub(0,"button",26),m.gc("click",(function(){return m.yc(e),m.kc().exportRMASToExcel()})),m.Hc(1,"Export XML to Excel"),m.Tb()}}function C(e,t){1&e&&(m.Ub(0,"h4"),m.Hc(1,"Uncheck List"),m.Tb())}function L(e,t){1&e&&(m.Ub(0,"td"),m.Hc(1,"Actions"),m.Tb())}function P(e,t){if(1&e){const e=m.Vb();m.Ub(0,"td"),m.Ub(1,"button",29),m.gc("click",(function(){m.yc(e);const t=m.kc().index,a=m.kc(2);return a.removeToBatch(t,a.taskBatch[t])})),m.Hc(2,"Check"),m.Tb(),m.Tb()}}function O(e,t){if(1&e){const e=m.Vb();m.Ub(0,"tr"),m.Ub(1,"td"),m.Hc(2),m.Tb(),m.Ub(3,"td"),m.Ub(4,"a",28),m.gc("click",(function(){m.yc(e);const a=t.$implicit;return m.kc(2).routeToPage(a.id)})),m.Hc(5),m.Tb(),m.Tb(),m.Ub(6,"td"),m.Hc(7),m.Tb(),m.Ub(8,"td"),m.Hc(9),m.Tb(),m.Ub(10,"td"),m.Hc(11),m.Tb(),m.Ub(12,"td"),m.Hc(13),m.Tb(),m.Ub(14,"td"),m.Hc(15),m.lc(16,"date"),m.Tb(),m.Fc(17,P,3,0,"td",0),m.Tb()}if(2&e){const e=t.$implicit,a=t.index,i=m.kc(2);m.Bb(2),m.Ic(a+1),m.Bb(3),m.Ic(e.workflowRequestID),m.Bb(2),m.Ic(e.applicationType),m.Bb(2),m.Ic(e.modeOfSubmission),m.Bb(2),m.Ic(e.rsapin),m.Bb(2),m.Ic(e.approval_Status),m.Bb(2),m.Ic(m.nc(16,8,e.createdDate,"dd/MM/yyyy")),m.Bb(2),m.qc("ngIf",i.isShowComm)}}function I(e,t){if(1&e&&(m.Ub(0,"table",27),m.Ub(1,"thead"),m.Ub(2,"tr"),m.Ub(3,"td"),m.Hc(4,"S/N"),m.Tb(),m.Ub(5,"td"),m.Hc(6,"Reference Code"),m.Tb(),m.Ub(7,"td"),m.Hc(8,"Application Name"),m.Tb(),m.Ub(9,"td"),m.Hc(10,"Mode of Submission"),m.Tb(),m.Ub(11,"td"),m.Hc(12,"RSA Pin"),m.Tb(),m.Ub(13,"td"),m.Hc(14,"Status"),m.Tb(),m.Ub(15,"td"),m.Hc(16,"Request Date"),m.Tb(),m.Fc(17,L,2,0,"td",0),m.Tb(),m.Tb(),m.Ub(18,"tbody"),m.Fc(19,O,18,11,"tr",9),m.Tb(),m.Tb()),2&e){const e=m.kc();m.Bb(17),m.qc("ngIf",e.isShowComm),m.Bb(2),m.qc("ngForOf",e.taskBatch)}}function R(e,t){1&e&&(m.Ub(0,"td"),m.Hc(1,"Actions"),m.Tb())}function D(e,t){if(1&e){const e=m.Vb();m.Ub(0,"td"),m.Qb(1,"span",30),m.Ub(2,"button",31),m.gc("click",(function(){m.yc(e);const t=m.kc().index,a=m.kc();return a.moveToBatch(t,a.taskList[t])})),m.Hc(3,"Un-Check"),m.Tb(),m.Tb()}}function B(e,t){if(1&e){const e=m.Vb();m.Ub(0,"tr"),m.Ub(1,"td"),m.Hc(2),m.Tb(),m.Ub(3,"td"),m.Ub(4,"a",28),m.gc("click",(function(){m.yc(e);const a=t.$implicit;return m.kc().routeToPage(a.id)})),m.Hc(5),m.Tb(),m.Tb(),m.Ub(6,"td"),m.Hc(7),m.Tb(),m.Ub(8,"td"),m.Hc(9),m.Tb(),m.Ub(10,"td"),m.Hc(11),m.Tb(),m.Ub(12,"td"),m.Hc(13),m.Tb(),m.Ub(14,"td"),m.Hc(15),m.Tb(),m.Ub(16,"td"),m.Hc(17),m.lc(18,"date"),m.Tb(),m.Fc(19,D,4,0,"td",0),m.Tb()}if(2&e){const e=t.$implicit,a=t.index,i=m.kc();m.Bb(2),m.Ic(a+1),m.Bb(3),m.Ic(e.workflowRequestID),m.Bb(2),m.Ic(e.applicationType),m.Bb(2),m.Ic(e.modeOfSubmission),m.Bb(2),m.Ic(e.lastEmployerCode),m.Bb(2),m.Ic(e.rsapin),m.Bb(2),m.Ic(e.approval_Status),m.Bb(2),m.Ic(m.nc(18,9,e.createdDate,"dd/MM/yyyy")),m.Bb(2),m.qc("ngIf",i.isShowComm)}}let k=(()=>{class e{constructor(e,t,a,i){this.service=e,this.helperService=t,this.datePipes=a,this.router=i,this.submitted=!1,this.isHardCopy=!1,this.isRmas=!1,this.isBMULead=!1,this.isBMUMaker=!1,this.isBatch=!1,this.isShowComm=!1,this.isFundAcc=!1,this.isFundAccShow=!1,this.isFundAccAP=!1,this.rmasList=[],this.rmasList2=[],this.useGroup=[],this.applicationType=[],this.signatoryUserList=[],this.signatoryList2=[],this.signatList2=[],this.rmasListStatic=[],this.total=0,this.submissionMode=[{code:"01",description:"Hardcopy"},{code:"02",description:"RMAS"}],this.taskBatch=[],this.tashBatchReq=[],this.taskList=[],this.taskList25Payment=[],this.userList=[],this.insuranceList=[],this.page=1,this.pageSize=10,this.today=new Date,this.penReport={applicationType:"",appTypeCode:"",pencomSubmissionDate:null,submitMode:"",currentUserLogin:"",currentUserName:"",currentUserEmail:"",batchUserLogin:"",batchUserEmail:"",batchUserName:"",batchUserLogin1:"",batchUserEmail1:"",batchUserName1:"",batchUserLogin2:"",batchUserEmail2:"",batchUserName2:"",batchUserRole2:"",batchUserLogin3:"",batchUserLogin4:"",fstSignDate:null,secSignDate:null,sector:"",insuranceCoy:"",comment:"",batchNo:0,teamLeadAmount:"",unitHeadAmount:"",headDeptAmount:"",edOpertnAmount:"",groupName:"",userRole:"",actionTime:new Date,gender:0}}ngOnInit(){this.currentUserDetail(),this.getApplicationType()}currentUserDetail(){this.service.getIdentityUserUrl().then(e=>{if(null!=e){console.log(e);let t=e.samAccountName;this.penReport.currentUserName=e.displayName,this.penReport.currentUserLogin=e.samAccountName,this.penReport.currentUserEmail=e.emailAddress,this.initTaskList(t)}}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getApplicationType(){this.service.get("DigiProFormSetting/GetApplicationTypes").then(e=>{null!=e&&(this.applicationType=e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}initTaskList(e){this.service.postUrl("DigiProRequest/GetUserGroups/"+e).then(t=>{if(null!=t){this.useGroup=t;let a=t.some(e=>e.groupName==p.l),i=t.some(e=>e.groupName==p.f);1==a?(this.isBatch=!0,this.isBMULead=!0,this.isShowComm=!0,this.gettaskBMU("AA3")):1==i&&this.gettaskChecker(e,p.f)}}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}gettaskBMU(e){this.service.postUrl("DigiProRequest/MyBMULeadReport/"+e).then(e=>{console.log(e),this.startMapping(e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}updateEmpCode(){return Object(l.a)(this,void 0,void 0,(function*(){let e=this.penReport.applicationType,t=this.taskList.filter(t=>t.applicationType===e);const a=[];for(let i=0;i<t.length;i++)a.push(this.getEmpCode(t[i]));yield Promise.allSettled(a)}))}getEmpCode(e){return Object(l.a)(this,void 0,void 0,(function*(){let t={PIN:e.rsapin,Userkey:u.g,Uid:u.f};yield this.service.postUrlStanbic("DigiPro/FetchBioData/GetCustomerBioData",t).then(t=>{e.lastEmployerCode=t.EmployerCode}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}))}gettaskChecker(e,t){this.service.postUrl(`DigiProRequest/GetPendingMyApproval/${e}/${t}`).then(e=>{console.log(e),null!=e&&this.startMapping(e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}startMapping(e){this.taskList=e,this.taskList=this.taskList.sort((e,t)=>t.id-e.id);let t=this.penReport.applicationType,a=this.penReport.submitMode;if(this.taskList=""!=t&&""!=a?this.taskList.filter(e=>e.applicationType==t&&e.modeOfSubmission==a):""!=t?this.taskList.filter(e=>e.applicationType==t):""!=a&&""!=t?this.taskList.filter(e=>e.applicationType==t&&e.modeOfSubmission==a):""!=a?this.taskList.filter(e=>e.modeOfSubmission==a):this.taskList,t===d.k&&"RMAS"===a){this.taskList25Payment=[];let e=this.taskList;for(let t=0;t<e.length;t++){let a=new Date(this.datePipes.transform(e[t].dateOfExit,"yyyy-MM-dd")),i=new Date(this.datePipes.transform(this.helperService.getTimeStamp(),"yyyy-MM-dd"));(new Date(i).getTime()-new Date(a).getTime())/864e5>=180&&this.taskList25Payment.push(e[t])}this.taskList=[],this.taskList=this.taskList25Payment}}routeToPage(e){this.router.navigate(["approval-page",{id:e}])}getAppType(e){let t=e.target.selectedIndex,a=-1+t;this.appType=t,console.log(this.applicationType[a]),this.penReport.applicationType=this.applicationType[a].name,this.penReport.appTypeCode=this.applicationType[a].code,this.gettaskBMU("AA3")}validateSubmitDate(){this.gettaskBMU("AA3")}getSubmitMode(e){let t=e.target.selectedIndex,a=-1+t;this.modeSubmit=t,console.log(this.submissionMode[a]),this.penReport.submitMode=this.submissionMode[a].description;let i=this.penReport.submitMode;this.gettaskBMU("AA3"),"Hardcopy"==i?(this.isHardCopy=!0,this.isRmas=!1):"RMAS"==i&&(this.isRmas=!0,this.isHardCopy=!1)}search(e){if(this.submitted=!0,e.valid){if(1==this.useGroup.some(e=>e.groupName==p.l)){let e=this.penReport.appTypeCode,t=this.penReport.submitMode;""!=t&&""!=e?this.service.postUrl(`DigiProRequest/GetPencomTemplate/AA3/${e}/${t}`).then(e=>{console.log(e),this.startMapping(e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.error.message)}))):(this.penReport.pencomSubmissionDate=new Date(""),this.helperService.showError("Please select Pencom Submission Date, application type and mode of submission before you proceed"))}}else console.log("Invalid form"),this.helperService.showError("An error Occured, Try again"),console.log(this.penReport)}moveToBatch(e,t){""!==this.penReport.applicationType&&""!==this.penReport.submitMode?"AA3"===t.current_Approver_Code&&(this.taskList.splice(e,1),this.batchItem(t)):this.helperService.showError("Please select application type and submit mode before you proceed")}batchItem(e){this.taskBatch.push(e)}removeToBatch(e,t){this.taskBatch.splice(e,1),this.taskList.push(t),this.taskList=this.taskList.sort((e,t)=>t.id-e.id)}exportToRMAS(){this.taskList=this.taskList.filter(e=>""!==e.lastEmployerCode);let e=this.taskList,t=this.taskList.reduce((e,t)=>e+Number(t.netAmount.replace(/NGN|,/g,"")),0),a=this.taskList.reduce((e,t)=>e+Number(t.requestedAmount.replace(/NGN|,/g,"")),0),i=this.helperService.formatNaira(t),n=this.helperService.formatNaira(a),r=Number(i.replace(/\u20a6|,/g,"")),o=Number(n.replace(/\u20a6|,/g,""));const s=this.taskList[this.taskList.length-1];if("NaN"===this.helperService.formatNaira(s.accruedRight.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(s.accruedRight="0.00"),"NaN"===this.helperService.formatNaira(s.basic.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(s.basic="0.00"),"NaN"===this.helperService.formatNaira(s.housing.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(s.housing="0.00"),"NaN"===this.helperService.formatNaira(s.transport.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(s.transport="0.00"),"PRIVATE"===s.sector.toUpperCase())var c=Number(s.basic.replace(/NGN|,/g,""))+Number(s.housing.replace(/NGN|,/g,""))+Number(s.transport.replace(/NGN|,/g,""));else c=Number(s.consolSalary.replace(/NGN|,/g,""))/2;var l=12*Number(c);for(let h=0;h<e.length;h++)e[h].serialNo=h+1;let p=this.penReport.applicationType;if(this.rmasList=[],this.rmasListStatic=[],p===d.g){let t="Male"==s.sex?1:0,a=this.datePipes.transform(s.dateofBirth,"dd-MMM-yyyy"),i=this.datePipes.transform(s.dateOfExit,"dd-MMM-yyyy"),n="NG";var u=[{"serial-no":"1",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,nationality:n,gender:t,"birth-date":a,"retirement-date":i,"reason-for-payment":3,"rsa-balance":0,"enbloc-payment":0},{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,nationality:n,gender:t,"birth-date":a,"retirement-date":i,"reason-for-payment":1,"rsa-balance":0,"enbloc-payment":0}];let o=[{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,nationality:"NG",gender:t,"birth-date":a,"retirement-date":i,"reason-for-payment":3,"rsa-balance":r,"enbloc-payment":r}];for(let r=0;r<e.length;r++){let t="Male"==e[r].sex?1:0,a={"serial-no":e[r].serialNo,pin:e[r].rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":e[r].lastEmployerCode,nationality:n,gender:t,"birth-date":this.datePipes.transform(e[r].dateofBirth,"dd-MMM-yyyy"),"retirement-date":this.datePipes.transform(e[r].dateOfExit,"dd-MMM-yyyy"),"reason-for-payment":3,"rsa-balance":Number(e[r].netAmount.replace(/NGN|,/g,"")),"enbloc-payment":Number(e[r].netAmount.replace(/NGN|,/g,""))};this.rmasListStatic.push(a)}this.rmasList=this.rmasListStatic.concat(o);var m="PFAAWBR400",g="PFAAWBR400.xsd",b="20100",f="20101",N="Request For Payment of Small Balances of Foreigners-Enbloc Payment",y="10021";let c=this.helperService.getTimeStamp();var A=this.datePipes.transform(c,"dd-MMM-yyyy")}else if(p===d.k){this.penReport.gender="Male"==s.sex?1:0;let t=this.penReport.gender,a=this.datePipes.transform(s.dateofBirth,"dd-MMM-yyyy"),i=this.datePipes.transform(s.dateOfExit,"dd-MMM-yyyy"),n=[{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,gender:t,"birth-date":a,"disengagement-date":i,"rsa-balance":o,"twentyfive-percent-rsa-balance":r}];var S=[{"serial-no":"1",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,gender:t,"birth-date":a,"disengagement-date":i,"rsa-balance":0,"twentyfive-percent-rsa-balance":0},{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,gender:t,"birth-date":a,"disengagement-date":i,"rsa-balance":0,"twentyfive-percent-rsa-balance":0}];for(let r=0;r<e.length;r++){this.penReport.gender="Male"==e[r].sex?1:0;let t={"serial-no":e[r].serialNo,pin:e[r].rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":e[r].lastEmployerCode,gender:this.penReport.gender,"birth-date":this.datePipes.transform(e[r].dateofBirth,"dd-MMM-yyyy"),"disengagement-date":this.datePipes.transform(e[r].dateOfExit,"dd-MMM-yyyy"),"rsa-balance":4*Number(e[r].netAmount.replace(/NGN|,/g,"")),"twentyfive-percent-rsa-balance":e[r].netAmount.replace(/NGN|,/g,"")};this.rmasListStatic.push(t)}this.rmasList=this.rmasListStatic.concat(n),m="PFAAWBR500",g="PFAAWBR500.xsd";var T="10150",v="10050",U=(b="10100","10151");N="Request For Payment due to Temporary Loss of Employment",y="10021";let c=this.helperService.getTimeStamp();A=this.datePipes.transform(c,"dd-MMM-yyyy")}else if(p===d.e){let t="Male"==s.sex?1:0,a=new Date(this.datePipes.transform(s.dateOfExit,"yyyy-MM-dd")),i=new Date(this.datePipes.transform(s.deathDate,"yyyy-MM-dd"));if(a.getTime()>i.getTime())var M=this.datePipes.transform(s.deathDate,"dd-MMM-yyyy");else M=this.datePipes.transform(s.dateOfExit,"dd-MMM-yyyy");let n=this.datePipes.transform(s.deathDate,"dd-MMM-yyyy"),o=this.datePipes.transform(s.adminLetterDate,"dd-MMM-yyyy"),c=this.taskList.reduce((e,t)=>e+Number(t.investIncome.replace(/NGN|,/g,"")),0),l=Number(r)-Number(c),h=this.helperService.formatNaira(l),d=Number(h.replace(/\u20a6|,/g,"")),p=this.helperService.formatNaira(c),u=Number(p.replace(/\u20a6|,/g,"")),S=s.surname+" "+s.firstName+" "+s.otherNames;var E=[{"serial-no":"1",name:S.replace(/[^a-zA-Z0-9]/g," "),"pin-dba":s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),gender:t,"employer-code":s.lastEmployerCode,"retirement-date":M,"death-date":n,"administration-letter-issuing-authority":s.adminLetterAuth.replace(/[^a-zA-Z0-9]/g," "),"administration-letter-date":o,"administration-letter-named-administrator-nok":s.namedAdminNOK.replace(/[^a-zA-Z0-9]/g," "),"life-insurance-proceed":s.lifeInsurance,"accured-right":"0.00",contributions:"0.00","investment-income":"0.00","total-rsa-balance":"0.00",remark:""},{"serial-no":"T9999",name:S.replace(/[^a-zA-Z0-9]/g," "),"pin-dba":s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),gender:t,"employer-code":s.lastEmployerCode,"retirement-date":M,"death-date":n,"administration-letter-issuing-authority":s.adminLetterAuth.replace(/[^a-zA-Z0-9]/g," "),"administration-letter-date":o,"administration-letter-named-administrator-nok":s.namedAdminNOK.replace(/[^a-zA-Z0-9]/g," "),"life-insurance-proceed":s.lifeInsurance,"accured-right":"0.00",contributions:"0.00","investment-income":"0.00","total-rsa-balance":"0.00",remark:""}];let T=[{"serial-no":"T9999",name:S.replace(/[^a-zA-Z0-9]/g," "),"pin-dba":s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),gender:t,"employer-code":s.lastEmployerCode,"retirement-date":M,"death-date":n,"administration-letter-issuing-authority":s.adminLetterAuth.replace(/[^a-zA-Z0-9]/g," "),"administration-letter-date":o,"administration-letter-named-administrator-nok":s.namedAdminNOK.replace(/[^a-zA-Z0-9]/g," "),"life-insurance-proceed":s.lifeInsurance,"accured-right":"0.00",contributions:d,"investment-income":u,"total-rsa-balance":r,remark:""}];for(let r=0;r<e.length;r++){let t="Male"==e[r].sex?1:0,a=new Date(this.datePipes.transform(e[r].dateOfExit,"yyyy-MM-dd")),i=new Date(this.datePipes.transform(e[r].deathDate,"yyyy-MM-dd"));a.getTime()>i.getTime()&&(e[r].dateOfExit=e[r].deathDate);let n=Number(e[r].netAmount.replace(/NGN|,/g,""))-Number(e[r].investIncome.replace(/NGN|,/g,"")),o=this.helperService.formatNaira(n).replace(/\u20a6|,/g,""),s={"serial-no":e[r].serialNo,name:(e[r].surname+" "+e[r].firstName+" "+e[r].otherNames).replace(/[^a-zA-Z0-9]/g," "),"pin-dba":e[r].rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),gender:t,"employer-code":e[r].lastEmployerCode,"retirement-date":this.datePipes.transform(e[r].dateOfExit,"dd-MMM-yyyy"),"death-date":this.datePipes.transform(e[r].deathDate,"dd-MMM-yyyy"),"administration-letter-issuing-authority":e[r].adminLetterAuth.replace(/[^a-zA-Z0-9]/g," "),"administration-letter-date":this.datePipes.transform(e[r].adminLetterDate,"dd-MMM-yyyy"),"administration-letter-named-administrator-nok":e[r].namedAdminNOK.replace(/[^a-zA-Z0-9]/g," "),"life-insurance-proceed":e[r].lifeInsurance.replace(/NGN|,/g,""),"accured-right":"0.00",contributions:o,"investment-income":e[r].investIncome.replace(/NGN|,/g,""),"total-rsa-balance":e[r].netAmount.replace(/NGN|,/g,""),remark:e[r].remarksQ8R8};this.rmasListStatic.push(s)}this.rmasList=this.rmasListStatic.concat(T),m="PFAAWBR600",g="PFAAWBR600.xsd",b="20100",f="20101",N="Request For Payment of Death Benefits",y="10021";let v=this.helperService.getTimeStamp();A=this.datePipes.transform(v,"dd-MMM-yyyy")}else if(p===d.i){let t=this.datePipes.transform(s.dateOfExit,"dd-MMM-yyyy"),a=this.taskList.reduce((e,t)=>e+Number(t.netAmount.replace(/NGN|,/g,"")),0),i=[{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,"retirement-date":t,"enbloc-payment":a}];var C=[{"serial-no":"1",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,"retirement-date":t,"enbloc-payment":s.netAmount.replace(/NGN|,/g,"")},{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,"retirement-date":t,"enbloc-payment":a}];for(let r=0;r<e.length;r++){let t={"serial-no":e[r].serialNo,pin:e[r].rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":e[r].lastEmployerCode,"retirement-date":this.datePipes.transform(e[r].dateOfExit,"dd-MMM-yyyy"),"enbloc-payment":e[r].netAmount.replace(/NGN|,/g,"")};this.rmasListStatic.push(t)}this.rmasList=this.rmasListStatic.concat(i),m="PFAAWBR300",g="PFAAWBR300.xsd",T="10151",U="10150";var L="20100";b="10050",v="20101",N="Request For Payment of Pre Act Benefits",y="10021";let n=this.helperService.getTimeStamp();A=this.datePipes.transform(n,"dd-MMM-yyyy")}else if(p===d.j){let t="Male"==s.sex?1:0,a=this.datePipes.transform(s.dateOfExit,"dd-MMM-yyyy"),i=this.datePipes.transform(s.dateofBirth,"dd-MMM-yyyy"),n=(this.taskList.reduce((e,t)=>e+Number(t.accuredRight),0),this.taskList.reduce((e,t)=>e+Number(t.emolumentTotal),0)),r=this.taskList.reduce((e,t)=>e+Number(t.requestedAmount.replace(/NGN|,/g,"")),0),o=this.taskList.reduce((e,t)=>e+Number(t.recommendLupsum.replace(/NGN|,/g,"")),0),c=this.taskList.reduce((e,t)=>e+Number(t.monthlyTotal.replace(/NGN|,/g,"")),0),h=[{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,"birth-date":i,"retirement-date":a,"retirement-age":s.retirementAge,gender:t,"retirement-ground":1,"annual-total-emolument":this.helperService.formatNaira(n).replace(/\u20a6|,/g,""),"accrued-right":"0.00","rsa-balance":this.helperService.formatNaira(r).replace(/\u20a6|,/g,""),"recommended-lumpsum":this.helperService.formatNaira(o).replace(/\u20a6|,/g,""),"monthly-programed-drawndown":this.helperService.formatNaira(c).replace(/\u20a6|,/g,"")}];var P=[{"serial-no":"1",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,"birth-date":i,"retirement-date":a,"retirement-age":s.retirementAge,gender:t,"retirement-ground":1,"annual-total-emolument":l,"accrued-right":s.accruedRight,"rsa-balance":s.requestedAmount.replace(/NGN|,/g,""),"recommended-lumpsum":s.recommendLupsum.replace(/NGN|,/g,""),"monthly-programed-drawndown":s.monthlyTotal.replace(/NGN|,/g,"")},{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,"birth-date":i,"retirement-date":a,"retirement-age":s.retirementAge,gender:t,"retirement-ground":1,"annual-total-emolument":this.helperService.formatNaira(n).replace(/\u20a6|,/g,""),"accrued-right":"0.00","rsa-balance":this.helperService.formatNaira(r).replace(/\u20a6|,/g,""),"recommended-lumpsum":this.helperService.formatNaira(o).replace(/\u20a6|,/g,""),"monthly-programed-drawndown":this.helperService.formatNaira(c).replace(/\u20a6|,/g,"")}];for(let s=0;s<e.length;s++){let t="Male"==e[s].sex?1:0,a=e[s].sector.toUpperCase();if("NaN"===this.helperService.formatNaira(e[s].accruedRight.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[s].accruedRight="0.00"),"NaN"===this.helperService.formatNaira(e[s].basic.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[s].basic="0.00"),"NaN"===this.helperService.formatNaira(e[s].housing.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[s].housing="0.00"),"NaN"===this.helperService.formatNaira(e[s].transport.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[s].transport="0.00"),"NaN"===this.helperService.formatNaira(e[s].consolSalary.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[s].consolSalary="0.00"),"PRIVATE"===a)var O=Number(e[s].basic.replace(/NGN|,/g,""))+Number(e[s].housing.replace(/NGN|,/g,""))+Number(e[s].transport.replace(/NGN|,/g,""));else O=Number(e[s].consolSalary.replace(/NGN|,/g,""))/2;let i=12*Number(O),n={"serial-no":e[s].serialNo,pin:e[s].rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":e[s].lastEmployerCode,"birth-date":this.datePipes.transform(e[s].dateofBirth,"dd-MMM-yyyy"),"retirement-date":this.datePipes.transform(e[s].dateOfExit,"dd-MMM-yyyy"),"retirement-age":e[s].retirementAge,gender:t,"retirement-ground":1,"annual-total-emolument":this.helperService.formatNaira(i).replace(/\u20a6|,/g,""),"accrued-right":e[s].accruedRight,"rsa-balance":e[s].requestedAmount.replace(/NGN|,/g,""),"recommended-lumpsum":e[s].recommendLupsum.replace(/NGN|,/g,""),"monthly-programed-drawndown":e[s].monthlyTotal.replace(/NGN|,/g,"")};this.rmasListStatic.push(n)}this.rmasList=this.rmasListStatic.concat(h),m="PFAAWBR100",g="PFAAWBR100.xsd",b="20100",f="20101",N="Request For Approval to Retirement Benefits",y="10021";let d=this.helperService.getTimeStamp();A=this.datePipes.transform(d,"dd-MMM-yyyy")}else if(p===d.c){let t=this.datePipes.transform(s.dateOfExit,"dd-MMM-yyyy"),a=this.datePipes.transform(s.dateofBirth,"dd-MMM-yyyy"),i=this.taskList.reduce((e,t)=>e+Number(t.addPremium.replace(/NGN|,/g,"")),0),n=this.taskList.reduce((e,t)=>e+Number(t.emolumentTotal),0),r=this.taskList.reduce((e,t)=>e+Number(t.requestedAmount.replace(/NGN|,/g,"")),0),o=this.taskList.reduce((e,t)=>e+Number(t.recommendLupsum.replace(/NGN|,/g,"")),0),c=this.taskList.reduce((e,t)=>e+Number(t.monthlyAnnuity.replace(/NGN|,/g,"")),0),h=this.helperService.getTimeStamp(),d=[{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,"birth-date":a,"retirement-date":t,"insurance-company-name":s.insuranceCoy,"annuity-commencement-date":this.datePipes.transform(h,"dd-MMM-yyyy"),"annual-total-emolument":this.helperService.formatNaira(n).replace(/\u20a6|,/g,""),"rsa-balance":this.helperService.formatNaira(r).replace(/\u20a6|,/g,""),premium:this.helperService.formatNaira(i).replace(/\u20a6|,/g,""),lumpsum:this.helperService.formatNaira(o).replace(/\u20a6|,/g,""),"monthly-annuity":this.helperService.formatNaira(c).replace(/\u20a6|,/g,"")}];var I=[{"serial-no":"1",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,"birth-date":a,"retirement-date":t,"insurance-company-name":s.insuranceCoy,"annuity-commencement-date":this.datePipes.transform(h,"dd-MMM-yyyy"),"annual-total-emolument":l,"rsa-balance":s.requestedAmount.replace(/NGN|,/g,""),premium:s.addPremium.replace(/NGN|,/g,""),lumpsum:s.recommendLupsum.replace(/NGN|,/g,""),"monthly-annuity":s.monthlyAnnuity.replace(/NGN|,/g,"")},{"serial-no":"T9999",pin:s.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":s.lastEmployerCode,"birth-date":a,"retirement-date":t,"insurance-company-name":s.insuranceCoy,"annuity-commencement-date":this.datePipes.transform(h,"dd-MMM-yyyy"),"annual-total-emolument":this.helperService.formatNaira(n).replace(/\u20a6|,/g,""),"rsa-balance":this.helperService.formatNaira(r).replace(/\u20a6|,/g,""),premium:this.helperService.formatNaira(i).replace(/\u20a6|,/g,""),lumpsum:this.helperService.formatNaira(o).replace(/\u20a6|,/g,""),"monthly-annuity":this.helperService.formatNaira(c).replace(/\u20a6|,/g,"")}];for(let s=0;s<e.length;s++){null!==e[s].dateOfInflow&&""!==e[s].dateOfInflow||(e[s].dateOfInflow=h),"NaN"===this.helperService.formatNaira(e[s].basic.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[s].basic="0.00"),"NaN"===this.helperService.formatNaira(e[s].housing.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[s].housing="0.00"),"NaN"===this.helperService.formatNaira(e[s].transport.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[s].transport="0.00"),"NaN"===this.helperService.formatNaira(e[s].consolSalary.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[s].consolSalary="0.00"),O="PRIVATE"===e[s].sector.toUpperCase()?Number(e[s].basic.replace(/NGN|,/g,""))+Number(e[s].housing.replace(/NGN|,/g,""))+Number(e[s].transport.replace(/NGN|,/g,"")):Number(e[s].consolSalary.replace(/NGN|,/g,""))/2;let t=12*Number(O),a={"serial-no":e[s].serialNo,pin:e[s].rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-code":e[s].lastEmployerCode,"birth-date":this.datePipes.transform(e[s].dateofBirth,"dd-MMM-yyyy"),"retirement-date":this.datePipes.transform(e[s].dateOfExit,"dd-MMM-yyyy"),"insurance-company-name":e[s].insuranceCoy,"annuity-commencement-date":this.datePipes.transform(e[s].dateOfInflow,"dd-MMM-yyyy"),"annual-total-emolument":this.helperService.formatNaira(t).replace(/\u20a6|,/g,""),"rsa-balance":e[s].requestedAmount.replace(/NGN|,/g,""),premium:e[s].addPremium.replace(/NGN|,/g,""),lumpsum:e[s].recommendLupsum.replace(/NGN|,/g,""),"monthly-annuity":e[s].monthlyAnnuity.replace(/NGN|,/g,"")};this.rmasListStatic.push(a)}this.rmasList=this.rmasListStatic.concat(d),m="PFAAWBR700",g="PFAAWBR700.xsd",b="20100",f="20101",N="Request For Withdrawal by Annuity",y="10021",A=this.datePipes.transform(h,"dd-MMM-yyyy")}if(p===d.k){var R=h.parse("return",{"@":{"xmlns:rmas":"http://www.pencom.gov.ng/2011/XMLSchema/datatype","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:noNamespaceSchemaLocation":g},header:{"return-code":m,"return-desc":N,"as-at-date":A,"operator-code":y},body:{scheme:[{code:b,data:this.rmasList},{code:v,data:S},{code:T,data:S},{code:U,data:S}]}},{declaration:{encoding:"utf-8"}});console.log(R)}else p===d.e?(R=h.parse("return",{"@":{"xmlns:rmas":"http://www.pencom.gov.ng/2011/XMLSchema/datatype","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:noNamespaceSchemaLocation":g},header:{"return-code":m,"return-desc":N,"as-at-date":A,"operator-code":y},body:{scheme:[{code:f,data:E},{code:b,data:this.rmasList}]}},{declaration:{encoding:"utf-8"}}),console.log(R)):p===d.g?(R=h.parse("return",{"@":{"xmlns:rmas":"http://www.pencom.gov.ng/2011/XMLSchema/datatype","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:noNamespaceSchemaLocation":g},header:{"return-code":m,"return-desc":N,"as-at-date":A,"operator-code":y},body:{scheme:[{code:f,data:u},{code:b,data:this.rmasList}]}},{declaration:{encoding:"utf-8"}}),console.log(R)):p===d.i?(R=h.parse("return",{"@":{"xmlns:rmas":"http://www.pencom.gov.ng/2011/XMLSchema/datatype","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:noNamespaceSchemaLocation":g},header:{"return-code":m,"return-desc":N,"as-at-date":A,"operator-code":y},body:{scheme:[{code:b,data:this.rmasList},{code:v,data:C},{code:T,data:C},{code:U,data:C},{code:L,data:C},{code:L,data:C}]}},{declaration:{encoding:"utf-8"}}),console.log(R)):p===d.j?(R=h.parse("return",{"@":{"xmlns:rmas":"http://www.pencom.gov.ng/2011/XMLSchema/datatype","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:noNamespaceSchemaLocation":g},header:{"return-code":m,"return-desc":N,"as-at-date":A,"operator-code":y},body:{scheme:[{code:b,data:this.rmasList},{code:f,data:P}]}},{declaration:{encoding:"utf-8"}}),console.log(R),this.getAllowance()):p===d.c&&(R=h.parse("return",{"@":{"xmlns:rmas":"http://www.pencom.gov.ng/2011/XMLSchema/datatype","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:noNamespaceSchemaLocation":g},header:{"return-code":m,"return-desc":N,"as-at-date":A,"operator-code":y},body:{scheme:[{code:b,data:this.rmasList},{code:f,data:I}]}},{declaration:{encoding:"utf-8"}}),console.log(R),this.getAllowance());return this.service.saveAsFile(R,m+".xml",'text/xml;encoding="utf-8"')}getAllowance(){let e=this.taskList;for(let h=0;h<e.length;h++){e[h].serialNo=h+1;let t=e[h].sector.toUpperCase();e[h].monthlyTotalALW="PRIVATE"===t||"PRIVATE"!==t&&(Number(e[h].basic.replace(/NGN|,/g,""))>0||Number(e[h].housing.replace(/NGN|,/g,""))>0||Number(e[h].transport.replace(/NGN|,/g,""))>0)?Number(e[h].basic.replace(/NGN|,/g,""))+Number(e[h].housing.replace(/NGN|,/g,""))+Number(e[h].transport.replace(/NGN|,/g,"")):Number(e[h].consolSalary.replace(/NGN|,/g,""))/2,e[h].totalMonthlyTotalALW=12*Number(e[h].monthlyTotalALW),"NaN"===this.helperService.formatNaira(e[h].basic.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[h].basic="0.00"),"NaN"===this.helperService.formatNaira(e[h].housing.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[h].housing="0.00"),"NaN"===this.helperService.formatNaira(e[h].transport.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[h].transport="0.00"),"NaN"===this.helperService.formatNaira(e[h].utility.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[h].utility="0.00"),"NaN"===this.helperService.formatNaira(e[h].consolAllowance.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[h].consolAllowance="0.00"),"NaN"===this.helperService.formatNaira(e[h].consolSalary.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[h].consolSalary="0.00")}let t=this.penReport.applicationType;const a=e[e.length-1];let i=e.reduce((e,t)=>e+Number(t.basic),0),n=e.reduce((e,t)=>e+Number(t.housing.replace(/NGN|,/g,"")),0),r=e.reduce((e,t)=>e+Number(t.transport.replace(/NGN|,/g,"")),0),o=e.reduce((e,t)=>e+Number(t.utility.replace(/NGN|,/g,"")),0),s=e.reduce((e,t)=>e+Number(t.consolAllowance.replace(/NGN|,/g,"")),0),c=e.reduce((e,t)=>e+Number(t.consolSalary.replace(/NGN|,/g,"")),0);if("NaN"===this.helperService.formatNaira(a.basic.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(a.basic="0.00"),"NaN"===this.helperService.formatNaira(a.housing.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(a.housing="0.00"),"NaN"===this.helperService.formatNaira(a.transport.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(a.transport="0.00"),"PRIVATE"===a.sector.toUpperCase())var l=Number(a.basic.replace(/NGN|,/g,""))+Number(a.housing.replace(/NGN|,/g,""))+Number(a.transport.replace(/NGN|,/g,""));else l=Number(a.consolSalary.replace(/NGN|,/g,""))/2;var p=12*Number(l);let u=e.reduce((e,t)=>e+Number(t.monthlyTotalALW),0),m=e.reduce((e,t)=>e+Number(t.totalMonthlyTotalALW),0);for(let h=0;h<e.length;h++){let t=e[h].sector.toUpperCase();if("PRIVATE"===t||"PRIVATE"!==t&&(Number(e[h].basic.replace(/NGN|,/g,""))>0||Number(e[h].housing.replace(/NGN|,/g,""))>0||Number(e[h].transport.replace(/NGN|,/g,""))>0))var g=Number(e[h].basic.replace(/NGN|,/g,""))+Number(e[h].housing.replace(/NGN|,/g,""))+Number(e[h].transport.replace(/NGN|,/g,"")),b=this.helperService.formatNaira(g).replace(/\u20a6|,/g,"");else g=Number(e[h].consolSalary.replace(/NGN|,/g,""))/2,b=this.helperService.formatNaira(g).replace(/\u20a6|,/g,"");var f=12*Number(b),N=this.helperService.formatNaira(f).replace(/\u20a6|,/g,"");let a={"serial-no":e[h].serialNo,pin:e[h].rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-name":e[h].lastEmployerCode,"basic-salary":e[h].basic.replace(/NGN|,/g,""),"housing-rent":e[h].housing.replace(/NGN|,/g,""),transport:e[h].transport.replace(/NGN|,/g,""),utility:e[h].utility.replace(/NGN|,/g,""),"consolidated-allowance":e[h].consolAllowance.replace(/NGN|,/g,""),"consolidated-salary":e[h].consolSalary.replace(/NGN|,/g,""),"monthly-total":b,"annual-total-emolument-adjusted":N};this.rmasList2.push(a)}var y=[{"serial-no":"T9999",pin:a.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-name":a.lastEmployerCode,"basic-salary":this.helperService.formatNaira(i).replace(/\u20a6|,/g,""),"housing-rent":this.helperService.formatNaira(n).replace(/\u20a6|,/g,""),transport:this.helperService.formatNaira(r).replace(/\u20a6|,/g,""),utility:this.helperService.formatNaira(o).replace(/\u20a6|,/g,""),"consolidated-allowance":this.helperService.formatNaira(s).replace(/\u20a6|,/g,""),"consolidated-salary":this.helperService.formatNaira(c).replace(/\u20a6|,/g,""),"monthly-total":this.helperService.formatNaira(u).replace(/\u20a6|,/g,""),"annual-total-emolument-adjusted":this.helperService.formatNaira(m).replace(/\u20a6|,/g,"")}];this.rmasList2=this.rmasList2.concat(y);var A=[{"serial-no":"1",pin:a.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-name":a.lastEmployerCode,"basic-salary":a.basic.replace(/NGN|,/g,""),"housing-rent":a.housing.replace(/NGN|,/g,""),transport:a.transport.replace(/NGN|,/g,""),utility:a.utility.replace(/NGN|,/g,""),"consolidated-allowance":a.consolAllowance.replace(/NGN|,/g,""),"consolidated-salary":a.consolSalary.replace(/NGN|,/g,""),"monthly-total":l,"annual-total-emolument-adjusted":p},{"serial-no":"T9999",pin:a.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),"employer-name":a.lastEmployerCode,"basic-salary":this.helperService.formatNaira(i).replace(/\u20a6|,/g,""),"housing-rent":this.helperService.formatNaira(n).replace(/\u20a6|,/g,""),transport:this.helperService.formatNaira(r).replace(/\u20a6|,/g,""),utility:this.helperService.formatNaira(o).replace(/\u20a6|,/g,""),"consolidated-allowance":this.helperService.formatNaira(s).replace(/\u20a6|,/g,""),"consolidated-salary":this.helperService.formatNaira(c).replace(/\u20a6|,/g,""),"monthly-total":this.helperService.formatNaira(u).replace(/\u20a6|,/g,""),"annual-total-emolument-adjusted":this.helperService.formatNaira(m).replace(/\u20a6|,/g,"")}];if(t===d.j){var S="PFAAWBR101",T="PFAAWBR101.xsd",v="20100",U="Breakdown of Annual Total Emoluments for Retirement Benefits",M="10021";let e=this.helperService.getTimeStamp();var E=this.datePipes.transform(e,"dd-MMM-yyyy")}if(t===d.c){S="PFAAWBR701",T="PFAAWBR701.xsd",v="20100",U="Breakdown of Annual Total Emoluments for Withdrawal by Annuity",M="10021";let e=this.helperService.getTimeStamp();E=this.datePipes.transform(e,"dd-MMM-yyyy")}var C=h.parse("return",{"@":{"xmlns:rmas":"http://www.pencom.gov.ng/2011/XMLSchema/datatype","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:noNamespaceSchemaLocation":T},header:{"return-code":S,"return-desc":U,"as-at-date":E,"operator-code":M},body:{scheme:[{code:v,data:this.rmasList2},{code:"20101",data:A}]}},{declaration:{encoding:"utf-8"}});return console.log(C),this.service.saveAsFile(C,S+".xml",'text/xml;encoding="utf-8"')}exportRMASToExcel(){for(let r=0;r<this.taskList.length;r++){this.taskList[r].serialNo=r+1,this.taskList[r].sex="Male"==this.taskList[r].sex?1:0;let e=Number(this.taskList[r].netAmount.replace(/NGN|,/g,""))-Number(this.taskList[r].investIncome.replace(/NGN|,/g,"")),t=this.helperService.formatNaira(e).replace(/\u20a6|,/g,"");this.taskList[r].contribute=t}let e=this.penReport.applicationType;const t=[];if(e===d.k){var a="PFAAWBR500";const e={data:[{A:"RSA Data"},{A:"serial-no",B:"pin",C:"employer-code",D:"gender",E:"birth-date",F:"disengagement-date",G:"rsa-balance",H:"twentyfive-percent-rsa-balance"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),C:t.lastEmployerCode,D:t.sex,E:this.datePipes.transform(t.dateofBirth,"dd-MMM-yyyy"),F:this.datePipes.transform(t.dateOfExit,"dd-MMM-yyyy"),G:4*Number(t.netAmount.replace(/NGN|,/g,"")),H:t.netAmount.replace(/NGN|,/g,"")})}),t.push(e)}else if(e===d.g){a="PFAAWBR400";const e={data:[{A:"RSA Data"},{A:"serial-no",B:"pin",C:"employer-code",D:"nationality",E:"gender",F:"birth-date",G:"retirement-date",H:"reason-for-payment",I:"rsa-balance",J:"enbloc-payment"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),C:t.lastEmployerCode,D:"ng",E:t.sex,F:this.datePipes.transform(t.dateofBirth,"dd-MMM-yyyy"),G:this.datePipes.transform(t.dateOfExit,"dd-MMM-yyyy"),H:3,I:t.netAmount.replace(/NGN|,/g,""),J:t.netAmount.replace(/NGN|,/g,"")})}),t.push(e)}else if(e===d.e){a="PFAAWBR600";let e=this.taskList;for(let t=0;t<e.length;t++){let a=new Date(this.datePipes.transform(e[t].dateOfExit,"yyyy-MM-dd")),i=new Date(this.datePipes.transform(e[t].deathDate,"yyyy-MM-dd"));a.getTime()>i.getTime()&&(e[t].dateOfExit=e[t].deathDate);let n=Number(e[t].netAmount.replace(/NGN|,/g,""))-Number(e[t].investIncome.replace(/NGN|,/g,""));e[t].cntrAmot=this.helperService.formatNaira(n).replace(/\u20a6|,/g,"")}const i={data:[{A:"RSA Data"},{A:"serial-no",B:"name",C:"pin-dba",D:"gender",E:"employer-code",F:"retirement-date",G:"death-date",H:"administration-letter-issuing-authority",I:"administration-letter-date",J:"administration-letter-named-administrator-nok",K:"life-insurance-proceed",L:"accured-right",M:"contributions",N:"investment-income",O:"total-rsa-balance",P:"remark"}],skipHeader:!0};e.forEach(e=>{i.data.push({A:e.serialNo,B:(e.surname+" "+e.firstName+" "+e.otherNames).replace(/[^a-zA-Z0-9]/g," "),C:e.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),D:e.sex,E:e.lastEmployerCode,F:this.datePipes.transform(e.dateOfExit,"dd-MMM-yyyy"),G:this.datePipes.transform(e.deathDate,"dd-MMM-yyyy"),H:e.adminLetterAuth.replace(/[^a-zA-Z0-9]/g," "),I:this.datePipes.transform(e.adminLetterDate,"dd-MMM-yyyy"),J:e.namedAdminNOK.replace(/[^a-zA-Z0-9]/g," "),K:e.lifeInsurance,L:0,M:e.cntrAmot,N:e.investIncome,O:e.netAmount.replace(/NGN|,/g,""),P:e.remarksQ8R8})}),t.push(i)}else if(e===d.i){a="PFAAWBR300";const e={data:[{A:"RSA Data"},{A:"serial-no",B:"pin",C:"employer-code",D:"retirement-date",E:"enbloc-payment"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),C:t.lastEmployerCode,D:this.datePipes.transform(t.dateOfExit,"dd-MMM-yyyy"),E:t.netAmount.replace(/NGN|,/g,"")})}),t.push(e)}else if(e===d.c){a="PFAAWBR700";var i="PFAAWBR701";let e=this.taskList;for(let t=0;t<e.length;t++){let a=e[t].sector.toUpperCase();if(null!==e[t].dateOfInflow&&""!==e[t].dateOfInflow||(e[t].dateOfInflow=this.helperService.getTimeStamp()),"NaN"===this.helperService.formatNaira(e[t].accruedRight.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].accruedRight="0.00"),"NaN"===this.helperService.formatNaira(e[t].basic.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].basic="0.00"),"NaN"===this.helperService.formatNaira(e[t].housing.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].housing="0.00"),"NaN"===this.helperService.formatNaira(e[t].transport.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].transport="0.00"),"NaN"===this.helperService.formatNaira(e[t].consolSalary.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].consolSalary="0.00"),"NaN"===this.helperService.formatNaira(e[t].utility.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].utility="0.00"),"NaN"===this.helperService.formatNaira(e[t].consolAllowance.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].consolAllowance="0.00"),"PRIVATE"===a)var n=Number(e[t].basic.replace(/NGN|,/g,""))+Number(e[t].housing.replace(/NGN|,/g,""))+Number(e[t].transport.replace(/NGN|,/g,""));else n=Number(e[t].consolSalary.replace(/NGN|,/g,""))/2;let i=12*Number(n);e[t].montTotalAnul2=i}const r={data:[{A:"RSA Data"},{A:"serial-no",B:"pin",C:"employer-code",D:"birth-date",E:"retirement-date",F:"insurance-company-name",G:"annuity-commencement-date",H:"annual-total-emolument",I:"rsa-balance",J:"premium",K:"lumpsum",L:"monthly-annuity"}],skipHeader:!0};e.forEach(e=>{r.data.push({A:e.serialNo,B:e.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),C:e.lastEmployerCode,D:this.datePipes.transform(e.dateofBirth,"dd-MMM-yyyy"),E:this.datePipes.transform(e.dateOfExit,"dd-MMM-yyyy"),F:e.insuranceCoy,G:this.datePipes.transform(e.dateOfInflow,"dd-MMM-yyyy"),H:this.helperService.formatNaira(e.montTotalAnul2).replace(/\u20a6|,/g,""),I:e.requestedAmount.replace(/NGN|,/g,""),J:e.addPremium.replace(/NGN|,/g,""),K:e.recommendLupsum.replace(/NGN|,/g,""),L:e.monthlyAnnuity.replace(/NGN|,/g,"")})}),t.push(r),this.getAllowanceRMAStoExcel(e,i)}else if(e===d.j){a="PFAAWBR100",i="PFAAWBR101";let e=this.taskList;for(let t=0;t<e.length;t++){let a=e[t].sector.toUpperCase();null!==e[t].dateOfInflow&&""!==e[t].dateOfInflow||(e[t].dateOfInflow=this.helperService.getTimeStamp()),"NaN"===this.helperService.formatNaira(e[t].accruedRight.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].accruedRight="0.00"),"NaN"===this.helperService.formatNaira(e[t].basic.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].basic="0.00"),"NaN"===this.helperService.formatNaira(e[t].housing.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].housing="0.00"),"NaN"===this.helperService.formatNaira(e[t].transport.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].transport="0.00"),"NaN"===this.helperService.formatNaira(e[t].consolSalary.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].consolSalary="0.00"),"NaN"===this.helperService.formatNaira(e[t].utility.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].utility="0.00"),"NaN"===this.helperService.formatNaira(e[t].consolAllowance.replace(/NGN|,/g,"")).replace(/\u20a6|,/g,"")&&(e[t].consolAllowance="0.00"),n="PRIVATE"===a?Number(e[t].basic.replace(/NGN|,/g,""))+Number(e[t].housing.replace(/NGN|,/g,""))+Number(e[t].transport.replace(/NGN|,/g,"")):Number(e[t].consolSalary.replace(/NGN|,/g,""))/2;let i=12*Number(n);e[t].montTotalAnul2=i}const r={data:[{A:"RSA Data"},{A:"serial-no",B:"pin",C:"employer-code",D:"birth-date",E:"retirement-date",F:"retirement-age",G:"gender",H:"retirement-ground",I:"annual-total-emolument",J:"accrued-right",K:"rsa-balance",L:"recommended-lumpsum",M:"monthly-programed-drawndown"}],skipHeader:!0};this.taskList.forEach(e=>{r.data.push({A:e.serialNo,B:e.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),C:e.lastEmployerCode,D:this.datePipes.transform(e.dateofBirth,"dd-MMM-yyyy"),E:this.datePipes.transform(e.dateOfExit,"dd-MMM-yyyy"),F:e.retirementAge,G:e.sex,H:"1",I:this.helperService.formatNaira(e.montTotalAnul2).replace(/\u20a6|,/g,""),J:e.accruedRight,K:e.requestedAmount.replace(/NGN|,/g,""),L:e.recommendLupsum.replace(/NGN|,/g,""),M:e.monthlyTotal.replace(/NGN|,/g,"")})}),t.push(r),this.getAllowanceRMAStoExcel(e,i)}this.service.exportJsonToExcel(t,a)}getAllowanceRMAStoExcel(e,t){const a=[];for(let s=0;s<e.length;s++){let t=e[s].sector.toUpperCase();if("PRIVATE"===t||"PRIVATE"!==t&&(Number(e[s].basic.replace(/NGN|,/g,""))>0||Number(e[s].housing.replace(/NGN|,/g,""))>0||Number(e[s].transport.replace(/NGN|,/g,""))>0)){var i=Number(e[s].basic.replace(/NGN|,/g,""))+Number(e[s].housing.replace(/NGN|,/g,""))+Number(e[s].transport.replace(/NGN|,/g,"")),n=this.helperService.formatNaira(i).replace(/\u20a6|,/g,"");e[s].montTotal3=this.helperService.formatNaira(i).replace(/\u20a6|,/g,"")}else i=Number(e[s].consolSalary.replace(/NGN|,/g,""))/2,n=this.helperService.formatNaira(i).replace(/\u20a6|,/g,""),e[s].montTotal3=this.helperService.formatNaira(i).replace(/\u20a6|,/g,"");var r=12*Number(n);e[s].montTotalAnul3=this.helperService.formatNaira(r).replace(/\u20a6|,/g,"")}const o={data:[{A:"RSA Data"},{A:"serial-no",B:"pin",C:"employer-name",D:"basic-salary",E:"housing-rent",F:"transport",G:"utility",H:"consolidated-allowance",I:"consolidated-salary",J:"monthly-total",K:"annual-total-emolument-adjusted"}],skipHeader:!0};e.forEach(e=>{o.data.push({A:e.serialNo,B:e.rsapin.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),C:e.lastEmployerCode,D:e.basic,E:e.housing,F:e.transport,G:e.utility,H:e.consolAllowance.replace(/NGN|,/g,""),I:e.consolSalary.replace(/NGN|,/g,""),J:e.montTotal3,K:e.montTotalAnul3})}),a.push(o),this.service.exportJsonToExcel(a,t)}exportToExcel(){for(let a=0;a<this.taskList.length;a++)this.taskList[a].serialNo=a+1;let e=this.penReport.applicationType;const t=[];if(e===d.k){const e={data:[{A:"RSA Data"},{A:"S/N",B:"NAMES",C:"EX-EMPLOYER",D:"PFA",E:"PIN",F:"Date of Disengament",G:"Period Month",H:"Gender",I:"Date of Birth",J:"Age",K:"Reason",L:"RSA Balance",M:"Estimated 25% (N)",N:"Severance",O:"Statement",P:"Sector",Q:"Employer Code"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.surname+" "+t.firstName+" "+t.otherNames,C:t.lastEmployer,D:"STANBIC IBTC",E:t.rsapin,F:t.dateOfExit,G:t.monthsPeriod,H:t.sex,I:t.dateofBirth,J:t.retirementAge,K:t.modeOfExit,L:t.requestedAmount.replace(/NGN|,/g,""),M:t.netAmount.replace(/NGN|,/g,""),N:t.severanceLetter,O:t.accountStatement,P:t.sector,Q:t.lastEmployerCode})}),t.push(e)}else if(e===d.g||e===d.a){const e={data:[{A:"RSA Data"},{A:"S/N",B:"NAMES",C:"PIN",D:"PFA",E:"Age at Retirement",F:"Sex",G:"Date of Retirment",H:"Employer",I:"RSA Balance",J:"Date of Birth",K:"Reason",L:"Severance Letter",M:"Statment of Account",N:"Sector",O:"Employer Code"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.surname+" "+t.firstName+" "+t.otherNames,C:t.rsapin,D:t.pfa,E:t.retirementAge,F:t.sex,G:t.dateOfExit,H:t.lastEmployer,I:t.netAmount.replace(/NGN|,/g,""),J:t.dateofBirth,K:t.modeOfExit,L:t.severanceLetter,M:t.accountStatement,N:t.sector,O:t.lastEmployerCode})}),t.push(e)}else if(e==d.e){const e={data:[{A:"RSA Data"},{A:"S/N",B:"PIN",C:"NAMES",D:"GENDER",E:"EMPLOYER NAME",F:"EMPLOYER CODE",G:"DATE OF RETIREMENT",H:"DATE OF DEATH",I:"LETTER OF ADMINISTRATION ISSUING AUTHORITY",J:"DATE OF LETTER ADMINISTRATION",K:"NAMED ADMINISTRATOR/NOK",L:"TOTAL DEATH BENEFITS APPROVED ON RMAS (=N=)",M:"CUMULATIVE DEATH BENEFITS PAID WITHOUT COMMISSIONS APPROVAL(=N =)",N:"TOTAL RSA BALANCE (=N=)",O:"REMARK (WHERE Q8 AND R8 ARE NOT EQUAL)"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.surname+" "+t.firstName+" "+t.otherNames,C:t.rsapin,D:t.sex,E:t.lastEmployer,F:t.lastEmployerCode,G:t.dateOfExit,H:t.deathDate,I:t.adminLetterAuth,J:t.adminLetterDate,K:t.namedAdminNOK,L:t.netAmount.replace(/NGN|,/g,""),M:t.deathBenefitsPWCA,N:t.requestedAmount.replace(/NGN|,/g,""),O:t.remarksQ8R8})}),t.push(e)}else if(e===d.i){const e={data:[{A:"RSA Data"},{A:"S/N",B:"NAMES",C:"PIN",D:"EX-EMPLOYER",E:"PFA",F:"SEX",G:"DATE LEGACY PURCHASED",H:"AMOUNT PAYABLE",I:"SECTOR",J:"EMPLOYER CODE"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.surname+" "+t.firstName+" "+t.otherNames,C:t.rsapin,D:t.lastEmployer,E:t.pfa,F:t.sex,G:t.dateLegacyPurch,H:t.netAmount.replace(/NGN|,/g,""),I:t.sector,J:t.lastEmployerCode})}),t.push(e)}else if(e===d.f){const e={data:[{A:"RSA Data"},{A:"S/N",B:"NAMES",C:"PIN",D:"GENDER",E:"MDA",F:"PFA",G:"DATE OF RETIREMENT",H:"RSA BALANCE",I:"REASON FOR EXEMPTION"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.surname+" "+t.firstName+" "+t.otherNames,C:t.rsapin,D:t.SEX,E:t.employeeMDA,F:t.pfa,G:t.dateOfExit,H:t.requestedAmount.replace(/NGN|,/g,""),I:t.modeOfExit})}),t.push(e)}else if(e===d.c){const e={data:[{A:"RSA Data"},{A:"S/N",B:"NAMES",C:"PIN",D:"PFA",E:"AGE",F:"SEX",G:"EMPLOYER NAME",H:"SECTOR",I:"INSURANCE COMPANY",J:"OLD RSA BALANCE",K:"NEW RSA BALANCE",L:"Additional Remittance",M:"OLD LUMPSUM",N:"ADDITIONAL LUMPSUM",O:"ADDITIONAL PREMIUM",P:"ADDITIONAL ANNUITY",Q:"TOTAL ANNUITY",R:"EMPLOYER CODE"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.surname+" "+t.firstName+" "+t.otherNames,C:t.rsapin,D:t.pfa,E:t.retirementAge,F:t.sex,G:t.lastEmployer,H:t.sector,I:t.insuranceCoy,J:t.oldRAAmount,K:t.requestedAmount.replace(/NGN|,/g,""),L:t.addRemitance,M:t.oldLumpsum,N:t.addLumpsum,O:t.addPremium,P:t.addAnnuity,Q:t.netAmount.replace(/NGN|,/g,""),R:t.lastEmployerCode})}),t.push(e)}else if(e===d.j){const e={data:[{A:"RSA Data"},{A:"S/N",B:"PIN",C:"NAMES",D:"PFA",E:"EMPLOYER NAME",F:"EMPLOYER CODE",G:"AGE",H:"REQUEST DATE",I:"GENDER",J:"DATE OF BIRTH",K:"DATE OF RETIREMENT",L:"DATE OF INFLOW",M:"RSA BALANCE BEFORE INFLOW",N:"ADDITIONAL INFLOW",O:"CURRENT RSA BALANCE",P:"CURRENT PENSION",Q:"INITIAL ANNUAL SALARY APPROVED",R:"MINIMUM PENSION PAYOUT",S:"NEW PENSION",T:"AVAILABLE LUMPSUM",U:"MAXIMUM POSSIBLE PENSION",V:"NEGOTIATED LUMPSUM",W:"FREQUENCY OF PAYMENT"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.rsapin,C:t.surname+" "+t.firstName+" "+t.otherNames,D:t.pfa,E:t.lastEmployer,F:t.lastEmployerCode,G:t.retirementAge,H:t.createdDate,I:t.sex,J:t.dateofBirth,K:t.dateOfExit,L:t.dateOfInflow,M:t.oldRAAmount,N:t.addLumpsum,O:t.requestedAmount.replace(/NGN|,/g,""),P:t.netAmount.replace(/NGN|,/g,""),Q:t.annSalaryApproved,R:t.mmPensionPay,S:t.newPension,T:t.availLupsum,U:t.maxmPossbPension,V:t.negoLumpsum,W:t.freqcyPayment})}),t.push(e)}else if(e===d.l){const e={data:[{A:"RSA Data"},{A:"S/N",B:"NAMES",C:"PIN",D:"DATE OF EMPLOYMENT",E:"DATE OF BIRTH",F:"DATE OF RETIREMENT",G:"EMPLOYER NAME",H:"EMPLOYER CODE",I:"SECTOR",J:"VC CATEGORY",K:"DATE OF LAST WITHDRAWAL",L:"DATE OF CURRENT DEPOSIT",M:"TOTAL VC BALANCE (CONTINGENT VC BALANCE) (N)",N:"TENOR (IN MONTHS HELD)",O:"AVERAGE UNIT PRICE AT ENTRY (N)",P:"TOTAL UNITS CREATED AT ENTRY",Q:"TOTAL AMOUNT REQUESTED",R:"UNIT PRICE AT EXIT (N)",S:"NON TAXABLE AMOUNT (N)",T:"TAXABLE AMOUNT PAYABLE AT EXIT (N)",U:"INTEREST (P)",V:"TAX (Q)",W:"NET AMOUNT PAYABLE (R)",X:"REMARK"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.surname+" "+t.firstName+" "+t.otherNames,C:t.rsapin,D:t.fAppointmentDate,E:t.dateofBirth,F:t.retirementAge,G:t.lastEmployer,H:t.lastEmployerCode,I:t.sector,J:t.vcCategory,K:t.withdrawalDate,L:t.curDepositDate,M:t.oldRAAmount,N:t.tenorMonth,O:t.avgPriceEntry,P:t.unitEntry,Q:t.requestedAmount.replace(/NGN|,/g,""),R:t.unitPriceExit,S:t.ntaxAmount,T:t.taxableAmount,U:t.vcInterest,V:t.vcTax,W:t.netAmount.replace(/NGN|,/g,""),X:t.initiatorComment})}),t.push(e)}else if(e===d.d){const e={data:[{A:"RSA Data"},{A:"S/N",B:"FULL NAME OF DECEASED",C:"SEX",D:"PIN/DBA NO",E:"EMPLOYER CODE",F:"NAME OF EMPLOYER",G:"DATE OF DEATH",H:"DATE OF BIRTH",I:"DATE OF FIRST APPOINTMENT",J:"SALARY STRUCTURE AS AT JUNE, 2004",K:"GL AS AT JUNE, 2004",L:"STEP AS AT JUNE, 2004",M:"SALARY STRUCTURE AS AT JAN, 2007",N:"GL\xa0 AS\xa0 AT JAN, 2007",O:"STEP AS AT JAN. 2007",P:"SALARY STRUCTURE AS AT JULY, 2010",Q:"GL AS AT JULY, 2010",R:"STEP AS AT JULY, 2010",S:"SALARY STRUCTURE AS\xa0 AT DEC, 2013",T:"GL AS AT DEC, 2013",U:"STEP AS AT DEC 13",V:"SALARY STRUCTURE AS\xa0 AT DEC, 2017",W:"GL AS AT DEC, 2017",X:"STEP AS AT DEC 17",Y:"SALARY STRUCTURE AS AT PCURRENT YEAR",Z:"GL AS AT AS AT PCURRENT YEAR",AA:"STEP AS AT PCURRENT YEAR",AB:"SALARY STRUCTURE AS AT MONTH OF DEATH",AC:"GL AS AT AS AT MONTH OF DEATH",AD:"STEP AS AT MONTH OF DEATH"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.surname+" "+t.firstName+" "+t.otherNames,C:t.sex,D:t.rsapin,E:t.lastEmployerCode,F:t.lastEmployer,G:t.deathDate,H:t.dateofBirth,I:t.fAppointmentDate,J:"",K:"",L:"",M:"",N:"",O:"",P:"",Q:"",R:"",S:"",T:"",U:"",V:"",W:"",X:"",Y:"",Z:"",AA:"",AB:"",AC:"",AD:""})}),t.push(e)}this.service.exportJsonToExcel(t,e)}exportToCsv(){this.service.exportToCsv(this.taskList,"rsa-data",["workflowRequestID","applicationType","current_Approver","approval_Status"])}}return e.\u0275fac=function(t){return new(t||e)(m.Pb(g.a),m.Pb(b.a),m.Pb(i.e),m.Pb(c.c))},e.\u0275cmp=m.Jb({type:e,selectors:[["app-rsa-report"]],decls:39,vars:17,consts:[[4,"ngIf"],["novalidate","",3,"ngSubmit"],["submitForm","ngForm"],["class","row",4,"ngIf"],[1,"mb-3"],["type","button",1,"btn","btn-warning","mb-4",3,"click"],["class","btn btn-sm font-weight-bold btn-link",3,"click",4,"ngIf"],["class","table batch-table table-striped",4,"ngIf"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[3,"collectionSize","page","maxSize","rotate","ellipses","boundaryLinks","pageChange"],[1,"row"],[1,"col-4","gName"],["name","appType","required","","placeholder","d.ff",1,"form-control",3,"ngModel","ngModelChange","change"],["appType","ngModel"],["hidden","","value","","disabled","","selected",""],["color","danger"],["id","error",3,"hidden"],["appearance","fill"],["matInput","","required","","name","subMode","placeholder","Choose a date",3,"matDatepicker","max","ngModel","ngModelChange","dateInput"],["subMode","ngModel"],["matSuffix","",3,"for"],["color","primary"],["picker1",""],["name","subMode","required","","placeholder","d.ff",1,"form-control",3,"ngModel","ngModelChange","change"],["id","search","type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-sm","font-weight-bold","btn-link",3,"click"],[1,"table","batch-table","table-striped"],[3,"click"],[1,"btn","btn-success",3,"click"],["id","spacer"],[1,"btn","btn-warning",3,"click"]],template:function(e,t){if(1&e){const e=m.Vb();m.Fc(0,y,3,0,"div",0),m.Ub(1,"form",1,2),m.gc("ngSubmit",(function(){m.yc(e);const a=m.xc(2);return t.search(a)})),m.Fc(3,T,35,11,"div",3),m.Tb(),m.Ub(4,"div",4),m.Fc(5,v,3,0,"div",0),m.Ub(6,"div"),m.Ub(7,"button",5),m.gc("click",(function(){return t.updateEmpCode()})),m.Hc(8,"Update Emp Code "),m.Tb(),m.Tb(),m.Tb(),m.Fc(9,U,2,0,"button",6),m.Fc(10,M,2,0,"button",6),m.Fc(11,E,2,0,"button",6),m.Fc(12,C,2,0,"h4",0),m.Fc(13,I,20,2,"table",7),m.Ub(14,"table",8),m.Ub(15,"thead"),m.Ub(16,"tr"),m.Ub(17,"td"),m.Hc(18,"S/N"),m.Tb(),m.Ub(19,"td"),m.Hc(20,"Reference Code"),m.Tb(),m.Ub(21,"td"),m.Hc(22,"Application Name"),m.Tb(),m.Ub(23,"td"),m.Hc(24,"Mode of Submission"),m.Tb(),m.Ub(25,"td"),m.Hc(26,"Employer Code"),m.Tb(),m.Ub(27,"td"),m.Hc(28,"RSA Pin"),m.Tb(),m.Ub(29,"td"),m.Hc(30,"Status"),m.Tb(),m.Ub(31,"td"),m.Hc(32,"Request Date"),m.Tb(),m.Fc(33,R,2,0,"td",0),m.Tb(),m.Tb(),m.Ub(34,"tbody"),m.Fc(35,B,20,12,"tr",9),m.Tb(),m.Tb(),m.Ub(36,"ngb-pagination",10),m.gc("pageChange",(function(e){return t.page=e})),m.Tb(),m.Ub(37,"pre"),m.Hc(38),m.Tb()}2&e&&(m.qc("ngIf",t.isBMULead),m.Bb(3),m.qc("ngIf",t.isShowComm),m.Bb(2),m.qc("ngIf",t.isShowComm),m.Bb(4),m.qc("ngIf",t.isHardCopy),m.Bb(1),m.qc("ngIf",t.isRmas),m.Bb(1),m.qc("ngIf",t.isRmas),m.Bb(1),m.qc("ngIf",t.taskBatch.length>0),m.Bb(1),m.qc("ngIf",t.taskBatch.length>0),m.Bb(20),m.qc("ngIf",t.isShowComm),m.Bb(2),m.qc("ngForOf",t.taskList),m.Bb(1),m.qc("collectionSize",t.taskList.length)("page",t.page)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),m.Bb(2),m.Jc("Current page: ",t.page,""))},directives:[i.m,f.x,f.m,f.n,i.l,n.l,f.u,f.t,f.l,f.o,f.p,f.w,N.b,r.b,o.b,f.c,o.d,N.e,o.a],pipes:[i.e],styles:["h5[_ngcontent-%COMP%]{color:#fff;padding:4px;background-color:#0033a1;width:100%;text-align:center}#error[_ngcontent-%COMP%]{color:red}thead[_ngcontent-%COMP%]{color:#fff;padding:4px;background-color:#0033a1;width:100%}.row[_ngcontent-%COMP%]   .col.col-3[_ngcontent-%COMP%]{margin-top:20px}.gName[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}a[_ngcontent-%COMP%]{color:#0033a1!important}a[_ngcontent-%COMP%]:hover{text-decoration:underline!important}h4[_ngcontent-%COMP%]{margin-top:25px}.batch-table[_ngcontent-%COMP%]{margin-bottom:30px}#spacer[_ngcontent-%COMP%]{margin:2vh}td[_ngcontent-%COMP%]{text-align:center}#search[_ngcontent-%COMP%]{margin-bottom:5vh}#btn[_ngcontent-%COMP%]{color:#fff;background-color:#0033a1;margin-bottom:2vh}"]}),e})();function x(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function w(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",11),m.Ub(1,"label"),m.Hc(2,"Approvers"),m.Tb(),m.Ub(3,"select",12,13),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().reRoute.batchUserLogin=t}))("change",(function(t){return m.yc(e),m.kc().getUserName(t)})),m.Ub(5,"option",14),m.Hc(6,"Select Approver Name"),m.Tb(),m.Fc(7,x,2,1,"option",9),m.Tb(),m.Ub(8,"div",15),m.Ub(9,"p",16),m.Hc(10," Approver name is required "),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(4),t=m.kc();m.Bb(3),m.qc("ngModel",t.reRoute.batchUserLogin),m.Bb(4),m.qc("ngForOf",t.userList),m.Bb(2),m.qc("hidden",e.valid||!1===t.submitted)}}function _(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",17),m.Ub(1,"label"),m.Hc(2,"Comment"),m.Tb(),m.Ub(3,"textarea",18,19),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().reRoute.comment=t})),m.Tb(),m.Ub(5,"div",15),m.Ub(6,"p",16),m.Hc(7," Comment is required "),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(4),t=m.kc();m.Bb(3),m.qc("ngModel",t.reRoute.comment),m.Bb(3),m.qc("hidden",e.valid||!1===t.submitted)}}function F(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function H(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",11),m.Ub(1,"label"),m.Hc(2,"Re-route Option"),m.Tb(),m.Ub(3,"select",20,21),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().reRoute.reRouteOption=t}))("change",(function(t){return m.yc(e),m.kc().getRerouteOption(t)})),m.Ub(5,"option",14),m.Hc(6,"Select route Option"),m.Tb(),m.Fc(7,F,2,1,"option",9),m.Tb(),m.Ub(8,"div",15),m.Ub(9,"p",16),m.Hc(10," Re-route option is required "),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(4),t=m.kc();m.Bb(3),m.qc("ngModel",t.reRoute.reRouteOption),m.Bb(4),m.qc("ngForOf",t.routeOption),m.Bb(2),m.qc("hidden",e.valid||!1===t.submitted)}}function G(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function q(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",11),m.Ub(1,"label"),m.Hc(2,"First Signatory"),m.Tb(),m.Ub(3,"select",22,23),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().reRoute.batchUserLogin5=t}))("change",(function(t){return m.yc(e),m.kc().getFirstSignatory(t)})),m.Ub(5,"option",14),m.Hc(6,"Select Signatory"),m.Tb(),m.Fc(7,G,2,1,"option",9),m.Tb(),m.Ub(8,"div",15),m.Ub(9,"p",16),m.Hc(10," Signatory name is required "),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(4),t=m.kc();m.Bb(3),m.qc("ngModel",t.reRoute.batchUserLogin5),m.Bb(4),m.qc("ngForOf",t.signatoryUserList),m.Bb(2),m.qc("hidden",e.valid||!1===t.submitted)}}function j(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function V(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",11),m.Ub(1,"label"),m.Hc(2,"Secondary Signatory"),m.Tb(),m.Ub(3,"select",24,25),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().reRoute.batchUserLogin6=t}))("change",(function(t){return m.yc(e),m.kc().getSecondSignatory(t)})),m.Ub(5,"option",14),m.Hc(6,"Select Signatory"),m.Tb(),m.Fc(7,j,2,1,"option",9),m.Tb(),m.Ub(8,"div",15),m.Ub(9,"p",16),m.Hc(10," Signatory name is required "),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(4),t=m.kc();m.Bb(3),m.qc("ngModel",t.reRoute.batchUserLogin6),m.Bb(4),m.qc("ngForOf",t.signatoryList2),m.Bb(2),m.qc("hidden",e.valid||!1===t.submitted)}}function z(e,t){1&e&&(m.Ub(0,"h4"),m.Hc(1,"Re-route list"),m.Tb())}function K(e,t){if(1&e){const e=m.Vb();m.Ub(0,"td"),m.Ub(1,"button",28),m.gc("click",(function(){m.yc(e);const t=m.kc().index,a=m.kc(2);return a.removeToBatch(t,a.taskBatch[t])})),m.Hc(2,"Remove"),m.Tb(),m.Tb()}}function J(e,t){if(1&e){const e=m.Vb();m.Ub(0,"tr"),m.Ub(1,"td"),m.Hc(2),m.Tb(),m.Ub(3,"td"),m.Ub(4,"a",27),m.gc("click",(function(){m.yc(e);const a=t.$implicit;return m.kc(2).routeToPage(a.id)})),m.Hc(5),m.Tb(),m.Tb(),m.Ub(6,"td"),m.Hc(7),m.Tb(),m.Ub(8,"td"),m.Hc(9),m.Tb(),m.Ub(10,"td"),m.Hc(11),m.Tb(),m.Fc(12,K,3,0,"td",5),m.Tb()}if(2&e){const e=t.$implicit,a=t.index,i=m.kc(2);m.Bb(2),m.Ic(a+1),m.Bb(3),m.Ic(e.workflowRequestID),m.Bb(2),m.Ic(e.applicationType),m.Bb(2),m.Ic(e.rsapin),m.Bb(2),m.Ic(e.pencomApprovalNo),m.Bb(1),m.qc("ngIf",i.isBatch)}}function Q(e,t){if(1&e&&(m.Ub(0,"table",26),m.Ub(1,"thead"),m.Ub(2,"tr"),m.Ub(3,"td"),m.Hc(4,"S/N"),m.Tb(),m.Ub(5,"td"),m.Hc(6,"Reference Code"),m.Tb(),m.Ub(7,"td"),m.Hc(8,"Application Name"),m.Tb(),m.Ub(9,"td"),m.Hc(10,"RSA Pin"),m.Tb(),m.Ub(11,"td"),m.Hc(12,"Approval Serial No"),m.Tb(),m.Ub(13,"td"),m.Hc(14,"Actions"),m.Tb(),m.Tb(),m.Tb(),m.Ub(15,"tbody"),m.Fc(16,J,13,6,"tr",9),m.Tb(),m.Tb()),2&e){const e=m.kc();m.Bb(16),m.qc("ngForOf",e.taskBatch)}}function X(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",2),m.Ub(1,"div",29),m.Ub(2,"button",30),m.gc("click",(function(){return m.yc(e),m.kc().submit()})),m.Hc(3,"Submit"),m.Tb(),m.Tb(),m.Tb()}}function W(e,t){1&e&&(m.Ub(0,"td"),m.Hc(1,"First Signatory"),m.Tb())}function Y(e,t){1&e&&(m.Ub(0,"td"),m.Hc(1,"1st Sign. Date"),m.Tb())}function Z(e,t){1&e&&(m.Ub(0,"td"),m.Hc(1,"Second Signatory"),m.Tb())}function $(e,t){1&e&&(m.Ub(0,"td"),m.Hc(1,"2nd Sign. Date"),m.Tb())}function ee(e,t){1&e&&(m.Ub(0,"td"),m.Hc(1,"Check In"),m.Tb())}function te(e,t){1&e&&(m.Ub(0,"td"),m.Hc(1,"Actions"),m.Tb())}function ae(e,t){if(1&e&&(m.Ub(0,"td"),m.Hc(1),m.Tb()),2&e){const e=m.kc().$implicit;m.Bb(1),m.Ic(e.batchUserName1)}}function ie(e,t){if(1&e&&(m.Ub(0,"td"),m.Hc(1),m.lc(2,"date"),m.Tb()),2&e){const e=m.kc().$implicit;m.Bb(1),m.Ic(m.nc(2,1,e.signatory1Date,"dd/MM/yyyy"))}}function ne(e,t){if(1&e&&(m.Ub(0,"td"),m.Hc(1),m.Tb()),2&e){const e=m.kc().$implicit;m.Bb(1),m.Ic(e.batchUserName2)}}function re(e,t){if(1&e&&(m.Ub(0,"td"),m.Hc(1),m.lc(2,"date"),m.Tb()),2&e){const e=m.kc().$implicit;m.Bb(1),m.Ic(m.nc(2,1,e.signatory2Date,"dd/MM/yyyy"))}}function oe(e,t){if(1&e){const e=m.Vb();m.Ub(0,"td"),m.Ub(1,"button",31),m.gc("click",(function(){m.yc(e);const t=m.kc().index,a=m.kc();return a.moveToCheckIn(t,a.taskList[t])})),m.Hc(2,"Check-In"),m.Tb(),m.Tb()}}function se(e,t){if(1&e){const e=m.Vb();m.Ub(0,"td"),m.Qb(1,"span",32),m.Ub(2,"button",33),m.gc("click",(function(){m.yc(e);const t=m.kc().index,a=m.kc();return a.moveToBatch(t,a.taskList[t])})),m.Hc(3,"Re-route"),m.Tb(),m.Tb()}}function ce(e,t){if(1&e){const e=m.Vb();m.Ub(0,"tr"),m.Ub(1,"td"),m.Hc(2),m.Tb(),m.Ub(3,"td"),m.Ub(4,"a",27),m.gc("click",(function(){m.yc(e);const a=t.$implicit;return m.kc().routeToPage(a.id)})),m.Hc(5),m.Tb(),m.Tb(),m.Ub(6,"td"),m.Hc(7),m.Tb(),m.Fc(8,ae,2,1,"td",5),m.Fc(9,ie,3,4,"td",5),m.Fc(10,ne,2,1,"td",5),m.Fc(11,re,3,4,"td",5),m.Ub(12,"td"),m.Hc(13),m.Tb(),m.Ub(14,"td"),m.Hc(15),m.Tb(),m.Fc(16,oe,3,0,"td",5),m.Fc(17,se,4,0,"td",5),m.Tb()}if(2&e){const e=t.$implicit,a=t.index,i=m.kc();m.Bb(2),m.Ic(a+1),m.Bb(3),m.Ic(e.workflowRequestID),m.Bb(2),m.Ic(e.applicationType),m.Bb(1),m.qc("ngIf",i.isFundAcc),m.Bb(1),m.qc("ngIf",i.isFundAcc),m.Bb(1),m.qc("ngIf",i.isFundAcc),m.Bb(1),m.qc("ngIf",i.isFundAcc),m.Bb(2),m.Ic(e.pendingUserLogin),m.Bb(2),m.Ic(e.approval_Status),m.Bb(1),m.qc("ngIf",i.isCheckIn),m.Bb(1),m.qc("ngIf",i.isBatch)}}let le=(()=>{class e{constructor(e,t,a){this.service=e,this.helperService=t,this.router=a,this.submitted=!1,this.isBMUMaker=!1,this.isBatch=!1,this.isFaBltd=!1,this.isFundAcc=!1,this.isCheckIn=!0,this.applicationType=[],this.taskBatch=[],this.tashBatchReq=[],this.taskList=[],this.userList=[],this.groupList=[],this.checkItem=[],this.routeOption=[],this.signatoryUserList=[],this.signatoryList2=[],this.signatList2=[],this.page=1,this.pageSize=10,this.reRoute={applicationType:"",currentUserLogin:"",currentUserName:"",currentUserEmail:"",batchUserLogin:"",batchUserEmail:"",batchUserName:"",batchNo:0,teamLeadAmount:"",unitHeadAmount:"",headDeptAmount:"",edOpertnAmount:"",batchUserLogin4:"",groupName:"",userRole:"",comment:"",actionTime:null,reRouteOption:"",batchUserLogin1:"",batchUserLogin2:"",batchUserLogin5:"",batchUserLogin6:"",batchUserName1:"",batchUserName2:"",batchUserEmail1:"",batchUserEmail2:"",batchUserRole1:"",batchUserRole2:""}}ngOnInit(){this.currentUserDetail(),this.getApplicationType()}currentUserDetail(){this.service.getIdentity("identity/GetCurrentUser").then(e=>{if(null!=e){console.log(e);let t=e.samAccountName;this.reRoute.currentUserName=e.displayName,this.reRoute.currentUserLogin=e.samAccountName,this.reRoute.currentUserEmail=e.emailAddress,this.getSettings(),this.initTaskList(t)}}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getUserInGroupName(e){this.service.get("RSAGroup/GetUsersInGroup/"+e).then(t=>{null!=t&&(e==p.f?this.userList=t:e==p.m&&(this.signatoryUserList=t))}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getSettings(){this.service.get("RSASetting/1").then(e=>{null!=e&&(this.reRoute.batchNo=e.settings.batchNo,this.reRoute.teamLeadAmount=e.settings.teamLeadAmount,this.reRoute.unitHeadAmount=e.settings.headOfUnitAmount,this.reRoute.headDeptAmount=e.settings.headOfDepartmentAmount,this.reRoute.edOpertnAmount=e.settings.edOperationsAmount)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}search(e){}getApplicationType(){this.service.get("RSAApplicationType").then(e=>{null!=e&&(this.applicationType=e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}initTaskList(e){this.service.get("RSAGroup/GetUserGroups/"+e).then(e=>{if(null!=e){this.groupList=e;let t=this.groupList,a=t.some(e=>e.groupName===p.a),i=t.some(e=>e.groupName===p.e),n=(t.some(e=>e.groupName===p.g),t.some(e=>e.groupName===p.c)),r=t.some(e=>e.groupName===p.b),o=t.some(e=>e.groupName===p.l),s=t.some(e=>e.groupName===p.j);if(t.some(e=>e.groupName===p.m),t.some(e=>e.groupName===p.f),t.some(e=>e.groupName===p.o),t.some(e=>e.groupName===p.h),t.some(e=>e.groupName===p.i),1==n){this.isBatch=!0,this.isBMUMaker=!0,this.isCheckIn=!1;let e="AA6";this.getUserInGroupName(p.f),this.gettaskBMU(e)}1==r&&(this.isBatch=!1,this.isBMUMaker=!1,this.isFaBltd=!0,this.routeOption=[{code:"01",name:"CheckIn Maker"},{code:"02",name:"CheckIn BMU Team Lead"}],this.gettaskBMU("AA5")),1==s&&(this.isBatch=!0,this.isBMUMaker=!1,this.isFundAcc=!1,this.isFaBltd=!0,this.routeOption=[{code:"01",name:"Signatory"},{code:"02",name:"CheckIn FAC"}],this.getUserInGroupName("Signatory"),this.gettaskBMU("AA10")),1==o&&(this.isBatch=!1,this.isBMUMaker=!1,this.gettaskBMU("AA3")),1==a&&(this.isBatch=!1,this.isBMUMaker=!1,this.gettaskBMU("AA1")),1==i&&(this.isBatch=!1,this.isBMUMaker=!1,this.gettaskBMU("AA2"))}}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}gettaskBMU(e){this.service.postUrl("RSARequest/MyBMULeadReport/"+e).then(e=>{if(console.log(e),null!=e){this.startMapping(e);let t=this.groupList.some(e=>"BMU Maker"==e.groupName),a=this.reRoute.userRole;this.getUserListByAmount(a),""!=a&&1==t&&this.getUserListByAmount(a)}}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}gettaskSign(e){this.service.postUrl("RSARequest/MyGroupNameReport/"+e).then(e=>{console.log(e),null!=e&&this.startMapping(e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getUserListByAmount(e){if("Team Lead"==e){let e=this.reRoute.teamLeadAmount;this.taskList=this.taskList.filter(t=>Number(t.requestedAmount)<=Number(e)),console.log(this.taskList)}else if("Head of Unit"==e){let e=this.reRoute.teamLeadAmount,t=this.reRoute.unitHeadAmount;this.taskList=this.taskList.filter(a=>Number(a.requestedAmount)>Number(e)&&Number(a.requestedAmount)<=Number(t)),console.log(this.taskList)}else if("Head of Department"==e){let e=this.reRoute.unitHeadAmount,t=this.reRoute.headDeptAmount;this.taskList=this.taskList.filter((function(a){return a.requestedAmount>e&&a.requestedAmount<=t}))}else if("ED Operations"==e){let e=this.reRoute.edOpertnAmount;this.taskList.filter((function(t){return t.requestedAmount>=e}))}}getRerouteOption(e){let t=e.target.selectedIndex;this.routeOpt=t,console.log(t),console.log(this.reRoute.reRouteOption);let a=this.reRoute.reRouteOption;"Signatory"===a?(this.isFundAcc=!0,this.isFaBltd=!0,this.isCheckIn=!1,this.gettaskSign("Signatory")):"CheckIn FAC"===a&&(this.isFundAcc=!1,this.isFaBltd=!0,this.gettaskBMU("AA10")),"CheckIn Maker"===a&&this.gettaskBMU("AA5"),"CheckIn BMU Team Leadr"===a&&this.gettaskBMU("AA4")}getFirstSignatory(e){let t=e.target.selectedIndex,a=-1+t;this.signName=t,console.log(this.signatoryUserList[a]),this.reRoute.batchUserName1=this.signatoryUserList[a].name,this.reRoute.batchUserLogin1=this.signatoryUserList[a].login,this.reRoute.batchUserEmail1=this.signatoryUserList[a].email;let i=this.signatoryUserList[a].role;"Signatory A"==i&&"Signatory B"==this.reRoute.batchUserRole2?(this.helperService.showError("Please select signatory with signatory B role"),this.reRoute.batchUserLogin6=null):"Signatory A"==i?(this.signatList2=this.signatoryUserList.filter(e=>e.login!==this.reRoute.batchUserLogin1),this.signatoryList2=this.signatList2.filter(e=>"Signatory B"!==e.role)):this.signatoryList2=this.signatoryUserList.filter(e=>e.login!==this.reRoute.batchUserLogin1)}getSecondSignatory(e){let t=e.target.selectedIndex,a=-1+t;this.signName2=t,console.log(this.signatoryList2[a]),this.reRoute.batchUserName2=this.signatoryList2[a].name,this.reRoute.batchUserLogin2=this.signatoryList2[a].login,this.reRoute.batchUserEmail2=this.signatoryList2[a].email,this.reRoute.batchUserRole2=this.signatoryList2[a].role,console.log(this.reRoute)}startMapping(e){this.taskList=e,this.taskList=this.taskList.sort((e,t)=>t.id-e.id);let t=this.groupList.some(e=>e.groupName==p.m),a=this.groupList.some(e=>e.groupName==p.f);0==t&&0==a&&(this.taskList=this.taskList.filter(e=>e.pendingUserLogin!==e.pendingUserEmail))}routeToPage(e){this.router.navigate(["approval-page",{id:e}])}getAppType(e){let t=e.target.selectedIndex;this.appType=t,console.log(t),console.log(this.reRoute.applicationType)}moveToCheckIn(e,t){this.checkItem.push(t),this.checkInItem(t)}checkInItem(e){let t="RSARequest/UpdateRSARequest/"+e.id,a={comment:"Check in",email:this.reRoute.currentUserEmail,login:this.reRoute.currentUserLogin,name:this.reRoute.currentUserName,actionTime:this.reRoute.actionTime,rsaRequestID:e.id,stage:e.pendingUserEmail,signature:""},i=this.checkItem;for(let n=0;n<i.length;n++)i[n].pendingUserLogin=e.pendingUserEmail;this.service.update(t,{rsaRequest:i[0],requestHistory:a}).then(e=>{console.log(e),null==e&&this.reloadCurrentRoute()}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.error.message)})))}reloadCurrentRoute(){let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}moveToBatch(e,t){let a=this.reRoute.batchNo;"AA6"===t.current_Approver_Code?""!==this.reRoute.batchUserLogin?this.taskBatch.length<a?(this.taskList.splice(e,1),this.batchItem(t)):this.helperService.showError("You cannot move more than  "+a+"  tasks to batch list"):this.helperService.showError("Please select approver before you proceed"):"Signatory"===t.current_Approver&&(""!==this.reRoute.batchUserLogin5||""!==this.reRoute.batchUserLogin6?(this.taskList.splice(e,1),this.batchItem(t)):this.helperService.showError("Please select signatories before you proceed"))}batchItem(e){this.taskBatch.push(e)}removeToBatch(e,t){this.taskBatch.splice(e,1),this.taskList.push(t)}submit(){let e=this.groupList.some(e=>"Fund Accounting"==e.groupName),t=this.groupList.some(e=>"BMU Maker"==e.groupName),a=this.groupList.map(e=>e.groupName);console.log(this.reRoute);let i=this.taskBatch;if(1==t)for(let n=0;n<i.length;n++)i[n].pendingUserEmail=this.reRoute.batchUserEmail,i[n].pendingUserLogin=this.reRoute.batchUserLogin,i[n].batchUserEmail=this.reRoute.batchUserEmail,i[n].batchUserLogin=this.reRoute.batchUserLogin,i[n].batchUserName=this.reRoute.batchUserName,this.tashBatchReq.push({rsaRequestID:i[n].id,rsaRequest:i[n],requestHistory:{comment:this.reRoute.comment,email:this.reRoute.currentUserEmail,login:this.reRoute.currentUserLogin,name:this.reRoute.currentUserName,actionTime:this.reRoute.actionTime,rsaRequestID:i[n].id,stage:"BMU Maker",signature:""}});else if(1==e)for(let n=0;n<i.length;n++){let e=i[n].pendingUserLogin;e==i[n].batchUserLogin1&&(i[n].pendingUserLogin=this.reRoute.batchUserLogin1,i[n].pendingUserEmail=this.reRoute.batchUserEmail1),e==i[n].batchUserLogin2&&(i[n].pendingUserLogin=this.reRoute.batchUserLogin2,i[n].pendingUserEmail=this.reRoute.batchUserEmail2),i[n].batchUserEmail1=this.reRoute.batchUserEmail1,i[n].batchUserLogin1=this.reRoute.batchUserLogin1,i[n].batchUserName1=this.reRoute.batchUserName1,i[n].batchUserEmail2=this.reRoute.batchUserEmail2,i[n].batchUserLogin2=this.reRoute.batchUserLogin2,i[n].batchUserName2=this.reRoute.batchUserName2,this.tashBatchReq.push({rsaRequestID:i[n].id,rsaRequest:i[n],requestHistory:{comment:this.reRoute.comment,email:this.reRoute.currentUserEmail,login:this.reRoute.currentUserLogin,name:this.reRoute.currentUserName,actionTime:this.reRoute.actionTime,rsaRequestID:i[n].id,stage:a,signature:""}})}this.service.update("RSARequest/UpdateMultipleRSARequest",this.tashBatchReq).then(e=>{console.log(e),null==e&&this.reloadCurrentRoute()}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.error.message)})))}getUserName(e){let t=e.target.selectedIndex,a=-1+t;this.appName=t,console.log(this.userList[a]),this.reRoute.batchUserName=this.userList[a].name,this.reRoute.batchUserLogin=this.userList[a].login,this.reRoute.batchUserEmail=this.userList[a].email,this.reRoute.userRole=this.userList[a].role,console.log(this.reRoute),this.gettaskBMU("AA6")}}return e.\u0275fac=function(t){return new(t||e)(m.Pb(g.a),m.Pb(b.a),m.Pb(c.c))},e.\u0275cmp=m.Jb({type:e,selectors:[["app-rsa-reroute"]],decls:37,vars:22,consts:[["novalidate","",3,"ngSubmit"],["submitForm","ngForm"],[1,"row"],["id","gName","class","col-4 gName",4,"ngIf"],["class","col-8 gName",4,"ngIf"],[4,"ngIf"],["class","table batch-table table-striped",4,"ngIf"],["class","row",4,"ngIf"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[3,"collectionSize","page","maxSize","rotate","ellipses","boundaryLinks","pageChange"],["id","gName",1,"col-4","gName"],["name","appName","placeholder","d.ff","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["appName","ngModel"],["hidden","","value","","disabled","","selected",""],["color","danger"],["id","error",3,"hidden"],[1,"col-8","gName"],["name","bchComment","placeholder","Leave a comment here","required","",1,"form-control",2,"height","70px",3,"ngModel","ngModelChange"],["bchComment","ngModel"],["name","appOption","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["appOption","ngModel"],["name","appNamesign","placeholder","d.ff","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["appNamesign","ngModel"],["name","appNamesign2","placeholder","d.ff","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["appNamesign2","ngModel"],[1,"table","batch-table","table-striped"],[3,"click"],[1,"btn","btn-danger",3,"click"],[1,"col"],["id","btn","type","submit",1,"btn",3,"click"],[1,"btn","btn-success",3,"click"],["id","spacer"],[1,"btn","btn-warning",3,"click"]],template:function(e,t){if(1&e){const e=m.Vb();m.Ub(0,"h5"),m.Hc(1,"RSA Approvers Re-route"),m.Tb(),m.Ub(2,"form",0,1),m.gc("ngSubmit",(function(){m.yc(e);const a=m.xc(3);return t.search(a)})),m.Ub(4,"div",2),m.Fc(5,w,11,3,"div",3),m.Fc(6,_,8,2,"div",4),m.Fc(7,H,11,3,"div",3),m.Fc(8,q,11,3,"div",3),m.Fc(9,V,11,3,"div",3),m.Tb(),m.Tb(),m.Fc(10,z,2,0,"h4",5),m.Fc(11,Q,17,1,"table",6),m.Fc(12,X,4,0,"div",7),m.Ub(13,"table",8),m.Ub(14,"thead"),m.Ub(15,"tr"),m.Ub(16,"td"),m.Hc(17,"S/N"),m.Tb(),m.Ub(18,"td"),m.Hc(19,"Reference Code"),m.Tb(),m.Ub(20,"td"),m.Hc(21,"Application Name"),m.Tb(),m.Fc(22,W,2,0,"td",5),m.Fc(23,Y,2,0,"td",5),m.Fc(24,Z,2,0,"td",5),m.Fc(25,$,2,0,"td",5),m.Ub(26,"td"),m.Hc(27,"SAP Id"),m.Tb(),m.Ub(28,"td"),m.Hc(29,"Status"),m.Tb(),m.Fc(30,ee,2,0,"td",5),m.Fc(31,te,2,0,"td",5),m.Tb(),m.Tb(),m.Ub(32,"tbody"),m.Fc(33,ce,18,11,"tr",9),m.Tb(),m.Tb(),m.Ub(34,"ngb-pagination",10),m.gc("pageChange",(function(e){return t.page=e})),m.Tb(),m.Ub(35,"pre"),m.Hc(36),m.Tb()}2&e&&(m.Bb(5),m.qc("ngIf",t.isBMUMaker),m.Bb(1),m.qc("ngIf",t.isBMUMaker),m.Bb(1),m.qc("ngIf",t.isFaBltd),m.Bb(1),m.qc("ngIf",t.isFundAcc),m.Bb(1),m.qc("ngIf",t.isFundAcc),m.Bb(1),m.qc("ngIf",t.taskBatch.length>0),m.Bb(1),m.qc("ngIf",t.taskBatch.length>0),m.Bb(1),m.qc("ngIf",t.taskBatch.length>0),m.Bb(10),m.qc("ngIf",t.isFundAcc),m.Bb(1),m.qc("ngIf",t.isFundAcc),m.Bb(1),m.qc("ngIf",t.isFundAcc),m.Bb(1),m.qc("ngIf",t.isFundAcc),m.Bb(5),m.qc("ngIf",t.isCheckIn),m.Bb(1),m.qc("ngIf",t.isBatch),m.Bb(2),m.qc("ngForOf",t.taskList),m.Bb(1),m.qc("collectionSize",t.taskList.length)("page",t.page)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),m.Bb(2),m.Jc("Current page: ",t.page,""))},directives:[f.x,f.m,f.n,i.m,i.l,n.l,f.u,f.t,f.l,f.o,f.p,f.w,f.c],pipes:[i.e],styles:["h5[_ngcontent-%COMP%]{color:#fff;padding:4px;background-color:#0033a1;width:100%;text-align:center}#error[_ngcontent-%COMP%]{color:red}thead[_ngcontent-%COMP%]{color:#fff;padding:4px;background-color:#0033a1;width:100%}.row[_ngcontent-%COMP%]   .col.col-3[_ngcontent-%COMP%]{margin-top:20px}.gName[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}a[_ngcontent-%COMP%]{color:#0033a1!important}a[_ngcontent-%COMP%]:hover{text-decoration:underline!important}h4[_ngcontent-%COMP%]{margin-top:25px}.batch-table[_ngcontent-%COMP%]{margin-bottom:30px}#spacer[_ngcontent-%COMP%]{margin:2vh}td[_ngcontent-%COMP%]{text-align:center}#search[_ngcontent-%COMP%]{margin-bottom:5vh}#btn[_ngcontent-%COMP%]{color:#fff;background-color:#0033a1;margin-bottom:2vh}"]}),e})();function he(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function de(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function pe(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function ue(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.Name," ")}}function me(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",15),m.Ub(1,"label"),m.Hc(2,"Insurance Company"),m.Tb(),m.Ub(3,"select",27,28),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().paySchedule.insuranceCoy=t}))("change",(function(t){return m.yc(e),m.kc().getInsuranceCode(t)})),m.Ub(5,"option",6),m.Hc(6,"Select Insurance Company"),m.Tb(),m.Fc(7,ue,2,1,"option",7),m.Tb(),m.Ub(8,"div",8),m.Ub(9,"p",9),m.Hc(10," Insurance company is required "),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(4),t=m.kc();m.Bb(3),m.qc("ngModel",t.paySchedule.insuranceCoy),m.Bb(4),m.qc("ngForOf",t.insuranceList),m.Bb(2),m.qc("hidden",e.valid||!1===t.submitted)}}function ge(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",15),m.Ub(1,"label"),m.Hc(2,"Second Signatory Date"),m.Tb(),m.Ub(3,"mat-form-field",16),m.Ub(4,"input",29,30),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().paySchedule.secSignDate=t})),m.Tb(),m.Qb(6,"mat-datepicker-toggle",19),m.Qb(7,"mat-datepicker",20,31),m.Tb(),m.Ub(9,"div",8),m.Ub(10,"p",9),m.Hc(11," Second signatory date is required "),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(5),t=m.xc(8),a=m.kc();m.Bb(4),m.qc("matDatepicker",t)("max",a.today)("ngModel",a.paySchedule.secSignDate),m.Bb(2),m.qc("for",t),m.Bb(4),m.qc("hidden",e.valid||!1===a.submitted)}}function be(e,t){if(1&e){const e=m.Vb();m.Ub(0,"button",32),m.gc("click",(function(){return m.yc(e),m.kc().generateInstruction()})),m.Hc(1,"Generate Payment Schedule"),m.Tb()}}function fe(e,t){if(1&e){const e=m.Vb();m.Ub(0,"button",32),m.gc("click",(function(){return m.yc(e),m.kc().generateCoverMemo()})),m.Hc(1,"Generate Cover Memo"),m.Tb()}}function Ne(e,t){if(1&e){const e=m.Vb();m.Ub(0,"tr"),m.Ub(1,"td"),m.Hc(2),m.Tb(),m.Ub(3,"td"),m.Ub(4,"a",33),m.gc("click",(function(){m.yc(e);const a=t.$implicit;return m.kc().routeToPage(a.id)})),m.Hc(5),m.Tb(),m.Tb(),m.Ub(6,"td"),m.Hc(7),m.Tb(),m.Ub(8,"td"),m.Hc(9),m.Tb(),m.Ub(10,"td"),m.Hc(11),m.lc(12,"date"),m.Tb(),m.Ub(13,"td"),m.Hc(14),m.Tb(),m.Ub(15,"td"),m.Hc(16),m.lc(17,"date"),m.Tb(),m.Ub(18,"td"),m.Hc(19),m.Tb(),m.Ub(20,"td"),m.Hc(21),m.lc(22,"date"),m.Tb(),m.Tb()}if(2&e){const e=t.$implicit,a=t.index;m.Bb(2),m.Ic(a+1),m.Bb(3),m.Ic(e.workflowRequestID),m.Bb(2),m.Ic(e.applicationType),m.Bb(2),m.Ic(e.batchUserName1),m.Bb(2),m.Ic(m.nc(12,9,e.signatory1Date,"dd/MM/yyyy")),m.Bb(3),m.Ic(e.batchUserName2),m.Bb(2),m.Ic(m.nc(17,12,e.signatory2Date,"dd/MM/yyyy")),m.Bb(3),m.Ic(e.approval_Status),m.Bb(2),m.Ic(m.nc(22,15,e.createdDate,"dd/MM/yyyy"))}}let ye=(()=>{class e{constructor(e,t,a,i){this.service=e,this.helperService=t,this.datePipes=a,this.router=i,this.submitted=!1,this.isFundAcc=!1,this.isFundAccShow=!1,this.isFundAccAP=!1,this.applicationType=[],this.signatoryUserList=[],this.signatoryList2=[],this.signatList2=[],this.taskList=[],this.userList=[],this.insuranceList=[],this.groupList=[],this.page=1,this.pageSize=10,this.today=new Date,this.paySchedule={applicationType:"",currentUserLogin:"",currentUserName:"",currentUserEmail:"",batchUserLogin:"",batchUserEmail:"",batchUserName:"",batchUserLogin1:"",batchUserEmail1:"",batchUserName1:"",adminFee:"",zenithCustodianStaff:"",salute:"",batchUserLogin2:"",batchUserEmail2:"",batchUserName2:"",batchUserRole2:"",batchUserLogin3:"",batchUserLogin4:"",fstSignDate:null,secSignDate:null,insuranceCoy:"",groupName:"",userRole:"",actionTime:null}}ngOnInit(){this.currentUserDetail(),this.getApplicationType(),this.getUserInGroupName(),this.getInsuranceName(),this.getSettings()}currentUserDetail(){this.service.getIdentity("identity/GetCurrentUser").then(e=>{if(null!=e){console.log(e);let t=e.samAccountName;this.paySchedule.currentUserName=e.displayName,this.paySchedule.currentUserLogin=e.samAccountName,this.paySchedule.currentUserEmail=e.emailAddress,this.initTaskList(t)}}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getSettings(){this.service.get("DigiProFormSetting/GetSettingsById/1").then(e=>{null!=e&&(this.paySchedule.adminFee=e.settings.adminFee.replace(/\u20a6|,/g,""),this.paySchedule.zenithCustodianStaff=e.settings.zenithCustodianStaff,this.paySchedule.salute=e.settings.salutation)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getUserInGroupName(){this.service.get("RSAGroup/GetUsersInGroup/Signatory").then(e=>{null!=e&&(this.signatoryUserList=e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getApplicationType(){this.service.get("RSAApplicationType").then(e=>{null!=e&&(this.applicationType=e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getInsuranceName(){this.service.getUrlStanbic("DigiPro/Insurancelist").then(e=>{null!=e&&"00"!=e.Status?this.helperService.showError("Nav insurance list api "+e.StatusMessage):this.insuranceList=e.data}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getInsuranceCode(e){let t=e.target.selectedIndex,a=-1+t;this.insuraCode=t,console.log(this.insuranceList[a]),this.paySchedule.insuranceCoy=this.insuranceList[a].Name}initTaskList(e){this.service.get("RSAGroup/GetUserGroups/"+e).then(e=>{null!=e&&(this.groupList=e,1==e.some(e=>"Fund Accounting"==e.groupName)&&(this.isFundAcc=!0,this.gettaskBMU("AA13")))}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}gettaskBMU(e){this.service.postUrl("RSARequest/MyBMULeadReport/"+e).then(e=>{console.log(e),null!=e&&this.startMapping(e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}startMapping(e){this.taskList=e,this.taskList=this.taskList.sort((e,t)=>t.id-e.id);let t=this.paySchedule.applicationType,a=this.paySchedule.batchUserLogin1,i=this.paySchedule.batchUserLogin2,n=this.datePipes.transform(this.paySchedule.fstSignDate,"yyyy-MM-dd"),r=this.datePipes.transform(this.paySchedule.secSignDate,"yyyy-MM-dd");""!==t&&""!==a&&""!==i&&null!==n&&null!==r&&(this.taskList=this.taskList.filter(e=>e.applicationType===t&&e.batchUserLogin1===a&&e.batchUserLogin2===i&&this.datePipes.transform(e.signatory1Date,"yyyy-MM-dd")===n&&this.datePipes.transform(e.signatory2Date,"yyyy-MM-dd")===r))}routeToPage(e){this.router.navigate(["approval-page",{id:e}])}getAppType(e){let t=e.target.selectedIndex;this.appType=t,console.log(t),console.log(this.paySchedule.applicationType);let a=this.paySchedule.applicationType;"Lump Sum and Annuity Payment"===a?(this.isFundAccShow=!1,this.isFundAccAP=!0):"Lump Sum and Annuity Payment"!==a&&(this.isFundAccShow=!1,this.isFundAccAP=!1)}search(e){if(this.submitted=!0,e.valid){let e=this.groupList.some(e=>"Fund Accounting"==e.groupName),t=this.groupList.some(e=>"Zenith Pension Custodian"==e.groupName);1!=e&&1!=t||(this.isFundAccShow=!0,this.gettaskBMU("AA13"))}else console.log("Invalid form"),this.helperService.showError("An error Occured, Try again"),console.log(this.paySchedule)}getFirstSignatory(e){let t=e.target.selectedIndex,a=-1+t;this.signName=t,console.log(this.signatoryUserList[a]),this.paySchedule.batchUserName1=this.signatoryUserList[a].name,this.paySchedule.batchUserLogin1=this.signatoryUserList[a].login,this.paySchedule.batchUserEmail1=this.signatoryUserList[a].email;let i=this.signatoryUserList[a].role,n=this.paySchedule.batchUserRole2;this.isFundAccShow=!1,"Signatory A"==i&&"Signatory B"==n?(this.helperService.showError("Please select signatory with signatory B role"),this.paySchedule.batchUserLogin3=null):"Signatory A"==i?(this.signatList2=this.signatoryUserList.filter(e=>e.login!==this.paySchedule.batchUserLogin1),this.signatoryList2=this.signatList2.filter(e=>"Signatory B"!==e.role)):this.signatoryList2=this.signatoryUserList.filter(e=>e.login!==this.paySchedule.batchUserLogin1)}getSecondSignatory(e){let t=e.target.selectedIndex,a=-1+t;this.signName2=t,console.log(this.signatoryList2[a]),this.paySchedule.batchUserName2=this.signatoryList2[a].name,this.paySchedule.batchUserLogin2=this.signatoryList2[a].login,this.paySchedule.batchUserEmail2=this.signatoryList2[a].email,this.paySchedule.batchUserRole2=this.signatoryList2[a].role,console.log(this.paySchedule),this.isFundAccShow=!1}generateInstruction(){let e=Number(this.paySchedule.adminFee);for(let i=0;i<this.taskList.length;i++)this.taskList[i].serialNo=i+1,this.taskList[i].adminFee=e,this.taskList[i].totalValue=Number(this.taskList[i].fundPrice)*Number(this.taskList[i].numberUnits),this.taskList[i].amtToPaid=Number(this.taskList[i].fundPrice)*Number(this.taskList[i].numberUnits);let t=this.paySchedule.applicationType;const a=[];if(t===d.k){const e={data:[{A:"RSA Data"},{A:"S/N",B:"S/N ON APPR",C:"PIN",D:"NAME ON PENCOM APPROVAL",E:"MEMBER NAME ON NAV",F:"ACCOUNT NAME (NIBSS)",G:"BANK",H:"BANK ACCOUNT NO",I:"BANK SORT CODE",J:"25% VALUE",K:"EMPLOYER NAME",L:"WITHDRAWAL DATE",M:"EMPLOYER CODE",N:"FUND ID",O:"BA ID",P:"ACCOUNT VALIDATION",Q:"NIBSS ACCOUNT STATUS"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.pencomApprovalNo,C:t.rsapin,D:t.surname+" "+t.firstName+" "+t.otherNames,E:t.memberNavName,F:t.accountNameNav,G:t.bankBranchName,H:t.nkAccountNumber,I:t.sortCodeBank,J:t.netAmount,K:t.lastEmployer,L:this.datePipes.transform(t.navWithdrawalDate,"dd-MM-yyyy"),M:t.lastEmployerCode,N:t.fundCode,O:t.bashNo,P:t.nibssValidator,Q:"Exist"})}),a.push(e)}else if(t===d.g||t===d.a){const e={data:[{A:"RSA Data"},{A:"S/N",B:"S/N ON APPR",C:"PIN",D:"MEMBER NAME ON NAV",E:"NAME ON PENCOM APPROVAL",F:"ACCOUNT NAME (NIBSS)",G:"BANK",H:"BANK ACCOUNT NO",I:"BANK SORT CODE",J:"FUND PRICE",K:"TOTAL UNITS",L:"TOTAL VALUE",M:"ADMIN FEES",N:"AMOUNT TO PAID TO CLIENT",O:"FUND ID",P:"WITHDRAWAL DATE",Q:"EMPLOYER NAME",R:"EMPLOYER NO",S:"BA ID",T:"APPL TYPE"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.pencomApprovalNo,C:t.rsapin,D:t.memberNavName,E:t.surname+" "+t.firstName+" "+t.otherNames,F:t.accountNameNav,G:t.bankBranchName,H:t.nkAccountNumber,I:t.bankSortCode,J:t.fundPrice,K:t.numberUnits,L:t.totalValue,M:t.adminFee,N:Number(t.netAmount)-Number(t.adminFee),O:t.fundCode,P:this.datePipes.transform(t.navWithdrawalDate,"dd-MM-yyyy"),Q:t.lastEmployer,R:t.lastEmployerCode,S:t.bashNo,T:"Enbloc"})}),a.push(e)}else if(t==d.e){const e={data:[{A:"RSA Data"},{A:"S/N",B:"S/N ON APPR",C:"PIN",D:"MEMBER NAME ON NAV",E:"NAME ON PENCOM APPROVAL",F:"ACCOUNT NAME (NIBSS)",G:"BANK",H:"BANK ACCOUNT NO",I:"BANK SORT CODE",J:"TOTAL UNITS",K:"FUND PRICE",L:"TOTAL VALUE",M:"ADMIN FEES",N:"AMOUNT TO BE PAID",O:"EMPLOYER NAME",P:"NEXT OF KIN ON LOA",Q:"LAW CHAMBERS",R:"DATE OF DEATH",S:"ACCOUNT VALIDATION",T:"NIBSS ACCOUNT STATUS",U:"PHONE NO"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.pencomApprovalNo,C:t.rsapin,D:t.memberNavName,E:t.surname+" "+t.firstName+" "+t.otherNames,F:t.accountNameNav,G:t.bankBranchName,H:t.nkAccountNumber,I:t.sortCodeBank,J:t.numberUnits,K:t.fundPrice,L:t.requestedAmount,M:t.adminFee,N:Number(t.netAmount),O:t.lastEmployer,P:t.nkSurname+" "+t.nkFirstName+" "+t.nkOtherNames,Q:t.nkSurname,R:this.datePipes.transform(t.deathDate,"dd-MM-yyyy"),S:t.nibssValidator,T:"Exist",U:t.nkPhoneNumber})}),a.push(e)}else if("Lump sum and Programmed Withdrawal Payment"==t){const e={data:[{A:"RSA Data"},{A:"S/N",B:"S/N ON APPR",C:"PIN",D:"MEMBER NAME ON NAV",E:"NAME ON PENCOM APPROVAL",F:"ACCOUNT NAME (NIBSS)",G:"BANK",H:"BANK ACCOUNT NO",I:"BANK SORT CODE",J:"LUMPSUM AMOUNT",K:"MONTHLY PENSION",L:"NO OF MONTHS(ARREARS)",M:"AMOUNT TO BE PAID",N:"EMPLOYER NAME"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.pencomApprovalNo,C:t.rsapin,D:t.memberNavName,E:t.surname+" "+t.firstName+" "+t.otherNames,F:t.accountNameNav,G:t.bankBranchName,H:t.nkAccountNumber,I:t.bankSortCode,J:t.availLupsum,K:t.monthlyTotal,L:t.requestedAmount,M:t.netAmount,N:t.lastEmployer})}),a.push(e)}else if("Lump Sum and Annuity Payment"==t){const e={data:[{A:"RSA Data"},{A:"S/N",B:"S/N ON APPR",C:"PIN",D:"MEMBER NAME ON NAV",E:"NAME ON PENCOM APPROVAL",F:"ACCOUNT NAME (NIBSS)",G:"BANK",H:"BANK ACCOUNT NO",I:"BANK SORT CODE",J:"FUND PRICE",K:"TOTAL UNITS",L:"TOTAL VALUE",M:"Insurance Company",N:"PREMIUM",O:"LUMPSUM AMOUNT",P:"ADMIN FEES",Q:"AMOUNT TO BE PAID",R:"EMPLOYER NAME",S:"EMPLOYER CODE",T:"BA ID"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.pencomApprovalNo,C:t.rsapin,D:t.memberNavName,E:t.surname+" "+t.firstName+" "+t.otherNames,F:t.accountNameNav,G:t.bankBranchName,H:t.nkAccountNumber,I:t.sortCodeBank,J:t.fundPrice,K:t.numberUnits,L:t.requestedAmount,M:t.insuranceCoy,N:t.addPremium,O:t.availLupsum,P:t.adminFee,Q:t.Number(t.netAmount)-Number(t.adminFee),R:t.lastEmployer,S:t.lastEmployerCode,T:t.bashNo})}),a.push(e)}else if("Pre-Act Contributions Payment (Pre-Act)"==t){const e={data:[{A:"RSA Data"},{A:"S/N",B:"SN ON APPROVAL",C:"PIN",D:"NAME ON PENCOM APPROVAL",E:"MEMBER NAME ON NAV",F:"ACCOUNT NAME (NIBSS)",G:"BANK",H:"BANK ACCOUNT NO",I:"BANK SORT CODE",J:"FUND PRICE",K:"UNITS",L:"AMOUNT TO BE PAID",M:"Employer Name"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.pencomApprovalNo,C:t.rsapin,D:t.surname+" "+t.firstName+" "+t.otherNames,E:t.t.surname+" "+t.firstName+" "+t.otherNames,F:t.accountNameNav,G:t.bankBranchName,H:t.nkAccountNumber,I:t.sortCodeBank,J:t.fundPrice,K:t.numberUnits,L:t.netAmount,M:t.lastEmployer})}),a.push(e)}else if("Employee Portion Payment (OLD SCHEME)"==t){const e={data:[{A:"RSA Data"},{A:"S/N",B:"SN ON APPROVAL",C:"PIN",D:"NAME ON PENCOM APPROVAL",E:"MEMBER NAME ON NAV",F:"ACCOUNT NAME (NIBSS)",G:"BANK",H:"BANK ACCOUNT NO",I:"BANK SORT CODE",J:"TOTAL UNITS (FUND)",K:"FUND PRICE",L:"TOTAL VALUE",M:"ADMIN FEES",N:"AMOUNT TO BE PAID",O:"EMPLOYER NAME"}],skipHeader:!0};this.taskList.forEach(t=>{e.data.push({A:t.serialNo,B:t.pencomApprovalNo,C:t.rsapin,D:t.surname+" "+t.firstName+" "+t.otherNames,E:t.t.surname+" "+t.firstName+" "+t.otherNames,F:t.accountNameNav,G:t.bankBranchName,H:t.nkAccountNumber,I:t.sortCodeBank,J:t.numberUnits,K:t.fundPrice,L:t.totalValue,M:t.adminFee,N:t.amtToPaid,O:t.lastEmployer})}),a.push(e)}this.service.exportJsonToExcel(a,"rsa_data_customized")}generateCoverMemo(){return Object(l.a)(this,void 0,void 0,(function*(){let e=Number(this.paySchedule.adminFee);for(let d=0;d<this.taskList.length;d++){let t=Number(this.taskList[d].fundPrice)*Number(this.taskList[d].numberUnits);this.taskList[d].serialNo=d+1,this.taskList[d].adminFee=e,this.taskList[d].totalValue=t}console.log(this.taskList);let t=this.paySchedule.applicationType,a=this.paySchedule.zenithCustodianStaff,i=this.paySchedule.salute,n=this.taskList.reduce((e,t)=>e+Number(t.netAmount),0),r=this.helperService.formatNaira(n),o="./assets/img/logo2.png",s=new Date,c=this.datePipes.transform(s,"MMMM d, y"),l=this.taskList.map(e=>e.signatory1Date)[0],h=this.taskList.map(e=>e.signatory2Date)[0],p=this.datePipes.transform(l,"MMM d, y"),u=this.datePipes.transform(h,"MMM d, y");if(t==d.k){const e=yield this.generate25Pay(o,r,c,p,u,a,i);pdfMake.createPdf(e).open()}else t==d.g||t===d.a?this.generateEnblocPay(o,r,c,p,u,a,i):t==d.e?this.generateDeceasedPay(o,r,c,p,u,a,i):"Lump sum and Programmed Withdrawal Payment"==t?this.generatePWithdraw(o,r,c,p,u):"Lump Sum and Annuity Payment"==t&&this.generateAnnunityPay(o,r,c,p,u)}))}generate25Pay(e,t,a,i,n,r,o){return Object(l.a)(this,void 0,void 0,(function*(){return console.log(),{userPassword:"1234",ownerPassword:"123456",permissions:{printing:"highResolution",modifying:!1,copying:!1,annotating:!0,fillingForms:!0,contentAccessibility:!0,documentAssembly:!0},info:{title:"Memo and Schedule 25Percent"},pageSize:"LEGAL",content:[{image:yield this.helperService.getBase64ImageFromURL(e),width:150,alignment:"right"},{text:"Fund Accounting \n\n\n",bold:!0,alignment:"right",color:"black"},{text:"The Managing Director",bold:!0},{text:"Zenith Pensions Custodian Limited",styles:""},{text:"4th & 5th Floors, Civic Towers",styles:""},{text:"Ozumba Mbadiwe Street",styles:""},{text:"Victoria Island, Lagos \n\n",styles:""},{text:["Attention: ",{text:r,bold:!0},"\n\n"],styles:""},{text:["Dear ",{text:o},"\n\n"],styles:""},{text:"Transfer instruction - ZPC/ SIBTC RSA Fund II \n\n",bold:!0,alignment:"left",fontSize:14},{text:["Please debit our ZPC/STANBIC RSA Fund II no. 1010884305 with the sum of ",{text:t}," and apply  as detailed in the schedule attached. \n\n"],lineHeight:1.2},{text:["This amount represents the value of 25% of the balance in the Retirement Savings Account RSA).\n\n"],lineHeight:1.2},{text:["Please see attached approval from National Pension Commission \n\n"],lineHeight:1.2},{text:["Kindly ensure the transfers are done before the close of business today ",{text:a}," \n\n"],lineHeight:1.2},{text:"Yours faithfully \n\n\n",lineHeight:1.2},{columns:[{text:["Signed: ",{text:this.paySchedule.batchUserName1,italics:!0,fontSize:20}],decoration:"underline"},{text:["Signed: ",{text:this.paySchedule.batchUserName2,italics:!0,fontSize:20}],decoration:"underline"}]},{columns:[{text:[{text:this.paySchedule.batchUserName1,bold:!0}," ",{text:i,bold:!0}]},{text:[{text:this.paySchedule.batchUserName2,bold:!0}," ",{text:n,bold:!0}]}]},{text:"Payment Schedule",font:"Roboto",bold:!0,alignment:"center",pageOrientation:"landscape",pageBreak:"before"},{style:"tableExample",table:{headerRows:1,body:[["S/N","S/N ON APPR","PIN","NAME ON PENCOM APPROVAL","MEMBER NAME ON NAV","ACCOUNT NAME NIBSS","BANK","BANK ACCOUNT NO","BANK SORT CODE","25% VALUE","EMPLOYER NAME","WITHDRAWAL DATE","EMPLOYER CODE","FUND ID","BA ID","ACCOUNT VALIDATION","NIBSS ACCOUNT STATUS"],...this.taskList.map(e=>[e.serialNo,e.pencomApprovalNo,e.rsapin,e.surname+" "+e.firstName+" "+e.otherNames,e.surname,e.accountNameNav,e.bankBranchName,e.nkAccountNumber,e.bankSortCode,this.helperService.formatNaira(e.netAmount).replace(/\u20a6/g,""),e.lastEmployer,this.datePipes.transform(e.navWithdrawalDate,"dd-MM-yyyy"),e.bvn,e.fundCode,e.bashNo,e.nibssValidator,"Exist"]),[{text:"Total Amount",colSpan:9},{},{},{},{},{},{},{},{},t,{text:" ",colSpan:7},{},{},{},{},{},{}]]}},["Total Amount  ",{text:t,bold:!0}]],styles:{header:{fontSize:22,bold:!0,alignment:"center"},baright:{alignment:"right",bold:!0,color:"blue"},signEx:{italics:!0,decoration:"underline",fontSize:18},tableExample:{margin:[0,5,0,15],fontSize:8},anotherStyle:{italics:!0,alignment:"right"}}}}))}generateEnblocPay(e,t,a,i,n,r,o){return Object(l.a)(this,void 0,void 0,(function*(){const s={userPassword:"1234",ownerPassword:"123456",permissions:{printing:"highResolution",modifying:!1,copying:!1,annotating:!0,fillingForms:!0,contentAccessibility:!0,documentAssembly:!0},info:{title:"Memo and Schedule Enbloc Payment"},pageSize:"LEGAL",content:[{image:yield this.helperService.getBase64ImageFromURL(e),width:150,alignment:"right"},{text:"Fund Accounting \n\n\n",bold:!0,alignment:"right",color:"black"},{text:"The Managing Director",styles:""},{text:"Zenith Pensions Custodian Limited",styles:""},{text:"4th & 5th Floors, Civic Towers",styles:""},{text:"Ozumba Mbadiwe Street",styles:""},{text:"Victoria Island, Lagos \n\n",styles:""},{text:["Attention: ",{text:r,bold:!0},"\n\n"],styles:""},{text:["Dear ",{text:o},"\n\n"],styles:""},{text:"Transfer instruction - ZPC/SIPML RSA Fund IV  \n\n",bold:!0,alignment:"center",fontSize:14},{text:["Please debit our ZPC/SIPML RSA Fund IV Investment Account no. 1011819188 with the total "," sum of ",{text:t}," and transfer to ZPC/SIBTC RSA Retiree Benefit Payment Account no. "," 1011993563 from where it will be applied as stated in the attached schedule \n\n"],lineHeight:1.2},{text:["This amount represents additional Enbloc payment for the clients as approved by PenCom \n\n"],lineHeight:1.2},{text:["Please see attached approval from National Pension Commission \n\n"],lineHeight:1.2},{text:["Kindly ensure the transfer is done before close of business today ",{text:a}," \n\n"],lineHeight:1.2},{text:"Yours faithfully \n\n\n",lineHeight:1.2},{columns:[{text:[{text:"Signed: ",italics:!0},{text:this.paySchedule.batchUserName1,style:"signEx"}]},{text:[{text:"Signed: ",italics:!0},{text:this.paySchedule.batchUserName2,style:"signEx"}]}]},{columns:[{text:[{text:this.paySchedule.batchUserName1,bold:!0}," ",{text:i,bold:!0}]},{text:[{text:this.paySchedule.batchUserName2,bold:!0}," ",{text:n,bold:!0}]}]},{text:"Payment Schedule Enbloc Payment",bold:!0,alignment:"center",pageOrientation:"landscape",pageBreak:"before"},{style:"tableExample",table:{headerRows:1,body:[["S/N","S/N ON APPR","PIN","MEMBER NAME ON NAV","NAME ON PENCOM APPROVAL","ACCOUNT NAME (NIBSS)","BANK","BANK ACCOUNT NO","BANK SORT CODE","FUND PRICE","TOTAL UNITS","TOTAL VALUE","ADMIN FEES","AMOUNT TO PAID TO CLIENT","FUND ID","WITHDRAWAL DATE","EMPLOYER NAME","EMPLOYER NO","BA ID","APPL TYPE"],...this.taskList.map(e=>[e.serialNo,e.pencomApprovalNo,e.rsapin,e.surname+" "+e.firstName+" "+e.otherNames,e.surname,e.accountNameNav,e.bankBranchName,e.nkAccountNumber,e.bankSortCode,e.fundPrice,e.numberUnits,e.totalValue,e.adminFee,this.helperService.formatNaira(e.netAmount).replace(/\u20a6/g,""),e.fundCode,this.datePipes.transform(e.navWithdrawalDate,"dd-MM-yyyy"),e.lastEmployer,e.lastEmployerCode,e.bashNo,e.applicationType]),[{text:"Total Amount",colSpan:13},{},{},{},{},{},{},{},{},{},{},{},{},t,{text:"",colSpan:6},{},{},{},{},{}]]}},["Total Amount  ",{text:t,bold:!0}]],styles:{header:{fontSize:22,bold:!0,alignment:"center"},tableExample:{margin:[0,5,0,15],fontSize:7},baright:{alignment:"right",bold:!0,color:"blue"},anotherStyle:{italics:!0,alignment:"right"}}};pdfMake.createPdf(s).open()}))}generateDeceasedPay(e,t,a,i,n,r,o){return Object(l.a)(this,void 0,void 0,(function*(){const s={userPassword:"1234",ownerPassword:"123456",permissions:{printing:"highResolution",modifying:!1,copying:!1,annotating:!0,fillingForms:!0,contentAccessibility:!0,documentAssembly:!0},info:{title:"Memo and Schedule Deceased Payment"},pageSize:"LEGAL",content:[{image:yield this.helperService.getBase64ImageFromURL(e),width:150,alignment:"left"},{text:"Fund Accounting \n\n\n",bold:!0,alignment:"right",color:"black"},{text:"The Managing Director",styles:""},{text:"Zenith Pensions Custodian Limited",styles:""},{text:"4th & 5th Floors, Civic Towers",styles:""},{text:"Ozumba Mbadiwe Street",styles:""},{text:"Victoria Island, Lagos \n\n",styles:""},{text:["Attention: ",{text:r},"\n\n"],styles:""},{text:["Dear ",{text:o},"\n\n"],styles:""},{text:"Transfer Instruction - ZPC/SIPML RSA Fund IV \n\n",bold:!0,alignment:"center",fontSize:14},{text:["Please debit our ZPC/SIPML RSA Fund IV Investment Account no. 1011819188 with the total ","sum of ",{text:t}," and transfer to ZPC/SIBTC RSA Retiree Benefit Payment Account no. ","1011993563 from where it will be applied as stated in the attached schedule. \n\n"],lineHeight:1.2},{text:["This amount represents balance on the Retiree Fund Account (\u201cRFA\u201d) of deceased clients which ","have been requested for by the named beneficiaries \n\n"],lineHeight:1.2},{text:["Also note that the administrative fees should be transferred to our FEE PAYABLE ACCOUNT No. ","1010925097. \n\n\n"],lineHeight:1.2},{text:["Kindly ensure the transfers are done before the close of business today ",{text:a}," \n\n"],lineHeight:1.2},{text:"Yours faithfully \n\n\n",lineHeight:1.2},{columns:[{text:[{text:"Signed: ",italics:!0},{text:this.paySchedule.batchUserName1,style:"signEx"}]},{text:[{text:"Signed: ",italics:!0},{text:this.paySchedule.batchUserName2,style:"signEx"}]}]},{columns:[{text:[{text:this.paySchedule.batchUserName1,bold:!0}," ",{text:i,bold:!0}]},{text:[{text:this.paySchedule.batchUserName2,bold:!0}," ",{text:n,bold:!0}]}]},{text:"Payment Schedule Deceased Payment",bold:!0,alignment:"center",pageOrientation:"landscape",pageBreak:"before"},{style:"tableExample",table:{headerRows:1,body:[["S/N","S/N ON APPR","PIN","MEMBER NAME ON NAV","NAME ON PENCOM APPROVAL","ACCOUNT NAME (NIBSS)","BANK","BANK ACCOUNT NO","BANK SORT CODE","TOTAL UNITS","FUND PRICE","TOTAL VALUE","ADMIN FEES","AMOUNT TO BE PAID","EMPLOYER NAME","NEXT OF KIN ON LOA","LAW CHAMBERS","DATE OF DEATH","ACCOUNT VALIDATION","NIBSS ACCOUNT STATUS","PHONE NO"],...this.taskList.map(e=>[e.serialNo,e.pencomApprovalNo,e.rsapin,e.surname+" "+e.firstName+" "+e.otherNames,e.surname,e.accountNameNav,e.bankBranchName,e.nkAccountNumber,e.bankSortCode,e.numberUnits,e.fundPrice,this.helperService.formatNaira(e.totalValue).replace(/\u20a6/g,""),e.adminFee,this.helperService.formatNaira(e.netAmount).replace(/\u20a6/g,""),e.lastEmployer,e.nkSurname+" "+e.nkFirstName+" "+e.nkOtherNames,e.bvn,this.datePipes.transform(e.deathDate,"dd-MMM-yyyy"),e.nibssValidator,e.nibssValidator,e.nkPhoneNumber]),[{text:"Total Amount",colSpan:13},{},{},{},{},{},{},{},{},{},{},{},{},t,{text:"",colSpan:7},{},{},{},{},{},{}]]}},["Total Amount  ",{text:t,bold:!0}]],styles:{header:{fontSize:22,bold:!0,alignment:"center"},baright:{alignment:"right",bold:!0,color:"blue"},tableExample:{margin:[0,5,0,15],fontSize:7},anotherStyle:{italics:!0,alignment:"right"}}};pdfMake.createPdf(s).open()}))}generatePWithdraw(e,t,a,i,n){return Object(l.a)(this,void 0,void 0,(function*(){const r={userPassword:"1234",ownerPassword:"123456",permissions:{printing:"highResolution",modifying:!1,copying:!1,annotating:!0,fillingForms:!0,contentAccessibility:!0,documentAssembly:!0},info:{title:"Memo and Schedule Program Withdrawal Payment"},pageSize:"LEGAL",content:[{image:yield this.helperService.getBase64ImageFromURL(e),width:150,alignment:"right"},{text:"Fund Accounting \n\n\n",bold:!0,alignment:"right",color:"black"},{text:"The Managing Director",styles:""},{text:"Zenith Pensions Custodian Limited",styles:""},{text:"4th & 5th Floors, Civic Towers",styles:""},{text:"Ozumba Mbadiwe Street",styles:""},{text:"Victoria Island, Lagos \n\n",styles:""},{text:"Attention: Mrs Nkem Oni-Egboma/Mrs Yinka Ajayi \n",styles:""},{text:"Dear Madam, \n\n",styles:""},{text:"Transfer Instruction - ZPC/SIPML RSA Fund IV \n\n",bold:!0,alignment:"center",fontSize:14},{text:["Please debit our ZPC/SIPML RSA Fund IV Investment Account no. 1011819188 with the total ","sum of ",{text:t}," and transfer to ZPC/SIBTC RSA Retiree Benefit Payment Account no. ","1011993563 from where it will be applied as stated in the attached schedule. "],lineHeight:1.2},{text:["This amount represents Lump-sum payment and programmed withdrawal for the clients as ","approved by PenCom. \n\n"],lineHeight:1.2},{text:["Please see attached approval from National Pension Commission \n\n"],lineHeight:1.2},{text:["Kindly ensure the transfer is done before close of business today ",{text:a}," \n\n"],lineHeight:1.2},{text:"Yours faithfully \n\n\n",lineHeight:1.2},{columns:[{text:[{text:"Signed: ",italics:!0},{text:this.paySchedule.batchUserName1,style:"signEx"}]},{text:[{text:"Signed: ",italics:!0},{text:this.paySchedule.batchUserName2,style:"signEx"}]}]},{columns:[{text:[{text:this.paySchedule.batchUserName1,bold:!0}," ",{text:i,bold:!0}]},{text:[{text:this.paySchedule.batchUserName2,bold:!0}," ",{text:n,bold:!0}]}]},{text:"Payment Schedule Program Withdrawal Payment",bold:!0,alignment:"center",pageOrientation:"landscape",pageBreak:"before"},{style:"tableExample",table:{headerRows:1,body:[["S/N","S/N ON APPR","PIN","MEMBER NAME ON NAV","NAME ON PENCOM APPROVAL","ACCOUNT NAME (NIBSS)","BANK","BANK ACCOUNT NO","BANK SORT CODE","LUMPSUM AMOUNT","MONTHLY PENSION","NO OF MONTHS(ARREARS)","AMOUNT TO BE PAID","EMPLOYER NAME"],...this.taskList.map(e=>[e.serialNo,e.pencomApprovalNo,e.rsapin,e.surname+" "+e.firstName+" "+e.otherNames,e.surname,e.accountNameNav,e.bankBranchName,e.nkAccountNumber,e.bankSortCode,e.availLupsum,e.monthlyTotal,e.createdDate,e.netAmount,e.lastEmployer]),[{text:"Total Amount",colSpan:12},{},{},{},{},{},{},{},{},{},{},{},t,{}]]}},["Total Amount  ",{text:t,bold:!0}]],styles:{header:{fontSize:22,bold:!0,alignment:"center"},baright:{alignment:"right",bold:!0,color:"blue"},tableExample:{margin:[0,5,0,15],fontSize:8},anotherStyle:{italics:!0,alignment:"right"}}};pdfMake.createPdf(r).open()}))}generateAnnunityPay(e,t,a,i,n){return Object(l.a)(this,void 0,void 0,(function*(){let r=this.taskList.reduce((e,t)=>e+Number(t.totalValue),0),o=this.helperService.formatNaira(r),s=this.taskList.reduce((e,t)=>e+Number(t.availLupsum),0),c=this.helperService.formatNaira(s),l=this.taskList.reduce((e,t)=>e+Number(t.adminFee),0),h=this.paySchedule.insuranceCoy;if("AIICO INSURANCE PLC"===h)var d="2031953641",p="011152303",u="FIRST BANK";else"CORNERSTONE INSURANCE PLC"===h?(d="0088428223",p="063150162",u="ACCESS (DIAMOND BANK)"):"FBN LIFE ASSURANCE"===h?(d="2031841410",p="011152303",u="FIRST BANK"):"LEADWAY INSURANCE"===h?(d="1015038189",p="057150013",u="ZENITH BANK"):"ARM LIFE ASSURANCE"===h?(d="1015041266",p="057150013",u="ZENITH BANK"):"GREAT NIGERIA INSURANCE PLC"===h?(d="2031963930",p="011152303",u="FIRST BANK"):"CUSTODIAN LIFE ASSURANCE LIMITED"===h&&(d="1020143010",p="033152048",u="UBA");const m={userPassword:"1234",ownerPassword:"123456",permissions:{printing:"highResolution",modifying:!1,copying:!1,annotating:!0,fillingForms:!0,contentAccessibility:!0,documentAssembly:!0},info:{title:"Memo and Schedule Annuity Payment"},pageSize:"LEGAL",content:[{image:yield this.helperService.getBase64ImageFromURL(e),width:150,alignment:"right"},{text:"Fund Accounting \n\n\n",bold:!0,alignment:"right",color:"black"},{text:"The Managing Director",styles:""},{text:"Zenith Pensions Custodian Limited",styles:""},{text:"4th & 5th Floors, Civic Towers",styles:""},{text:"Ozumba Mbadiwe Street",styles:""},{text:"Victoria Island, Lagos \n\n",styles:""},{text:"Attention: Mrs Nkem Oni-Egboma/Mrs Yinka Ajayi \n",styles:""},{text:"Dear Madam, \n\n",styles:""},{text:"Transfer instruction - ZPC/SIPML RLA Suspense Account \n\n",bold:!0,alignment:"center",fontSize:14},{text:["Please debit our Retiree Life Annuity Suspense Account with account No. 1017635197 with the  ","sum of ",{text:t}," and apply as stated in the attached schedule. \n\n","See attached approval from National Pension Commission. \n\n","Please transfer the cost of annuity purchased to the account details stated below "],lineHeight:1.2},{table:{headerRows:1,body:[[{text:"S/N",bold:!0},{text:"ACCOUNT NAME",bold:!0},{text:"ACCT/NO",bold:!0},{text:"SORT CODES",bold:!0},{text:"BANK",bold:!0}],["1",h,d,p,u]]}},{text:" \n\n"},{text:["This amount represents Lumpsum and Annuity withdrawal for the clients as approved by ","PenCom. Also note that the administrative fees should be transferred to our FEE PAYABLE ","ACCOUNT No. 1010925097 \n\n"],lineHeight:1.2},{text:["Kindly ensure the transfer is done before close of business today ",{text:a}," \n\n"],lineHeight:1.2},{text:"Yours faithfully \n\n\n",lineHeight:1.2},{columns:[{text:[{text:"Signed: ",italics:!0},{text:this.paySchedule.batchUserName1,style:"signEx"}]},{text:[{text:"Signed: ",italics:!0},{text:this.paySchedule.batchUserName2,style:"signEx"}]}]},{columns:[{text:[{text:this.paySchedule.batchUserName1,bold:!0}," ",{text:i,bold:!0}]},{text:[{text:this.paySchedule.batchUserName2,bold:!0}," ",{text:n,bold:!0}]}]},{text:"Payment Schedule Annuity Payment",bold:!0,alignment:"center",pageOrientation:"landscape",pageBreak:"before"},{style:"tableExample",table:{headerRows:1,body:[["S/N","S/N ON APPR","PIN","MEMBER NAME ON NAV","NAME ON PENCOM APPROVAL","ACCOUNT NAME (NIBSS)","BANK","BANK ACCOUNT NO","BANK SORT CODE","FUND PRICE","TOTAL UNITS","TOTAL VALUE","Insurance Company","PREMIUM","LUMPSUM AMOUNT","ADMIN FEES","AMOUNT TO BE PAID","EMPLOYER NAME","EMPLOYER CODE","BA ID"],...this.taskList.map(e=>[e.serialNo,e.pencomApprovalNo,e.rsapin,e.surname+" "+e.firstName+" "+e.otherNames,e.surname,e.accountNameNav,e.bankBranchName,e.nkAccountNumber,e.bankSortCode,e.fundPrice,e.numberUnits,e.totalValue,e.insuranceCoy,e.addPremium,e.availLupsum,e.adminFee,e.netAmount,e.lastEmployer,e.nibssValidator,e.bashNo]),[{},{},{},{},{},{},{},{},{},{},{text:"Total Amount"},o,{},{},c,l,t,{},{},{}]]}},["Total Amount  ",{text:t,bold:!0}]],styles:{header:{fontSize:22,bold:!0,alignment:"center"},baright:{alignment:"right",bold:!0,color:"blue"},tableExample:{margin:[0,5,0,15],fontSize:8},anotherStyle:{italics:!0,alignment:"right"}}};pdfMake.createPdf(m).open()}))}}return e.\u0275fac=function(t){return new(t||e)(m.Pb(g.a),m.Pb(b.a),m.Pb(i.e),m.Pb(c.c))},e.\u0275cmp=m.Jb({type:e,selectors:[["app-payment-schdule"]],decls:85,vars:26,consts:[["novalidate","",3,"ngSubmit"],["submitForm","ngForm"],[1,"row"],[1,"col-4","gName"],["name","appType","required","","placeholder","d.ff",1,"form-control",3,"ngModel","ngModelChange","change"],["appType","ngModel"],["hidden","","value","","disabled","","selected",""],[4,"ngFor","ngForOf"],["color","danger"],["id","error",3,"hidden"],["name","appNamesign","placeholder","d.ff","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["appNamesign","ngModel"],["name","appNamesign2","placeholder","d.ff","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["appNamesign2","ngModel"],["class","col-4",4,"ngIf"],[1,"col-4"],["appearance","fill"],["matInput","","name","strtDate","required","","placeholder","Choose a date",3,"matDatepicker","max","ngModel","ngModelChange"],["strtDate","ngModel"],["matSuffix","",3,"for"],["color","primary"],["pickerStat",""],[1,"col","col-3"],["id","search","type","button",1,"btn","btn-outline-secondary",3,"click"],["class","btn btn-sm font-weight-bold btn-link",3,"click",4,"ngIf"],[1,"table","table-striped"],[3,"collectionSize","page","maxSize","rotate","ellipses","boundaryLinks","pageChange"],["name","insurCoy","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["insurCoy","ngModel"],["matInput","","name","ndDate","required","","placeholder","Choose a date",3,"matDatepicker","max","ngModel","ngModelChange"],["ndDate","ngModel"],["pickerEnd",""],[1,"btn","btn-sm","font-weight-bold","btn-link",3,"click"],[3,"click"]],template:function(e,t){if(1&e){const e=m.Vb();m.Ub(0,"h5"),m.Hc(1,"RSA Memo/Payment Schedule"),m.Tb(),m.Ub(2,"form",0,1),m.gc("ngSubmit",(function(){m.yc(e);const a=m.xc(3);return t.search(a)})),m.Ub(4,"div",2),m.Ub(5,"div",3),m.Ub(6,"label"),m.Hc(7,"Application Type"),m.Tb(),m.Ub(8,"select",4,5),m.gc("ngModelChange",(function(e){return t.paySchedule.applicationType=e}))("change",(function(e){return t.getAppType(e)})),m.Ub(10,"option",6),m.Hc(11,"Select Application Type"),m.Tb(),m.Fc(12,he,2,1,"option",7),m.Tb(),m.Ub(13,"div",8),m.Ub(14,"p",9),m.Hc(15," Application Type is required "),m.Tb(),m.Tb(),m.Tb(),m.Ub(16,"div",3),m.Ub(17,"label"),m.Hc(18,"First Signatory"),m.Tb(),m.Ub(19,"select",10,11),m.gc("ngModelChange",(function(e){return t.paySchedule.batchUserLogin3=e}))("change",(function(e){return t.getFirstSignatory(e)})),m.Ub(21,"option",6),m.Hc(22,"Select Signatory"),m.Tb(),m.Fc(23,de,2,1,"option",7),m.Tb(),m.Ub(24,"div",8),m.Ub(25,"p",9),m.Hc(26," Signatory name is required "),m.Tb(),m.Tb(),m.Tb(),m.Ub(27,"div",3),m.Ub(28,"label"),m.Hc(29,"Secondary Signatory"),m.Tb(),m.Ub(30,"select",12,13),m.gc("ngModelChange",(function(e){return t.paySchedule.batchUserLogin4=e}))("change",(function(e){return t.getSecondSignatory(e)})),m.Ub(32,"option",6),m.Hc(33,"Select Signatory"),m.Tb(),m.Fc(34,pe,2,1,"option",7),m.Tb(),m.Ub(35,"div",8),m.Ub(36,"p",9),m.Hc(37," Signatory name is required "),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(38,"div",2),m.Fc(39,me,11,3,"div",14),m.Ub(40,"div",15),m.Ub(41,"label"),m.Hc(42,"First Signatory Date"),m.Tb(),m.Ub(43,"mat-form-field",16),m.Ub(44,"input",17,18),m.gc("ngModelChange",(function(e){return t.paySchedule.fstSignDate=e})),m.Tb(),m.Qb(46,"mat-datepicker-toggle",19),m.Qb(47,"mat-datepicker",20,21),m.Tb(),m.Ub(49,"div",8),m.Ub(50,"p",9),m.Hc(51," First signatory date is required "),m.Tb(),m.Tb(),m.Tb(),m.Fc(52,ge,12,5,"div",14),m.Tb(),m.Tb(),m.Ub(53,"div",2),m.Ub(54,"div",22),m.Ub(55,"button",23),m.gc("click",(function(){m.yc(e);const a=m.xc(3);return t.search(a)})),m.Hc(56,"Search "),m.Tb(),m.Tb(),m.Tb(),m.Fc(57,be,2,0,"button",24),m.Fc(58,fe,2,0,"button",24),m.Ub(59,"table",25),m.Ub(60,"thead"),m.Ub(61,"tr"),m.Ub(62,"td"),m.Hc(63,"S/N"),m.Tb(),m.Ub(64,"td"),m.Hc(65,"Reference Code"),m.Tb(),m.Ub(66,"td"),m.Hc(67,"Application Name"),m.Tb(),m.Ub(68,"td"),m.Hc(69,"First Signatory"),m.Tb(),m.Ub(70,"td"),m.Hc(71,"1st Sign. Date"),m.Tb(),m.Ub(72,"td"),m.Hc(73,"Second Signatory"),m.Tb(),m.Ub(74,"td"),m.Hc(75,"2nd Sign. Date"),m.Tb(),m.Ub(76,"td"),m.Hc(77,"Status"),m.Tb(),m.Ub(78,"td"),m.Hc(79,"Request Date"),m.Tb(),m.Tb(),m.Tb(),m.Ub(80,"tbody"),m.Fc(81,Ne,23,18,"tr",7),m.Tb(),m.Tb(),m.Ub(82,"ngb-pagination",26),m.gc("pageChange",(function(e){return t.page=e})),m.Tb(),m.Ub(83,"pre"),m.Hc(84),m.Tb()}if(2&e){const e=m.xc(9),a=m.xc(20),i=m.xc(31),n=m.xc(45),r=m.xc(48);m.Bb(8),m.qc("ngModel",t.paySchedule.applicationType),m.Bb(4),m.qc("ngForOf",t.applicationType),m.Bb(2),m.qc("hidden",e.valid||!1===t.submitted),m.Bb(5),m.qc("ngModel",t.paySchedule.batchUserLogin3),m.Bb(4),m.qc("ngForOf",t.signatoryUserList),m.Bb(2),m.qc("hidden",a.valid||!1===t.submitted),m.Bb(5),m.qc("ngModel",t.paySchedule.batchUserLogin4),m.Bb(4),m.qc("ngForOf",t.signatoryList2),m.Bb(2),m.qc("hidden",i.valid||!1===t.submitted),m.Bb(3),m.qc("ngIf",t.isFundAccAP),m.Bb(5),m.qc("matDatepicker",r)("max",t.today)("ngModel",t.paySchedule.fstSignDate),m.Bb(2),m.qc("for",r),m.Bb(4),m.qc("hidden",n.valid||!1===t.submitted),m.Bb(2),m.qc("ngIf",t.isFundAcc),m.Bb(5),m.qc("ngIf",t.isFundAccShow),m.Bb(1),m.qc("ngIf",t.isFundAccShow),m.Bb(23),m.qc("ngForOf",t.taskList),m.Bb(1),m.qc("collectionSize",t.taskList.length)("page",t.page)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),m.Bb(2),m.Jc("Current page: ",t.page,"")}},directives:[f.x,f.m,f.n,f.u,f.t,f.l,f.o,f.p,f.w,i.l,i.m,N.b,r.b,o.b,f.c,o.d,N.e,o.a,n.l],pipes:[i.e],styles:["h5[_ngcontent-%COMP%]{color:#fff;padding:4px;background-color:#0033a1;width:100%;text-align:center}#error[_ngcontent-%COMP%]{color:red}thead[_ngcontent-%COMP%]{color:#fff;padding:4px;background-color:#0033a1;width:100%}.row[_ngcontent-%COMP%]   .col.col-3[_ngcontent-%COMP%]{margin-top:20px}.gName[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}a[_ngcontent-%COMP%]{color:#0033a1!important}a[_ngcontent-%COMP%]:hover{text-decoration:underline!important}h4[_ngcontent-%COMP%]{margin-top:25px}.batch-table[_ngcontent-%COMP%]{margin-bottom:30px}#spacer[_ngcontent-%COMP%]{margin:2vh}td[_ngcontent-%COMP%]{text-align:center}#search[_ngcontent-%COMP%]{margin-bottom:5vh}#btn[_ngcontent-%COMP%]{color:#fff;background-color:#0033a1;margin-bottom:2vh}"]}),e})();var Ae=a("tk/3");function Se(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function Te(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",1),m.Ub(1,"label"),m.Hc(2,"SAP Id"),m.Tb(),m.Ub(3,"input",17,18),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().batchList.login=t})),m.Tb(),m.Tb()}if(2&e){const e=m.kc();m.Bb(3),m.qc("ngModel",e.batchList.login)}}function ve(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",1),m.Ub(1,"label"),m.Hc(2,"Search"),m.Tb(),m.Ub(3,"input",19,18),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().batchList.batchUserLogin=t}))("change",(function(t){return m.yc(e),m.kc().getClientRequest(t)})),m.Tb(),m.Tb()}if(2&e){const e=m.kc();m.Bb(3),m.qc("ngModel",e.batchList.batchUserLogin)}}function Ue(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function Me(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",1),m.Ub(1,"label"),m.Hc(2,"Application Type"),m.Tb(),m.Ub(3,"select",20,21),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().batchList.applicationType=t}))("change",(function(t){return m.yc(e),m.kc().getAppType(t)})),m.Ub(5,"option",4),m.Hc(6,"Select Application Type"),m.Tb(),m.Fc(7,Ue,2,1,"option",5),m.Tb(),m.Tb()}if(2&e){const e=m.kc();m.Bb(3),m.qc("ngModel",e.batchList.applicationType),m.Bb(4),m.qc("ngForOf",e.applicationType)}}function Ee(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function Ce(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",1),m.Ub(1,"label"),m.Hc(2,"Group Name"),m.Tb(),m.Ub(3,"select",22,23),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().batchList.groupName=t}))("change",(function(t){return m.yc(e),m.kc().getGroupName(t)})),m.Ub(5,"option",4),m.Hc(6,"Select Group Name"),m.Tb(),m.Fc(7,Ee,2,1,"option",5),m.Tb(),m.Ub(8,"div",24),m.Ub(9,"p",25),m.Hc(10," Group Name is required "),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(4),t=m.kc();m.Bb(3),m.qc("ngModel",t.batchList.groupName),m.Bb(4),m.qc("ngForOf",t.groupListName),m.Bb(2),m.qc("hidden",e.valid||!1===t.submitted)}}function Le(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e.name," ")}}function Pe(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",1),m.Ub(1,"label"),m.Hc(2,"Branch Name"),m.Tb(),m.Ub(3,"select",26,27),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().batchList.branchName=t}))("change",(function(t){return m.yc(e),m.kc().getBranchName(t)})),m.Ub(5,"option",4),m.Hc(6,"Select Branch Name"),m.Tb(),m.Fc(7,Le,2,1,"option",5),m.Tb(),m.Ub(8,"div",24),m.Ub(9,"p",25),m.Hc(10," Branch Name is required "),m.Tb(),m.Tb(),m.Tb()}if(2&e){const e=m.xc(4),t=m.kc();m.Bb(3),m.qc("ngModel",t.batchList.branchName),m.Bb(4),m.qc("ngForOf",t.branchListName),m.Bb(2),m.qc("hidden",e.valid||!1===t.submitted)}}function Oe(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",1),m.Ub(1,"label"),m.Hc(2,"Start Date"),m.Tb(),m.Ub(3,"mat-form-field",28),m.Ub(4,"input",29,30),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().batchList.startDate=t})),m.Tb(),m.Qb(6,"mat-datepicker-toggle",31),m.Qb(7,"mat-datepicker",32,33),m.Tb(),m.Tb()}if(2&e){const e=m.xc(8),t=m.kc();m.Bb(4),m.qc("matDatepicker",e)("max",t.today)("ngModel",t.batchList.startDate),m.Bb(2),m.qc("for",e)}}function Ie(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",1),m.Ub(1,"label"),m.Hc(2,"End Date"),m.Tb(),m.Ub(3,"mat-form-field",28),m.Ub(4,"input",34,35),m.gc("ngModelChange",(function(t){return m.yc(e),m.kc().batchList.endDate=t})),m.Tb(),m.Qb(6,"mat-datepicker-toggle",31),m.Qb(7,"mat-datepicker",32,36),m.Tb(),m.Tb()}if(2&e){const e=m.xc(8),t=m.kc();m.Bb(4),m.qc("matDatepicker",e)("max",t.today)("ngModel",t.batchList.endDate),m.Bb(2),m.qc("for",e)}}function Re(e,t){if(1&e){const e=m.Vb();m.Ub(0,"button",37),m.gc("click",(function(){return m.yc(e),m.kc().exportToExcel()})),m.Hc(1,"Export to Excel"),m.Tb()}}function De(e,t){1&e&&(m.Ub(0,"h4"),m.Hc(1,"Search List"),m.Tb())}function Be(e,t){if(1&e){const e=m.Vb();m.Ub(0,"tr"),m.Ub(1,"td"),m.Hc(2),m.Tb(),m.Ub(3,"td"),m.Ub(4,"a",39),m.gc("click",(function(){m.yc(e);const a=t.$implicit;return m.kc(2).routeToPageChk(a.id,a.current_Approver_Code,a.returnForCorrection,a.applicationType)})),m.Hc(5),m.Tb(),m.Tb(),m.Ub(6,"td"),m.Hc(7),m.Tb(),m.Ub(8,"td"),m.Hc(9),m.Tb(),m.Ub(10,"td"),m.Hc(11),m.Tb(),m.Qb(12,"td"),m.Qb(13,"td"),m.Tb()}if(2&e){const e=t.$implicit,a=t.index;m.Bb(2),m.Ic(a+1),m.Bb(3),m.Ic(e.workflowRequestID),m.Bb(2),m.Ic(e.applicationType),m.Bb(2),m.Ic(e.current_Approver),m.Bb(2),m.Ic(e.rsapin)}}function ke(e,t){if(1&e&&(m.Ub(0,"table",38),m.Ub(1,"thead"),m.Ub(2,"tr"),m.Ub(3,"td"),m.Hc(4,"S/N"),m.Tb(),m.Ub(5,"td"),m.Hc(6,"Reference Code"),m.Tb(),m.Ub(7,"td"),m.Hc(8,"Application Name"),m.Tb(),m.Ub(9,"td"),m.Hc(10,"Current Approval"),m.Tb(),m.Ub(11,"td"),m.Hc(12,"RSA Pin"),m.Tb(),m.Qb(13,"td"),m.Qb(14,"td"),m.Tb(),m.Tb(),m.Ub(15,"tbody"),m.Fc(16,Be,14,5,"tr",5),m.Tb(),m.Tb()),2&e){const e=m.kc();m.Bb(16),m.qc("ngForOf",e.taskCheckList)}}function xe(e,t){if(1&e){const e=m.Vb();m.Ub(0,"tr"),m.Ub(1,"td"),m.Hc(2),m.Tb(),m.Ub(3,"td"),m.Ub(4,"a",39),m.gc("click",(function(){m.yc(e);const a=t.$implicit;return m.kc().routeToPage(a.id,a.current_Approver_Code,a.returnForCorrection,a.current_Approver,a.applicationType)})),m.Hc(5),m.Tb(),m.Tb(),m.Ub(6,"td"),m.Hc(7),m.Tb(),m.Ub(8,"td"),m.Hc(9),m.Tb(),m.Ub(10,"td"),m.Hc(11),m.Tb(),m.Ub(12,"td"),m.Hc(13),m.Tb(),m.Ub(14,"td"),m.Hc(15),m.Tb(),m.Ub(16,"td"),m.Hc(17),m.Tb(),m.Ub(18,"td"),m.Hc(19),m.Tb(),m.Ub(20,"td"),m.Hc(21),m.lc(22,"date"),m.Tb(),m.Qb(23,"td"),m.Tb()}if(2&e){const e=t.$implicit,a=t.index,i=m.kc();m.Bb(2),m.Ic((i.page-1)*i.pageSize+a+1),m.Bb(3),m.Ic(e.workflowRequestID),m.Bb(2),m.Ic(e.bashNo),m.Bb(2),m.Ic(e.applicationType),m.Bb(2),m.Ic(e.current_Approver),m.Bb(2),m.Ic(e.pendingUserLogin),m.Bb(2),m.Ic(e.branch),m.Bb(2),m.Ic(e.approval_Status),m.Bb(2),m.Ic(e.navStatus),m.Bb(2),m.Ic(m.nc(22,10,e.createdDate,"dd/MM/yyyy, h:mm a"))}}function we(e,t){if(1&e&&(m.Ub(0,"option"),m.Hc(1),m.Tb()),2&e){const e=t.$implicit;m.Bb(1),m.Jc(" ",e," ")}}const _e=[{path:"rsa-report",component:k},{path:"rsa-reroute",component:le},{path:"payment-schdule",component:ye},{path:"rsa-search",component:(()=>{class e{constructor(e,t,a,i,n){this.service=e,this.helperService=t,this.http=a,this.datePipes=i,this.router=n,this.submitted=!1,this.title=["Mr","Mrs","Dr"],this.requestStatus=["Pending","Approved","Signed","Close"],this.requestStat=[{code:"ARQ",name:"All Request"},{code:"MRQ",name:"My Request"},{code:"PBM",name:"Process by Me"},{code:"PSD",name:"Pencom Submit Date"},{code:"WDD",name:"Withdrawal Date"},{code:"APT",name:"Application Type"},{code:"SIS",name:"Single Item Search"},{code:"LIS",name:"List of Items Search"},{code:"PDG",name:"Pending Group"},{code:"TRQ",name:"Current Request"}],this.pageSizeList=[10,25,50,100,150,200],this.userList=[],this.taskBatch=[],this.tashBatchReq=[],this.taskCheckList=[],this.userGroupList=[],this.rmasList=[],this.isDisabled=!0,this.isBatch=!1,this.isBatchChk=!1,this.isExportExcel=!1,this.applicationType=[],this.groupList=[],this.taskBatch2=[],this.groupListName=[],this.branchListName=[],this.taskList=[],this.taskListAll=[],this.exportAll=[],this.checkItem=[],this.page=1,this.pageSize=10,this.totalCounts=0,this.today=new Date,this.todayReport=new Date,this.batchList={batchUserLogin:"",batchUserEmail:"",batchUserName:"",rsapin:"",login:"",groupName:"",branchName:"",filterBy:"Current Request",requestStatus:"Pending",endDate:null,startDate:null,withdrawEndDate:null,withdrawStartDate:null,currentUserName:"",currentUserLogin:"",currentUserEmail:"",approval_Status:"",current_Approver:"",current_Approver_Code:"",pendingUserEmail:"",pendingUserLogin:"",returnForCorrection:"",applicationType:"",pencomSubmissionDate:null,pencomSubmissionEndDate:null,excelTemplate:""}}ngOnInit(){this.currentUserDetail(),this.getApplicationType(),this.getGroupList(),this.getBranchList()}currentUserDetail(){this.service.getIdentityUserUrl().then(e=>{if(null!=e){console.log(e);let t=e.samAccountName;this.batchList.currentUserName=e.displayName,this.batchList.currentUserLogin=e.samAccountName,this.batchList.currentUserEmail=e.emailAddress,this.filterCode="TRQ";let a=this.filterCode;console.log(this.batchList),this.initTaskList(t,a)}}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e)})))}getApplicationType(){this.service.get("RSAApplicationType").then(e=>{null!=e&&(this.applicationType=e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}startMapping(e){this.taskList=e,this.taskCheckList=this.taskCheckList.sort((e,t)=>t.id-e.id),this.taskList=this.taskList.sort((e,t)=>t.id-e.id)}initTaskList(e,t){"TRQ"===t&&this.service.postUrl("DigiProRequest/GetUserGroups/"+e).then(e=>{this.groupList=e;let t=this.groupList,a=this.todayReport,i=t.some(e=>e.groupName===p.k),n=t.some(e=>e.groupName===p.n),r=t.map(e=>e.groupName).toString();1==i||1==n?this.getTodayRequest(a):""!=r?this.getSearchOne("MRQ","DigiProRequest/MyRequest",a,a,a):(this.router.navigate(["task-list"]),this.helperService.showError("You do not have permission to perform this operation"))}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}getTodayRequest(e){let t=this.datePipes.transform(e,"yyyy-MM-dd");this.service.post("DigiProReport/GetTodayDateRequest",{startDate:t,endDate:"",pageNumber:this.page,pageSize:this.pageSize}).then(e=>{null!=e&&(this.startMapping(e.requests),this.totalCounts=e.totalCount)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}getSearchBy(){let e=this.batchList.login,t=this.filterCode,a=this.datePipes.transform(this.batchList.startDate,"yyyy-MM-dd"),i=this.datePipes.transform(this.batchList.endDate,"yyyy-MM-dd");if(null!==a&&null!=i&&""!==e&&"MRQ"===t)var n="DigiProRequest/MyRequest";else if(null!==a&&null!=i&&""!==e&&"PBM"===t)n="DigiProRequest/GetAllMyApprovals";else if(null!==a&&null!=i&&"ARQ"===t)n="DigiProReport/GetDateRangeRequestPage";else if(null!==a&&null!=i&&"PSD"===t)n="DigiProReport/GetSubmitDateRequest";else if(null!==a&&null!=i&&"WDD"===t)n="DigiProReport/GetWithdrawalDateRequest";else if(null!==a&&null!=i&&"APT"===t)n="DigiProRequest/GetRequestByAppType";else if("TRQ"===t)n="DigiProReport/GetTodayDateRequest";else if("PDG"===t){let e=this.batchList.groupName;n=e===p.g||e===p.a||e===p.e?"DigiProReport/GetRequestPendingBranch":"DigiProReport/GetRequestPendingGroup"}else this.helperService.showError("Please input all parameters before you porceed");""!==n&&this.getSearchOne(t,n,a,i,"")}getPageFromServiceSearch(){let e=this.filterCode,t=this.datePipes.transform(this.batchList.startDate,"yyyy-MM-dd"),a=this.datePipes.transform(this.batchList.endDate,"yyyy-MM-dd"),i=this.datePipes.transform(this.todayReport,"yyyy-MM-dd");if("MRQ"===e)var n="DigiProRequest/MyRequest";else if("PBM"===e)n="DigiProRequest/GetAllMyApprovals";else if("ARQ"===e)n="DigiProReport/GetDateRangeRequestPage";else if("PSD"===e)n="DigiProReport/GetSubmitDateRequest";else if("WDD"===e)n="DigiProReport/GetWithdrawalDateRequest";else if("APT"===e)n="DigiProRequest/GetRequestByAppType";else if("TRQ"===e)n="DigiProReport/GetTodayDateRequest";else if("PDG"===e){let e=this.batchList.groupName;n=e===p.g||e===p.a||e===p.e?"DigiProReport/GetRequestPendingBranch":"DigiProReport/GetRequestPendingGroup"}""!==n&&this.getSearchOne(e,n,t,a,i)}getSearchOne(e,t,a,i,n){let r=this.batchList.applicationType,o=this.page,s=this.pageSize,c=this.batchList.login;if(this.isExportExcel=!0,this.batchList.excelTemplate="WDD"===e?"withdrawal":"normal",""!==t)if("WDD"===e||"PSD"===e)this.getSearch2(t,{startDate:a,endDate:i,pageNumber:o,pageSize:s});else if("ARQ"===e)this.getSearchUrl(`DigiProReport/GetDateRangeRequest/${a}/${i}`);else if("MRQ"===e||"PBM"===e)this.getSearch2(t,{startDate:a,endDate:i,pageNumber:o,pageSize:s,search:c});else if("APT"===e)this.getSearch2(t,{startDate:a,endDate:i,pageNumber:o,pageSize:s,search:r});else if("TRQ"===e)this.getSearch2(t,{startDate:n,endDate:null,pageNumber:o,pageSize:s});else if("PDG"===e){let e=this.batchList.groupName;this.getSearch2(t,e===p.g||e===p.a||e===p.e?{startDate:a,endDate:i,pageNumber:o,pageSize:s,login:e,search:this.batchList.branchName}:{startDate:a,endDate:i,pageNumber:o,pageSize:s,search:e})}}getSearch2(e,t){let a=this.exportAllRecord;this.service.post(e,t).then(e=>{null!=e&&"exportAll"!==a?(this.startMapping(e.requests),this.totalCounts=e.totalCount):null!=e&&"exportAll"===a&&(this.exportAll=e.requests,this.exportRecord())}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}getSearchUrl(e){this.service.postUrl(e).then(e=>{null!=e&&this.startMapping(e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}routeToPageChk(e,t,a,i){this.router.navigate("AA0"===t&&"Yes"==a||"Save For Later"===t?["rsa-form",{id:e,appType:i}]:["approval-page",{id:e,appType:i}])}routeToPage(e,t,a,i,n){this.router.navigate("AA0"===t&&"Yes"==a||"Save For Later"===i?["rsa-form",{id:e,appType:n}]:["approval-page",{id:e,appType:n}])}getClientRequest(e){let t=e.target.value;this.batchList.excelTemplate="normal",this.isExportExcel=!0;let a=this.filterCode;if("SIS"===a)this.getClientRequest2("DigiProReport/GetExportRequest/"+t);else if("LIS"===a){var i=t.replace(/\s/g,"").split(",");this.service.post("DigiProRequest/GetExportRequests",i).then(e=>{null!=e&&this.startMapping(e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}}getClientRequest2(e){this.service.postUrl(e).then(e=>{null!=e&&this.startMapping(e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}getAppType(e){let t=e.target.value;this.batchList.excelTemplate="normal",this.batchList.applicationType=t}getGroupList(){this.service.get("RSAGroup").then(e=>{null!=e&&(this.groupListName=e)}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}getBranchList(){this.service.get("RSABranch").then(e=>{null!=e&&(this.branchListName=e.sort((e,t)=>e.name>t.name?1:-1))}).catch(e=>Object(l.a)(this,void 0,void 0,(function*(){this.helperService.showError(yield e.statusText)})))}reloadCurrentRoute(){let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}getGroupName(e){this.grpName=e.target.selectedIndex,console.log(this.batchList.groupName)}getBranchName(e){this.brnhName=e.target.selectedIndex,console.log(this.batchList.branchName)}getFilterBy(e){let t=e.target.selectedIndex,a=-1+t;this.flterCod=t,console.log(this.requestStat[a]),this.batchList.filterBy=this.requestStat[a].name,this.filterCode=this.requestStat[a].code,"TRQ"===this.filterCode&&this.getTodayRequest(this.todayReport)}exportToExcel(){let e=this.filterCode;this.pageSize=this.totalCounts,this.exportAllRecord="exportAll","ARQ"===e||"SIS"===e||"LIS"===e?(this.exportAll=this.taskList,this.exportRecord()):this.getPageFromServiceSearch()}exportRecord(){let e=this.batchList.excelTemplate;if("normal"===e){for(let a=0;a<this.exportAll.length;a++){this.exportAll[a].serialNo=a+1;let e=this.exportAll;null===e[a].csoStage&&(e[a].csoStage=[],e[a].csoStage.name="",e[a].csoStage.actionTime=""),null===e[a].asaStage&&(e[a].asaStage=[],e[a].asaStage.name="",e[a].asaStage.actionTime=""),null===e[a].hboStage&&(e[a].hboStage=[],e[a].hboStage.name="",e[a].hboStage.actionTime=""),null===e[a].ssoStage&&(e[a].ssoStage=[],e[a].ssoStage.name="",e[a].ssoStage.actionTime="")}const e=[],t={data:[{A:"RSA Data"},{A:"S/N",B:"PIN",C:"Batch ID",D:"Application Type",E:"Member name of NAV",F:"Mobile Number",G:"Bank Name",H:"Bank Account No",I:"Current Status on DigiPro",J:"CSO Name",K:"Date Created on DigiPro",L:"ASA Name",M:"Date Approved by ASA",N:"HBO Name",O:"Date Approved by HBO",P:"SSO Name",Q:"Date Approved by SSO",R:"Document Link"}],skipHeader:!0};this.exportAll.forEach(e=>{t.data.push({A:e.serialNo,B:e.rsapin,C:e.bashNo,D:e.applicationType,E:e.surname+" "+e.firstName+" "+e.otherNames,F:e.phoneNumber+", "+e.otherPhoneNumber,G:e.bankBranchName,H:e.nkAccountNumber,I:e.current_Approver,J:e.csoStage.name,K:e.csoStage.actionTime,L:e.asaStage.name,M:e.asaStage.actionTime,N:e.hboStage.name,O:e.hboStage.actionTime,P:e.ssoStage.name,Q:e.ssoStage.actionTime,R:u.c+"/"+e.aallRequiredDocument})}),e.push(t),this.service.exportJsonToExcel(e,"rsa_data_customized")}else if("withdrawal"===e){for(let a=0;a<this.exportAll.length;a++)this.exportAll[a].serialNo=a+1;const e=[],t={data:[{A:"RSA Data"},{A:"S/N",B:"PIN",C:"Member name of NAV",D:"Batch ID",E:"Application Type",F:"Amount to be Withdrawn",G:"Maker Name",H:"Maker Approver Date",I:"Checker Name(Approver 1)",J:"Approver 1 Date",K:"HOU Name(Approver 2)",L:"Approver 2 Date",M:"HOD Name(Approver 3)",N:"Approver 3 Date",O:"ED NAME(Approver 4)",P:"Approver 4 Date"}],skipHeader:!0};this.exportAll.forEach(e=>{t.data.push({A:e.serialNo,B:e.rsapin,C:e.surname+" "+e.firstName+" "+e.otherNames,D:e.bashNo,E:e.applicationType,F:e.netAmount,G:e.makerStage.name,H:e.makerStage.actionTime,I:e.checkerStage.name,J:e.checkerStage.actionTime,K:e.houStage.name,L:e.houStage.actionTime,M:e.hodStage.name,N:e.hodStage.actionTime,O:e.edoStage.name,P:e.edoStage.actionTime})}),e.push(t),this.service.exportJsonToExcel(e,"rsa_data_customized")}}}return e.\u0275fac=function(t){return new(t||e)(m.Pb(g.a),m.Pb(b.a),m.Pb(Ae.b),m.Pb(i.e),m.Pb(c.c))},e.\u0275cmp=m.Jb({type:e,selectors:[["app-rsa-search"]],decls:59,vars:24,consts:[[1,"row","row-cols-auto"],[1,"col-3","gName"],["type","text","name","filtBy","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["filtBy","ngModel"],["hidden","","value","","disabled","","selected",""],[4,"ngFor","ngForOf"],["class","col-3 gName",4,"ngIf"],[1,"row"],[1,"col","col-3"],["id","search","type","button",1,"btn","btn-outline-secondary",3,"click"],["class","btn btn-sm font-weight-bold btn-link",3,"click",4,"ngIf"],[4,"ngIf"],["class","table batch-table table-striped",4,"ngIf"],[1,"table","table-striped"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","maxSize","rotate","ellipses","boundaryLinks","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],["type","text","name","rsaPin",1,"form-control",3,"ngModel","ngModelChange"],["rsaPin","ngModel"],["type","text","name","rsaPin",1,"form-control",3,"ngModel","ngModelChange","change"],["name","appType","placeholder","d.ff","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["appType","ngModel"],["name","gName","placeholder","d.ff","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["gName","ngModel"],["color","danger"],["id","error",3,"hidden"],["name","brnhName","placeholder","d.ff","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["brnhName","ngModel"],["appearance","fill"],["matInput","","name","strtDate","placeholder","Choose a date","required","",3,"matDatepicker","max","ngModel","ngModelChange"],["strtDate","ngModel"],["matSuffix","",3,"for"],["color","primary"],["pickerStat",""],["matInput","","name","ndDate","placeholder","Choose a date","required","",3,"matDatepicker","max","ngModel","ngModelChange"],["ndDate","ngModel"],["pickerEnd",""],[1,"btn","btn-sm","font-weight-bold","btn-link",3,"click"],[1,"table","batch-table","table-striped"],[3,"click"]],template:function(e,t){1&e&&(m.Ub(0,"h5"),m.Hc(1,"Report List"),m.Tb(),m.Ub(2,"div",0),m.Ub(3,"div",1),m.Ub(4,"label"),m.Hc(5,"Filter By"),m.Tb(),m.Ub(6,"select",2,3),m.gc("ngModelChange",(function(e){return t.batchList.filterBy=e}))("change",(function(e){return t.getFilterBy(e)})),m.Ub(8,"option",4),m.Hc(9,"Select filter type"),m.Tb(),m.Fc(10,Se,2,1,"option",5),m.Tb(),m.Tb(),m.Fc(11,Te,5,1,"div",6),m.Fc(12,ve,5,1,"div",6),m.Fc(13,Me,8,2,"div",6),m.Fc(14,Ce,11,3,"div",6),m.Fc(15,Pe,11,3,"div",6),m.Fc(16,Oe,9,4,"div",6),m.Fc(17,Ie,9,4,"div",6),m.Tb(),m.Ub(18,"div",7),m.Ub(19,"div",8),m.Ub(20,"button",9),m.gc("click",(function(){return t.getSearchBy()})),m.Hc(21,"Search "),m.Tb(),m.Tb(),m.Tb(),m.Fc(22,Re,2,0,"button",10),m.Fc(23,De,2,0,"h4",11),m.Fc(24,ke,17,1,"table",12),m.Ub(25,"table",13),m.Ub(26,"thead"),m.Ub(27,"tr"),m.Ub(28,"td"),m.Hc(29,"S/N"),m.Tb(),m.Ub(30,"td"),m.Hc(31,"Reference Code"),m.Tb(),m.Ub(32,"td"),m.Hc(33,"Batch No"),m.Tb(),m.Ub(34,"td"),m.Hc(35,"Application Name"),m.Tb(),m.Ub(36,"td"),m.Hc(37,"Current Approval"),m.Tb(),m.Ub(38,"td"),m.Hc(39,"Pending User"),m.Tb(),m.Ub(40,"td"),m.Hc(41,"Branch"),m.Tb(),m.Ub(42,"td"),m.Hc(43,"Status"),m.Tb(),m.Ub(44,"td"),m.Hc(45,"Nav Status"),m.Tb(),m.Ub(46,"td"),m.Hc(47,"Request Date"),m.Tb(),m.Qb(48,"td"),m.Tb(),m.Tb(),m.Ub(49,"tbody"),m.Fc(50,xe,24,13,"tr",5),m.Tb(),m.Tb(),m.Ub(51,"div",14),m.Ub(52,"ngb-pagination",15),m.gc("pageChange",(function(e){return t.page=e}))("pageChange",(function(){return t.getPageFromServiceSearch()})),m.Tb(),m.Ub(53,"select",16),m.gc("ngModelChange",(function(e){return t.pageSize=e}))("ngModelChange",(function(){return t.getPageFromServiceSearch()})),m.Fc(54,we,2,1,"option",5),m.Tb(),m.Tb(),m.Ub(55,"pre"),m.Hc(56),m.Tb(),m.Ub(57,"pre"),m.Hc(58),m.Tb()),2&e&&(m.Bb(6),m.qc("ngModel",t.batchList.filterBy),m.Bb(4),m.qc("ngForOf",t.requestStat),m.Bb(1),m.qc("ngIf","MRQ"===t.filterCode||"PBM"===t.filterCode),m.Bb(1),m.qc("ngIf","SIS"===t.filterCode||"LIS"===t.filterCode),m.Bb(1),m.qc("ngIf","APT"===t.filterCode),m.Bb(1),m.qc("ngIf","PDG"===t.filterCode),m.Bb(1),m.qc("ngIf","Customer Support Officer"===t.batchList.groupName||"Account Support & Admin"===t.batchList.groupName||"Head of Branch Operations"===t.batchList.groupName),m.Bb(1),m.qc("ngIf","SIS"!==t.filterCode&&"LIS"!==t.filterCode&&"TRQ"!==t.filterCode&&"PDG"!==t.filterCode),m.Bb(1),m.qc("ngIf","SIS"!==t.filterCode&&"LIS"!==t.filterCode&&"TRQ"!==t.filterCode&&"PDG"!==t.filterCode),m.Bb(5),m.qc("ngIf",t.isExportExcel),m.Bb(1),m.qc("ngIf",t.taskCheckList.length>0),m.Bb(1),m.qc("ngIf",t.taskCheckList.length>0),m.Bb(26),m.qc("ngForOf",t.taskList),m.Bb(2),m.qc("collectionSize",t.totalCounts)("page",t.page)("pageSize",t.pageSize)("maxSize",15)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),m.Bb(1),m.qc("ngModel",t.pageSize),m.Bb(1),m.qc("ngForOf",t.pageSizeList),m.Bb(2),m.Jc("Current page: ",t.page,""),m.Bb(2),m.Jc("Total items: ",t.totalCounts,""))},directives:[f.u,f.t,f.l,f.o,f.p,f.w,i.l,i.m,n.l,f.c,N.b,r.b,o.b,o.d,N.e,o.a],pipes:[i.e],styles:["h5[_ngcontent-%COMP%]{text-align:center}h5[_ngcontent-%COMP%], thead[_ngcontent-%COMP%]{color:#fff;padding:4px;background-color:#0033a1;width:100%}.row[_ngcontent-%COMP%]   .col.col-3[_ngcontent-%COMP%]{margin-top:20px}.gName[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}a[_ngcontent-%COMP%]{color:#0033a1!important}a[_ngcontent-%COMP%]:hover{text-decoration:underline!important}h4[_ngcontent-%COMP%]{margin-top:25px}.batch-table[_ngcontent-%COMP%]{margin-bottom:30px}#spacer[_ngcontent-%COMP%]{margin:2vh}td[_ngcontent-%COMP%]{text-align:center}#search[_ngcontent-%COMP%]{margin-bottom:5vh}#btn[_ngcontent-%COMP%]{color:#fff;background-color:#0033a1;margin-bottom:2vh}"]}),e})()}];let Fe=(()=>{class e{}return e.\u0275mod=m.Nb({type:e}),e.\u0275inj=m.Mb({factory:function(t){return new(t||e)},imports:[[c.d.forChild(_e)],c.d]}),e})(),He=(()=>{class e{}return e.\u0275mod=m.Nb({type:e}),e.\u0275inj=m.Mb({factory:function(t){return new(t||e)},providers:[{provide:s.d,useValue:"en-GB"},i.e,i.c],imports:[[i.b,f.g,n.j,r.c,s.h,o.c,Fe]]}),e})()},ewic:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("znvk");t.Options=function(){return function(e){void 0===e&&(e={}),this.aliasString="=",this.attributeString="@",this.cdataInvalidChars=!1,this.cdataKeys=[],this.replaceInvalidChars=!1,this.useSelfClosingTagIfEmpty=!0,this.validation=!0,this.valueString="#",i.isUndefined(e.validation)||(this.validation=e.validation),i.isUndefined(e.aliasString)||(this.aliasString=e.aliasString),i.isUndefined(e.attributeString)||(this.attributeString=e.attributeString),i.isUndefined(e.cdataInvalidChars)||(this.cdataInvalidChars=e.cdataInvalidChars),i.isUndefined(e.cdataKeys)||(this.cdataKeys=e.cdataKeys),this.declaration=new n(e.declaration),this.dtd=new r(this.validation,e.dtd),this.format=new o(e.format),i.isUndefined(e.replaceInvalidChars)||(this.replaceInvalidChars=e.replaceInvalidChars),this.typeHandlers=new s(e.typeHandlers),i.isUndefined(e.useSelfClosingTagIfEmpty)||(this.useSelfClosingTagIfEmpty=e.useSelfClosingTagIfEmpty),i.isUndefined(e.valueString)||(this.valueString=e.valueString),this.wrapHandlers=new c(e.wrapHandlers)}}();var n=function(){return function(e){void 0===e&&(e={}),this.include=!0,i.isUndefined(e.include)||(this.include=e.include),this.encoding=e.encoding,this.standalone=e.standalone,this.version=e.version}}();t.DeclarationOptions=n;var r=function(){return function(e,t){if(void 0===t&&(t={}),this.include=!1,i.isUndefined(t.include)||(this.include=t.include),e&&i.isUndefined(t.name)&&this.include)throw new Error("options.dtd.name should be defined if options.dtd.include is true");this.name=t.name,this.sysId=t.sysId,this.pubId=t.pubId}}();t.DtdOptions=r;var o=function(){return function(e){void 0===e&&(e={}),this.doubleQuotes=e.doubleQuotes,this.indent=e.indent,this.newline=e.newline,this.pretty=e.pretty}}();t.FormatOptions=o;var s=function(){return function(e){for(var t in void 0===e&&(e={}),e)Object.prototype.hasOwnProperty.call(e,t)&&(this[t]=e[t])}}();t.TypeHandlers=s;var c=function(){return function(e){for(var t in void 0===e&&(e={}),e)Object.prototype.hasOwnProperty.call(e,t)&&(this[t]=e[t])}}();t.WrapHandlers=c},h2TC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._parent=e,this.name=a.name}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){if(this._validation&&!n.validateName(e))throw new Error(i.getContext(this.up())+': entity reference name "'+e+'" should not contain characters not allowed in XML names');this._name=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"&"+this._name+";"},e.prototype.up=function(){return this._parent},e}()},hGlE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._parent=e,this.name=a.name}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){if(this._validation&&!n.validateName(e))throw new Error(i.getContext(this.up())+': parameter entity reference name "'+e+'" should not contain characters not allowed in XML names');this._name=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"%"+this._name+";"},e.prototype.up=function(){return this._parent},e}()},iIvF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._replaceInvalidCharsInCharData=!n.isUndefined(a.replaceInvalidCharsInCharData)&&a.replaceInvalidCharsInCharData,this._parent=e,this.charData=a.charData}return Object.defineProperty(e.prototype,"charData",{get:function(){return this._charData},set:function(e){if(this._replaceInvalidCharsInCharData)e=n.fixChar(e);else if(this._validation&&!n.validateChar(e))throw new Error(i.getContext(this.up())+': comment content "'+e+'" should not contain characters not allowed in XML');if(this._replaceInvalidCharsInCharData)e=e.replace("--","\ufffd\ufffd");else if(this._validation&&-1!==e.indexOf("--"))throw new Error(i.getContext(this.up())+': comment content "'+e+"\" should not contain the string '--'");if(this._replaceInvalidCharsInCharData)e.lastIndexOf("-")===e.length-1&&(e=e.substr(0,e.length-1)+"\ufffd");else if(this._validation&&e.lastIndexOf("-")===e.length-1)throw new Error(i.getContext(this.up())+': comment content "'+e+"\" should not end with the string '-'");this._charData=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"\x3c!--"+this._charData+"--\x3e"},e.prototype.up=function(){return this._parent},e}()},"j3+I":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._parent=e,this.content=a.content,this.target=a.target}return Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){if(!n.isUndefined(e)){if(this._validation&&!n.validateChar(e))throw new Error(i.getContext(this.up())+': processing instruction content "'+e+'" should not contain characters not allowed in XML');if(this._validation&&-1!==e.indexOf("?>"))throw new Error(i.getContext(this.up())+': processing instruction content "'+e+"\" should not contain the string '?>'")}this._content=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(e){if(this._validation&&!n.validateName(e))throw new Error(i.getContext(this.up())+': processing instruction target "'+e+'" should not contain characters not allowed in XML names');if(this._validation&&"xml"===e)throw new Error(i.getContext(this.up())+': processing instruction target "'+e+"\" should not be the string 'xml'");this._target=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return n.isUndefined(this._content)?"<?"+this._target+"?>":"<?"+this._target+" "+this._content+"?>"},e.prototype.up=function(){return this._parent},e}()},qScH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("FxkU"),n=a("LlVR"),r=a("t95l");t.default=function(){function e(e,t,a){this._validation=t,this._replaceInvalidCharsInCharData=!r.isUndefined(a.replaceInvalidCharsInCharData)&&a.replaceInvalidCharsInCharData,this._parent=e,this.charData=a.charData}return Object.defineProperty(e.prototype,"charData",{get:function(){return this._charData},set:function(e){if(this._replaceInvalidCharsInCharData)e=r.fixChar(e);else if(this._validation&&!r.validateChar(e))throw new Error(i.getContext(this.up())+': character data"'+e+'" should not contain characters not allowed in XML');this._charData=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var e=this._charData;return e=n.escapeAmpersands(e),e=n.escapeLeftAngleBrackets(e),n.escapeRightAngleBracketsInCdataTerminator(e)},e.prototype.up=function(){return this._parent},e}()},t95l:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateChar=function(e){for(var t=0;t<e.length;t++){var a=e.charCodeAt(t);if(!(9===a||10===a||13===a||a>=32&&a<=55295||a>=57344&&a<=65533)){if(t+1===e.length)return!1;var i=e.charCodeAt(t+1);if(!(a>=55296&&a<=56319&&i>=56320&&i<=57343))return!1;t++}}return!0},t.fixChar=function(e){for(var t="",a=0;a<e.length;a++){var i=e.charCodeAt(a);if(9===i||10===i||13===i||i>=32&&i<=55295||i>=57344&&i<=65533)t+=e[a];else{if(a+1===e.length)return t+"\ufffd";var n=e.charCodeAt(a+1);i>=55296&&i<=56319&&n>=56320&&n<=57343?(t+=e[a]+e[a+1],a++):t+="\ufffd"}}return t},t.validateSingleChar=function(e){if(0===e.length)return!1;var t=e.charCodeAt(0);if(1===e.length)return 9===t||10===t||13===t||t>=32&&t<=55295||t>=57344&&t<=65533;if(2!==e.length)return!1;var a=e.charCodeAt(1);return t>=55296&&t<=56319&&a>=56320&&a<=57343},t.validateName=function(e){if(0===e.length)return!1;var t=e.charCodeAt(0),a=58===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=767||t>=880&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533;if(1===e.length)return a;var i=e.charCodeAt(1),n=t>=55296&&t<=56191&&i>=56320&&i<=57343;if(!a&&!n)return!1;for(var r=n?2:1;r<e.length;r++){var o=e.charCodeAt(r);if(!(58===o||95===o||45===o||46===o||183===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=768&&o<=879||o>=880&&o<=893||o>=895&&o<=8191||o>=8204&&o<=8205||o>=8255&&o<=8256||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533)){if(r+1===e.length)return!1;var s=e.charCodeAt(r+1);if(!(o>=55296&&o<=56191&&s>=56320&&s<=57343))return!1;r++}}return!0},t.fixName=function(e){var t="";if(0===e.length)return t;var a=e.charCodeAt(0),i=58===a||95===a||a>=65&&a<=90||a>=97&&a<=122||a>=192&&a<=214||a>=216&&a<=246||a>=248&&a<=767||a>=880&&a<=893||a>=895&&a<=8191||a>=8204&&a<=8205||a>=8304&&a<=8591||a>=11264&&a<=12271||a>=12289&&a<=55295||a>=63744&&a<=64975||a>=65008&&a<=65533;if(1===e.length)return i?e[0]:"\ufffd";var n=e.charCodeAt(1),r=a>=55296&&a<=56191&&n>=56320&&n<=57343;t=r?e[0]+e[1]:i?e[0]:"\ufffd";for(var o=r?2:1;o<e.length;o++){var s=e.charCodeAt(o);if(58===s||95===s||45===s||46===s||183===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=768&&s<=879||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8255&&s<=8256||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533)t+=e[o];else{if(o+1===e.length)return t+"\ufffd";var c=e.charCodeAt(o+1);s>=55296&&s<=56191&&c>=56320&&c<=57343?(t+=e[o]+e[o+1],o++):t+="\ufffd"}}return t},t.isUndefined=function(e){return"[object Undefined]"===Object.prototype.toString.call(e)}},znvk:function(e,t,a){"use strict";function i(e){return"[object Undefined]"===Object.prototype.toString.call(e)}function n(e){return"[object Null]"===Object.prototype.toString.call(e)}function r(e){return"[object Function]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isUndefined=i,t.isNull=n,t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isFunction=r,t.isSet=function(e){return"[object Set]"===Object.prototype.toString.call(e)},t.isMap=function(e){return"[object Map]"===Object.prototype.toString.call(e)},t.stringify=function(e){var t;return i(e)||n(e)||r(null===(t=e)||void 0===t?void 0:t.toString)||(e=e.toString()),String(e)}}}]);